<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EtherX OneNote</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background: #ffffff14;
      color: #333;
    }
    
        .splash-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(to bottom right, #000000, #0f172a, #000000);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            z-index: 1000;
        }

        .background-overlay {
            position: absolute;
            inset: 0;
            overflow: hidden;
        }

        .animated-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
        }

        .orb-1 {
            top: 25%;
            left: 25%;
            width: 384px;
            height: 384px;
            background: rgba(59, 130, 246, 0.2);
            animation: float1 4s ease-in-out infinite;
        }

        .orb-2 {
            bottom: 25%;
            right: 25%;
            width: 384px;
            height: 384px;
            background: rgba(37, 99, 235, 0.15);
            animation: float2 4s ease-in-out infinite;
        }

        @keyframes float1 {
            0%, 100% { 
                transform: translate(0, 0) scale(1); 
                opacity: 0.3; 
            }
            50% { 
                transform: translate(0, 0) scale(1.2); 
                opacity: 0.5; 
            }
        }

        @keyframes float2 {
            0%, 100% { 
                transform: translate(0, 0) scale(1.2); 
                opacity: 0.5; 
            }
            50% { 
                transform: translate(0, 0) scale(1); 
                opacity: 0.3; 
            }
        }

        .splash-content {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }

        .logo-container {
            position: relative;
            animation: scaleIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s both;
        }

        @keyframes scaleIn {
            from { 
                transform: scale(0); 
                opacity: 0; 
            }
            to { 
                transform: scale(1); 
                opacity: 1; 
            }
        }

        .glow-ring {
            position: absolute;
            inset: 0;
            background: #3b82f6;
            border-radius: 50%;
            filter: blur(16px);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { 
                transform: scale(1); 
                opacity: 0.2; 
            }
            50% { 
                transform: scale(1.05); 
                opacity: 0.3; 
            }
        }

        .logo-wrapper {
            position: relative;
            padding: 2rem;
        }

        .logo-image {
            width: 192px;
            height: 192px;
            object-fit: contain;
        }

        .app-name {
            text-align: center;
            animation: fadeInUp 0.8s ease-out 0.5s both;
        }

        @keyframes fadeInUp {
            from { 
                transform: translateY(20px); 
                opacity: 0; 
            }
            to { 
                transform: translateY(0); 
                opacity: 1; 
            }
        }

        .app-name h1 {
            color: white;
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            letter-spacing: 0.05em;
        }

        .divider {
            height: 4px;
            background: linear-gradient(to right, transparent, #3b82f6, transparent);
            animation: expandWidth 0.6s ease-out 0.8s both;
        }

        @keyframes expandWidth {
            from { 
                transform: scaleX(0); 
            }
            to { 
                transform: scaleX(1); 
            }
        }

        .loading-dots {
            display: flex;
            gap: 0.5rem;
            animation: fadeIn 0.5s ease-out 1s both;
        }

        @keyframes fadeIn {
            from { 
                opacity: 0; 
            }
            to { 
                opacity: 1; 
            }
        }

        .dot {
            width: 8px;
            height: 8px;
            background: #60a5fa;
            border-radius: 50%;
        }

        .dot:nth-child(1) { 
            animation: dotPulse 1s ease-in-out infinite; 
        }
        
        .dot:nth-child(2) { 
            animation: dotPulse 1s ease-in-out 0.2s infinite; 
        }
        
        .dot:nth-child(3) { 
            animation: dotPulse 1s ease-in-out 0.4s infinite; 
        }

        @keyframes dotPulse {
            0%, 100% { 
                transform: scale(1); 
                opacity: 0.5; 
            }
            50% { 
                transform: scale(1.5); 
                opacity: 1; 
            }
        }

        .fade-out {
            animation: fadeOut 0.5s ease-out forwards;
        }

        @keyframes fadeOut {
            from { 
                opacity: 1; 
            }
            to { 
                opacity: 0; 
            }
        }

        @media (max-width: 640px) {
            .app-name h1 {
                font-size: 1.875rem;
            }
            
            .logo-image {
                width: 144px;
                height: 144px;
            }
            
            .logo-wrapper {
                padding: 1.5rem;
            }

            .orb-1, .orb-2 {
                width: 256px;
                height: 256px;
            }
        }

    /* Auth Page Styles */
    .auth-page {
      min-height: 100vh;
      background: linear-gradient(to bottom right, #000000, #0f172a, #000000);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      position: relative;
    }

    #particles-container {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: rgba(96, 165, 250, 0.4);
      border-radius: 50%;
      animation: particleFloat 5s ease-in-out infinite;
    }

    @keyframes particleFloat {
      0%, 100% { transform: translateY(0); opacity: 0; }
      50% { opacity: 1; }
      100% { transform: translateY(-30px); opacity: 0; }
    }

    .auth-container {
      width: 100%;
      max-width: 448px;
      position: relative;
      z-index: 10;
      animation: fadeInUp 0.6s ease-out;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .auth-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .header-title {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .auth-logo {
      width: 75px;
      height: 75px;
      object-fit: contain;
      border-radius: 0.5rem;
    }

    .auth-header h1 {
      color: white;
      font-size: 1.875rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .auth-header p {
      color: #94a3b8;
      font-size: 0.875rem;
    }

    .auth-card {
      background: rgba(2, 6, 23, 0.8);
      backdrop-filter: blur(24px);
      border: 1px solid rgba(51, 65, 85, 0.5);
      border-radius: 0.75rem;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 15px rgba(59, 130, 246, 0.1);
    }

    .tabs {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      background: rgba(15, 23, 42, 0.5);
      border: 1px solid rgba(51, 65, 85, 0.5);
      padding: 0.25rem;
      border-radius: 0.5rem;
      margin: 1.5rem;
      margin-bottom: 0;
    }

    .tab-button {
      background: transparent;
      border: none;
      padding: 0.625rem 1rem;
      color: #cbd5e1;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      border-radius: 0.375rem;
      transition: all 0.2s ease;
    }

    .tab-button:hover {
      color: white;
    }

    .tab-button.active {
      background: #2563eb;
      color: white;
    }

    .tab-content {
      display: none;
      padding: 1.5rem;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .auth-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .form-group label {
      color: #e2e8f0;
      font-size: 0.875rem;
      font-weight: 500;
    }

    .input-wrapper {
      position: relative;
    }

    .input-icon {
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: #94a3b8;
      pointer-events: none;
    }

    input[type="email"],
    input[type="password"],
    input[type="text"] {
      width: 100%;
      padding: 0.625rem 0.75rem 0.625rem 2.5rem;
      background: rgba(15, 23, 42, 0.5);
      border: 1px solid rgba(51, 65, 85, 0.5);
      border-radius: 0.375rem;
      color: white;
      font-size: 0.875rem;
      transition: all 0.2s ease;
      box-sizing: border-box;
    }

    input[type="email"]:focus,
    input[type="password"]:focus,
    input[type="text"]:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    input::placeholder {
      color: #64748b;
    }

    .password-toggle {
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #94a3b8;
      cursor: pointer;
      padding: 0;
      display: flex;
      align-items: center;
      transition: color 0.2s ease;
    }

    .password-toggle:hover {
      color: #cbd5e1;
    }

    .btn-primary {
      width: 100%;
      padding: 0.625rem 1rem;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 0.375rem;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.3);
      transition: all 0.2s ease;
    }

    .btn-primary:hover {
      background: #1d4ed8;
      box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.5);
      transform: translateY(-1px);
    }

    .error-message {
      color: #ef4444;
      font-size: 0.875rem;
      margin-top: 0.5rem;
      display: none;
    }

    .success-message {
      color: #10b981;
      font-size: 0.875rem;
      margin-top: 0.5rem;
      display: none;
    }

    /* Loading Page Styles */
    .loading-page {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
      color: white;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
    }

    .loading-container {
      text-align: center;
      max-width: 600px;
      padding: 40px;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
    }

    .loading-container::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(0, 100, 255, 0.1) 0%, transparent 70%);
      z-index: -1;
    }

    .logo-container {
      margin-bottom: 30px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .logo {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 0 30px rgba(0, 100, 255, 0.3);
      border: 2px solid rgba(255, 255, 255, 0.2);
      overflow: hidden;
      transition: all 0.5s ease;
      animation: rotate 8s infinite linear;
    }

    .logo:hover {
      animation-play-state: paused;
      box-shadow: 0 0 40px rgba(0, 100, 255, 0.5);
    }

    .logo img {
      max-width: 70%;
      max-height: 70%;
      filter: brightness(0) invert(1);
    }

    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .brand-name {
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 40px;
      background: linear-gradient(to right, #ffffff, #4dabf7, #339af0);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 0 20px rgba(51, 154, 240, 0.3);
      letter-spacing: 2px;
    }

    .loading-bar-container {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 30px;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
    }

    .loading-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #339af0, #4dabf7, #74c0fc);
      border-radius: 10px;
      transition: width 0.1s ease;
      box-shadow: 0 0 10px rgba(51, 154, 240, 0.5);
    }

    .loading-text {
      font-size: 1.1rem;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .dots {
      display: inline-block;
      margin-left: 5px;
    }

    .dot {
      display: inline-block;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background-color: #4dabf7;
      margin: 0 2px;
      animation: pulse 1.5s infinite ease-in-out;
    }

    .dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    .percentage {
      font-size: 1.5rem;
      font-weight: 600;
      color: #4dabf7;
      margin-bottom: 20px;
    }

    .hint {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.5);
      font-style: italic;
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.5);
        opacity: 0.7;
      }
    }

    .floating-elements {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -1;
    }

    .floating-element {
      position: absolute;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 50%;
      animation: float 15s infinite linear;
    }

    @keyframes float {
      0% {
        transform: translateY(0) rotate(0deg);
      }
      100% {
        transform: translateY(-1000px) rotate(720deg);
      }
    }

    #noteContent {
  font-size: 16px;
  color: #111;
}

#noteContent img {
  max-width: 100%;
  border-radius: 10px;
  margin: 10px 0;
  display: block;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}


#noteContent span[style*="font-family"] {
  display: inline;
}

#noteContent * {
  font-size: inherit;
}

#noteContent:focus {
  outline: 2px solid #0078d7;
}

.editor-options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 12px;
}

.option-btn {
  background: #f3f4f6;
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 6px 10px;
  cursor: pointer;
  transition: 0.2s;
  font-size: 15px;
}

.option-btn:hover {
  background: #e5e7eb;
}

.font-selector {
  position: relative;
  display: inline-block;
}

.style-button {
  background-color: #4b6cb7;
  color: white;
  border: none;
  padding: 10px 15px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all 0.3s ease;
}

.style-button:hover {
  background-color: #3a5795;
  transform: translateY(-2px);
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.1);
  border-radius: 8px;
  z-index: 1;
  overflow: hidden;
  margin-top: 5px;
}

.dropdown-content.show {
  display: block;
  animation: fadeIn 0.3s;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.font-option {
  padding: 12px 16px;
  cursor: pointer;
  border-bottom: 1px solid #f0f0f0;
  transition: background-color 0.2s;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.font-option:hover {
  background-color: #f5f7fa;
}

.font-option:last-child {
  border-bottom: none;
}

.font-preview {
  font-size: 16px;
}

.font-sample {
  font-size: 14px;
  color: #666;
  margin-top: 3px;
}

.selected {
  background-color: #e6f0ff;
  color: #4b6cb7;
  font-weight: 600;
}

.selected::after {
  content: "‚úì";
  margin-left: 10px;
  font-weight: bold;
}

#fontStyleBtn {
  transition: font-family 0.2s ease;
}

.zoom-controls {
  display: flex;
  align-items: center;
  gap: 5px;
}

.zoom-controls button {
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

#zoomLevel {
  font-size: 12px;
  color: #666;
  min-width: 40px;
  text-align: center;
}

    /* Soft glow pulse */
    @keyframes glowPulse {
      0%, 100% {
        filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.3))
                drop-shadow(0 0 15px rgba(255, 215, 0, 0.2));
        transform: scale(1);
      }
      50% {
        filter: drop-shadow(0 0 18px rgba(255, 215, 0, 0.7))
                drop-shadow(0 0 35px rgba(255, 215, 0, 0.4));
        transform: scale(1.02);
      }
    }

    /* Smooth rotation */
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Soft reveal */
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    /* App Styles */
    .app-container {
      display: none;
      min-height: 100vh;
      background: #f5f5f5;
    }

    .note-container {
  width: 70%;                  /* reduce width to 70% of the page */
  max-width: 900px;            /* optional max width for large screens */
  margin: 40px auto;           /* center horizontally and add top margin */
  background: var(--container-bg, #fff);
  border-radius: 15px;
  box-shadow: 0 0 20px rgba(0,0,0,0.15);
  padding: 25px;
  transition: all 0.3s ease-in-out;
}


    .header {
      background: #fff;
      padding: 15px 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .datetime-display {
      background: rgba(0, 0, 0, 0.05);
      padding: 8px 20px;
      text-align: center;
      font-size: 13px;
      color: #666;
      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    body.dark-mode .datetime-display {
      background: rgba(255, 255, 255, 0.05);
      color: #ccc;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .theme-toggle {
      background: #333;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
      font-size: 14px;
    }

    .theme-toggle:hover {
      background: #555;
    }



    .main-content {
      padding: 20px;
    }

    .note-controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .note-controls input {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      flex: 1;
      min-width: 200px;
    }

    .small-btn {
      padding: 8px 12px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .small-btn:hover {
      background: #0056b3;
    }

    .note-item {
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .note-item:hover {
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transform: translateY(-2px);
    }

    #noteTitle {
  font-size: 20px;         /* larger title text */
  font-weight: bold;       /* makes it more prominent */
  padding: 8px 10px;
  margin-bottom: 15px;
  border: none;
  outline: none;
  background: #f9fafb;
  border-radius: 8px;
  width: 100%;
  color: #000 !important; /* force black text */
}

/* Dark Mode */
body.dark-mode #noteTitle {
  background: #3a3b3c; /* üëà grey background for dark mode */
  color: #f9fafb  !important;      /* white text inside the input */
}

/* Optional: placeholder text in dark mode */
body.dark-mode #noteTitle::placeholder {
  color: #d1d5db;        /* light grey placeholder */
}

/* Dark Mode - Make note container grey with white text */
body.dark-mode #noteContent {
  background: #3a3b3c !important; /* same grey as Tag */
  color: #ffffff !important;      /* white text */
}

/* Optional: placeholder-style for better visibility */
body.dark-mode #noteContent::placeholder {
  color: #d1d5db;
}


    .note-content {
      color: #0c0c0c;
      font-size: 14px;
      margin-bottom: 8px;
    }

    .note-meta {
      font-size: 12px;
      color: #181717;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .note-actions {
      display: flex;
      gap: 5px;
    }

    .pin-btn {
      background: #828281;
      padding: 4px 8px;
      font-size: 12px;
      color: #000;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .pin-btn.pinned {
      background: #7b7b7b;
      color: white;
    }

    .note-item.pinned {
      border-left: 4px solid #ffc107;
      background: #fffbf0;
    }

    .pin-indicator {
      color: #ffc107;
      font-size: 14px;
      margin-right: 5px;
    }
    /* Export section inside note */
.export-section {
  position: relative;
  margin-top: 15px;
  display: inline-block;
}

.export-main-btn {
  background: #007bff; /* violet-blue */
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 15px;
  transition: 0.3s;
}

.export-main-btn:hover {
  background: #4338ca;
}

/* Dropdown styling */
.export-dropdown {
  display: none;
  flex-direction: column;
  position: absolute;
  top: 142px;
  left: 80%;
  background: #ffffff;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(74, 73, 73, 0.15);
  padding: 10px;
  width: 180px;
  z-index: 20;
}

.export-option {
  background: none;
  border: none;
  text-align: left;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: 0.2s;
}

.export-option:hover {
  background: #f3f4f6;
}

/* Optional: Dark mode support */
body.dark-mode .export-dropdown {
  background: #585a5c;
  color: #f9fafb;
}

body.dark-mode .export-option:hover {
  background: #374151;
}

     #Tag {
  font-size: 20px;         /* larger title text */
  font-weight: bold;       /* makes it more prominent */
  padding: 8px 10px;
  margin-bottom: 15px;
  border: none;
  outline: none;
  background: #f9fafb;
  border-radius: 8px;
  width: 100%;
  color: #000 !important; /* force black text */

}

/* Dark Mode */
body.dark-mode #Tag {
  background: #3a3b3c; /* üëà grey background for dark mode */
  color: #ffffff  !important;       /* white text when typing */
}

/* Optional: placeholder text in dark mode */
body.dark-mode #Tag::placeholder {
  color: #d1d5db;        /* light grey placeholder */
}

    .tag-content {
      color: #666;
      font-size: 14px;
      margin-bottom: 8px;
    }

    .tag-meta {
      font-size: 12px;
      color: #999;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .tag-actions {
      display: flex;
      gap: 5px;
    }
    /* To-Do List inside editor */
.todo-container {
  background: #48474788;
  padding: 20px;
  border-radius: 10px;
  margin-top: 10px;
  box-shadow: 0 2px 8px rgba(255, 255, 255, 0.317);
  width: 100%;
}

/* üåô Dark Mode - To-Do List (same grey as Tag, white text) */
body.dark-mode .todo-container {
  background: #3a3b3c !important;   /* same grey as Tag */
  color: #ffffff !important;        /* white text */
  border: 1px solid #555;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
}

/* To-Do input box */
body.dark-mode #taskInput {
  background: #4a4b4d !important;   /* lighter grey inside */
  color: #ffffff !important;        /* white text */
  border: 1px solid #666;
}

/* Add Task button */
body.dark-mode #addTaskBtn {
  background-color: #2e8b57 !important; /* dark green fits dark theme */
  color: #ffffff !important;
}

body.dark-mode #addTaskBtn:hover {
  background-color: #3cb371 !important; /* lighter hover effect */
}

/* Task list items */
body.dark-mode #taskList li {
  background: #4a4b4d !important;   /* match input tone */
  color: #ffffff !important;
  border: 1px solid #666;
}

/* Buttons inside each task (like delete/edit) */
body.dark-mode #taskList li button {
  background-color: #007bff !important;  /* blue stands out nicely */
  color: #ffffff !important;
  border: none;
}

body.dark-mode #taskList li button:hover {
  background-color: #3399ff !important;  /* hover glow */
}


/* ‚òÄÔ∏è Light Mode - To-Do List (white background, black text) */
.todo-container {
  background: #ffffff !important;   /* pure white background */
  color: #000000 !important;        /* black text */
  border: 1px solid #ddd;           /* subtle border */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* Input field inside To-Do */
#taskInput {
  background: #f9fafb !important;   /* light input tone like note title */
  color: #000000 !important;
  border: 1px solid #ccc;
}

/* Add Task button (light mode) */
#addTaskBtn {
  background-color: #28a745 !important; /* green */
  color: #ffffff !important;
}

/* Task list items */
#taskList li {
  background: #ffffff !important;
  color: #000000 !important;
  border: 1px solid #ddd;
}

/* üîò Buttons inside list (edit/delete) */
#taskList li button {
  background-color: #432fd7 !important; /* violet-blue tone */
  color: #ffffff !important;
}


.todo-container h2 {
  margin-bottom: 10px;
  font-size: 18px;
}

#taskInput {
  width: 70%;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

#addTaskBtn {
  padding: 8px 12px;
  margin-left: 5px;
  border: none;
  background-color: #28a745;
  color: white;
  border-radius: 6px;
  cursor: pointer;
}

#addTaskBtn:hover {
  background-color: #218838;
}

#taskList {
  list-style: none;
  padding: 0;
  margin-top: 10px;
}

#taskList li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #f1f1f1;
  margin-bottom: 8px;
  padding: 8px;
  border-radius: 6px;
}

#taskList li button {
  background-color: #432fd7;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  padding: 4px 8px;
}

#taskList li button:hover {
  background-color: #432fd7;
}


    .attachment-item {
      display: flex;
      align-items: center;
      padding: 8px;
      background: #f8f9fa;
      border-radius: 4px;
      margin-bottom: 5px;
      justify-content: space-between;
    }

    .attachment-info {
      display: flex;
      align-items: center;
    }

    .attachment-icon {
      margin-right: 15px;
      font-size: 20px;
    }

    .attachment-action {
      background: none;
      border: none;
      cursor: pointer;
      color: #666;
      padding: 4px;
      margin-left: 5px;
    }

    .attachment-action:hover {
      color: #007bff;
    }

    /* Hamburger Menu Styles */
    .hamburger-menu {
      position: relative;
      z-index: 100;
    }

    .hamburger-btn {
      background: rgba(0, 0, 0, 0.1);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-left: 10px;
    }

    .hamburger-btn:hover {
      background: rgba(0, 0, 0, 0.2);
      transform: scale(1.05);
    }

    .hamburger-line {
      width: 20px;
      height: 2px;
      background: #333;
      margin: 2px 0;
      border-radius: 1px;
      transition: all 0.3s ease;
    }

    body.dark-mode .hamburger-line {
      background: #e0e0e0;
    }

    .hamburger-btn.active .hamburger-line:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }

    .hamburger-btn.active .hamburger-line:nth-child(2) {
      opacity: 0;
    }

    .hamburger-btn.active .hamburger-line:nth-child(3) {
      transform: rotate(-45deg) translate(5px, -5px);
    }

    .menu-items {
      position: absolute;
      top: 50px;
      right: 0;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      width: 220px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      z-index: 99;
      overflow: hidden;
    }

    .profile-section {
      padding: 16px;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .profile-avatar {
      width: 60px;
      height: 35px;
      background: #007bff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 18px;
    }
/* üë§ Make the profile avatar perfectly round and centered */
.profile-avatar {
  width: 60px;                   /* slightly larger, balanced size */
  height: 35px;
  background: #007bff;           /* blue background */
  border-radius: 50%;            /* ensures a perfect circle */
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;              /* trims anything outside the circle */
  border: 2px solid #ffffff20;   /* subtle outer border for depth */
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.15); /* soft shadow */
}

/* Light Mode - White and Gold */
body:not(.dark-mode) .hide-notes-modal {
    background: #ffffff !important;
    border: 2px solid #F0A500 !important;
    color: #F0A500 !important;
}

body:not(.dark-mode) .hide-notes-modal h3 {
    color: #F0A500 !important;
    border-bottom: 2px solid #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes {
    background: #ffffff !important;
    color: #F0A500 !important;
    border: 1px solid #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes label {
    color: #F0A500 !important;
    border: 1px solid rgba(240, 165, 0, 0.3) !important;
}

body:not(.dark-mode) #noteCheckboxes label:hover {
    background: rgba(240, 165, 0, 0.1) !important;
    border-color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes strong {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes div {
    color: rgba(240, 165, 0, 0.8) !important;
}

body:not(.dark-mode) .modal-buttons {
    background: #ffffff !important;
    border-top: 1px solid #F0A500 !important;
}

body:not(.dark-mode) #cancelHide {
    background: #f8f9fa !important;
    color: #F0A500 !important;
    border: 1px solid #F0A500 !important;
}

body:not(.dark-mode) #cancelHide:hover {
    background: #e9ecef !important;
}

body:not(.dark-mode) #confirmHide {
    background: #F0A500 !important;
    color: #ffffff !important;
    border: 1px solid #F0A500 !important;
}

body:not(.dark-mode) #confirmHide:hover {
    background: #ffbf1a !important;
}

body:not(.dark-mode) .hide-notes-modal::-webkit-scrollbar-track {
    background: #ffffff !important;
}

body:not(.dark-mode) .hide-notes-modal::-webkit-scrollbar-thumb {
    background: #F0A500 !important;
    border: 2px solid #ffffff;
}

/* Dark Mode - Black and Gold */
body.dark-mode .hide-notes-modal {
    background: #1B1A17 !important;
    border: 2px solid #F0A500 !important;
    color: #F0A500 !important;
}

body.dark-mode .hide-notes-modal h3 {
    color: #F0A500 !important;
    border-bottom: 2px solid #F0A500 !important;
}

body.dark-mode #noteCheckboxes {
    background: #1B1A17 !important;
    color: #F0A500 !important;
    border: 1px solid #F0A500 !important;
}

body.dark-mode #noteCheckboxes label {
    color: #F0A500 !important;
    border: 1px solid rgba(240, 165, 0, 0.3) !important;
}

body.dark-mode #noteCheckboxes label:hover {
    background: rgba(240, 165, 0, 0.1) !important;
    border-color: #F0A500 !important;
}

body.dark-mode #noteCheckboxes strong {
    color: #F0A500 !important;
}

body.dark-mode #noteCheckboxes div {
    color: rgba(240, 165, 0, 0.8) !important;
}

body.dark-mode .modal-buttons {
    background: #1B1A17 !important;
    border-top: 1px solid #F0A500 !important;
}

body.dark-mode #cancelHide {
    background: #333 !important;
    color: #ffffff !important;
    border: 1px solid #F0A500 !important;
}

body.dark-mode #cancelHide:hover {
    background: #444 !important;
}

body.dark-mode #confirmHide {
    background: #F0A500 !important;
    color: #1B1A17 !important;
    border: 1px solid #F0A500 !important;
}

body.dark-mode #confirmHide:hover {
    background: #ffbf1a !important;
}

body.dark-mode .hide-notes-modal::-webkit-scrollbar-track {
    background: #1B1A17 !important;
}

body.dark-mode .hide-notes-modal::-webkit-scrollbar-thumb {
    background: #F0A500 !important;
    border: 2px solid #1B1A17;
}



/* Common Styles for Both Modes */
.hide-notes-modal {
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 0 20px rgba(240, 165, 0, 0.3) !important;
}

.hide-notes-modal h3 {
    margin-bottom: 20px;
    text-align: center;
    font-size: 1.5rem;
    padding-bottom: 10px;
}

#noteCheckboxes {
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
}

#noteCheckboxes label {
    display: block;
    margin: 12px 0;
    padding: 10px;
    border-radius: 6px;
    transition: all 0.3s ease;
    cursor: pointer;
}

#noteCheckboxes label:hover {
    transform: translateY(-2px);
}

#noteCheckboxes strong {
    font-size: 16px;
    display: block;
    margin-bottom: 5px;
}

#noteCheckboxes div {
    font-size: 12px;
    margin-left: 0;
}

#noteCheckboxes input[type="checkbox"] {
    accent-color: #F0A500 !important;
    transform: scale(1.3);
    margin-right: 12px;
}

.modal-buttons {
    padding-top: 20px;
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
    gap: 10px;
}

#cancelHide, #confirmHide {
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    flex: 1;
}

#confirmHide {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: bold;
}

#confirmHide:hover {
    box-shadow: 0 0 15px rgba(240, 165, 0, 0.4);
    transform: translateY(-2px);
}

.hide-notes-modal::-webkit-scrollbar {
    width: 8px;
}

.hide-notes-modal::-webkit-scrollbar-thumb {
    border-radius: 4px;
}

.hide-notes-modal::-webkit-scrollbar-thumb:hover {
    background: #ffbf1a !important;
}

#noteCheckboxes label:has(input[type="checkbox"]:checked) {
    background: rgba(240, 165, 0, 0.2) !important;
    border-color: #F0A500 !important;
    box-shadow: 0 0 10px rgba(240, 165, 0, 0.2);
}

#noteCheckboxes input[type="checkbox"]:focus {
    outline: 2px solid #F0A500 !important;
    outline-offset: 2px;
}

.hide-notes-modal h3::before {
    content: "üîí ";
    margin-right: 8px;
}
/* === HIDE NOTES MODAL THEME UPDATE - SAME AS DARK MODE === */

/* Light Mode - Same colors as dark mode */
body:not(.dark-mode) #noteCheckboxes {
    background: #1B1A17 !important;
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes label {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes strong {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes div {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes input[type="checkbox"] {
    accent-color: #F0A500 !important;
}

/* Make the modal title same as dark mode */
body:not(.dark-mode) .hide-notes-modal h3 {
    color: #F0A500 !important;
}

/* === HIDE NOTES MODAL THEME UPDATE - GOLD TEXT ONLY === */

/* Light Mode - White and Gold (Color Changes Only) */
body:not(.dark-mode) #noteCheckboxes {
    background: #ffffff !important;
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes label {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes strong {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes div {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes input[type="checkbox"] {
    accent-color: #F0A500 !important;
}

/* Make the modal title "Select Notes to Hide" gold */
body:not(.dark-mode) .hide-notes-modal h3 {
    color: #F0A500 !important;
}

/* === HIDE NOTES DROPDOWN THEME UPDATE - GOLD TEXT ONLY === */

/* Light Mode - White and Gold (Color Changes Only) */
body:not(.dark-mode) #noteCheckboxes {
    background: #ffffff !important;
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes label {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes strong {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes div {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes input[type="checkbox"] {
    accent-color: #F0A500 !important;
}

/* === PRINT NOTE DROPDOWN THEME UPDATE === */

/* Light Mode - White and Gold */
body:not(.dark-mode) #printSelectDropdown {
    background: #ffffff !important;
    color: #1B1A17 !important;
    border: 2px solid #F0A500 !important;
    box-shadow: 0 0 10px rgba(240, 165, 0, 0.2) !important;
}

body:not(.dark-mode) #printSelectDropdown option {
    background: #ffffff !important;
    color: #1B1A17 !important;
    padding: 10px 15px !important;
    border-bottom: 1px solid rgba(240, 165, 0, 0.2) !important;
}

body:not(.dark-mode) #printSelectDropdown option:hover {
    background: rgba(240, 165, 0, 0.1) !important;
    color: #1B1A17 !important;
}

/* Dark Mode - Black and Gold */
body.dark-mode #printSelectDropdown {
    background: #1B1A17 !important;
    color: #F0A500 !important;
    border: 2px solid #F0A500 !important;
    box-shadow: 0 0 10px rgba(240, 165, 0, 0.3) !important;
}

body.dark-mode #printSelectDropdown option {
    background: #1B1A17 !important;
    color: #F0A500 !important;
    padding: 10px 15px !important;
    border-bottom: 1px solid rgba(240, 165, 0, 0.3) !important;
}

body.dark-mode #printSelectDropdown option:hover {
    background: rgba(240, 165, 0, 0.2) !important;
    color: #1B1A17 !important;
}

/* Common dropdown styles */
#printSelectDropdown {
    width: 100% !important;
    padding: 12px 14px !important;
    border-radius: 10px !important;
    font-size: 16px !important;
    outline: none !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    font-family: inherit !important;
}

#printSelectDropdown:hover {
    border-color: #ffbe3c !important;
    box-shadow: 0 0 12px rgba(240, 165, 0, 0.4) !important;
}

#printSelectDropdown:focus {
    border-color: #F0A500 !important;
    box-shadow: 0 0 15px rgba(240, 165, 0, 0.5) !important;
}

/* Print Modal Background */
.print-modal-content {
    background: var(--bg-color) !important;
    border: 1px solid var(--border-color) !important;
    color: var(--text-color) !important;
}


/* Optional: Adjust icon inside */
.profile-avatar i {
  font-size: 20px;
  color: white;
  line-height: 1;                /* ensures icon stays vertically centered */
}

    .profile-info {
      flex: 1;
    }

    .profile-username {
      font-weight: 600;
      color: #333;
      font-size: 14px;
    }

    .profile-email {
      color: #666;
      font-size: 12px;
      margin-top: 2px;
    }

    body.dark-mode .menu-items {
      background: #2d2d2d;
    }

    body.dark-mode .profile-section {
      border-bottom: 1px solid #444;
    }

    body.dark-mode .profile-username {
      color: #e0e0e0;
    }

    body.dark-mode .profile-email {
      color: #ccc;
    }

    .menu-items.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .menu-item {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      cursor: pointer;
      border-bottom: 1px solid #f0f0f0;
      transition: all 0.2s ease;
    }

    body.dark-mode .menu-item {
      border-bottom: 1px solid #444;
    }

    .menu-item:last-child {
      border-bottom: none;
    }

    .menu-item:hover {
      background: #f8f9ff;
    }

    body.dark-mode .menu-item:hover {
      background: #3d3d3d;
    }

    .menu-item i {
      font-size: 16px;
      margin-right: 10px;
      width: 20px;
      text-align: center;
    }

    .menu-item span {
      font-weight: 500;
      color: #333;
    }

    body.dark-mode .menu-item span {
      color: #e0e0e0;
    }

    .export-pdf {
      color: #e74c3c;
    }

    .duplicate-note {
      color: #3498db;
    }

    .print-notes {
      color: #2ecc71;
    }

    .logout-menu {
      color: #e74c3c;
      border-top: 1px solid #f0f0f0;
    }

    body.dark-mode .logout-menu {
      border-top: 1px solid #444;
    }

    .edit-btn {
      background: #28a745;
      padding: 4px 8px;
      font-size: 12px;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .delete-btn {
      background: #dc3545;
      padding: 4px 8px;
      font-size: 12px;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .note-editor {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 60vw;                   /* wider view for full content */
  height: 80vh;                  /* tall enough to show almost full page */
  background: d1d5db; 
  display: none;
  z-index: 1000;
  border-radius: 12px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
  overflow-y: auto;              /* ‚úÖ enables vertical scrolling */
  overflow-x: hidden;            /* hides horizontal scroll if not needed */
  padding: 20px;                 /* spacing inside the editor */
}

.editor-content {
  width: 100%;
  height: 100vh;
  display: flex;
  flex-direction: column;
  padding: 10px;
  background: white;
}

    .editor-content textarea {
      height: 200px;
      resize: vertical;
    }

    .editor-options {
      display: flex;
      gap: 10px;
      margin: 10px 0;
      flex-wrap: wrap;
    }

    .option-btn {
      background: #f1f5f9;
      border: 1px solid #ddd;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
    }

    .option-btn:hover {
      background: #e2e8f0;
    }

    .file-input {
      display: none;
    }

    .attachments {
      margin-top: 10px;
    }

    .attachment-item {
      display: flex;
      align-items: center;
      padding: 8px;
      background: #f8f9fa;
      border-radius: 4px;
      margin-bottom: 5px;
      justify-content: space-between;
    }

    .attachment-info {
      display: flex;
      align-items: center;
    }

    .attachment-icon {
      margin-right: 10px;
      font-size: 16px;
    }

    .attachment-action {
      background: none;
      border: none;
      cursor: pointer;
      color: #666;
      padding: 4px;
      margin-left: 5px;
    }

    .attachment-action:hover {
      color: #007bff;
    }

    .image-preview {
      max-width: 100%;
      max-height: 150px;
      margin-top: 5px;
      border-radius: 4px;
    }

    .audio-player {
      width: 100%;
      margin-top: 5px;
    }

    .editor-footer {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid #eee;
    }

    .sharing-options {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 25px;
    }

    .share-btn {
      flex: 1;
      min-width: 150px;
      padding: 8px 15px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.3s ease;
    }

    .share-btn i {
      font-size: 18px;
    }

    .copy-link {
      background: #e3f2fd;
      color: #1565c0;
    }

    .copy-link:hover {
      background: #bbdefb;
    }

    .email-note {
      background: #fff3e0;
      color: #ef6c00;
    }

    .email-note:hover {
      background: #ffe0b2;
    }

    .download-note {
      background: #e8f5e9;
      color: #2e7d32;
    }

    .download-note:hover {
      background: #c8e6c9;
    }

    .status-message {
      margin-top: 15px;
      padding: 10px;
      border-radius: 5px;
      text-align: center;
      font-weight: 500;
      display: none;
    }

    .success {
      background: #e8f5e9;
      color: #2e7d32;
      display: block;
    }

    .error {
      background: #ffebee;
      color: #c62828;
      display: block;
    }

    /* Dark Mode */
    body.dark-mode {
      background: #1a1a1a;
      color: #313131;
    }

    body.dark-mode .app-container {
      background: #313131;
    }

    body.dark-mode .header {
      background: #2d2d2d;
      color: #ffffff;
    }

    body.dark-mode .header h1 {
      color: #959393;
    }

    body.dark-mode .note-item {
      background: #2d2d2d;
      border: 1px solid #444;
    }

    body.dark-mode .note-title {
      color: #a4a2a2;
    }

    body.dark-mode .note-content {
      color: #ccc;
    }

    body.dark-mode .editor-content {
      background: #2d2d2d;
      color: #e0e0e0;
    }

    body.dark-mode .editor-content input,
    body.dark-mode .editor-content textarea {
      background: #333;
      color: #000000;
      border: 1px solid #555;
    }

    body.dark-mode .note-controls input {
      background: #333;
      color: #e0e0e0;
      border: 1px solid #555;
    }

    body.dark-mode .option-btn {
      background: #444;
      color: #e0e0e0;
      border: 1px solid #555;
    }

    body.dark-mode .dropdown-content {
      background: #444;
      border: 1px solid #666;
    }

    body.dark-mode .font-option {
      color: #e0e0e0;
      border-bottom: 1px solid #555;
    }

    body.dark-mode .font-option:hover {
      background: #555;
    }

    body.dark-mode .font-sample {
      color: #ccc;
    }

    body.dark-mode .attachment-item {
      background: #333;
    }

    /* Template Selector */
.template-selector {
    position: relative;
}

.toolbar-button {
    background: #007bff;
    color: white;
    border: none;
    padding: 6px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 5px;
}

.toolbar-button:hover {
    background:#f0a500;
}

.template-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    background-color: rgb(209, 209, 209);
    border: 1px solid #e1e1e1;
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    width: 200px;
    max-height: 400px;
    overflow-y: auto;
    z-index: 100;
    display: none;
}

.template-dropdown.show {
    display: block;
}

.template-option {
    padding: 10px 16px;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
}

.template-option:hover {
    background-color: #f3f2f1;
}

.template-option:last-child {
    border-bottom: none;
}

/* Dark mode template styles */
    body.dark-mode .toolbar-button {
      background: #338feb;
      color: #e5e5e9;
      border: 1px solid #555;
    }

    body.dark-mode .toolbar-button:hover {
      background: #719ca8;
    }


    body.dark-mode .template-dropdown {
      background: #e9ebeb;
      border: 1px solid #555;
    }

    body.dark-mode .template-option {
      color: #182dba;
      border-bottom: 1px solid #555;
    }

    body.dark-mode .template-option:hover {
      background: #8dabd3;
    }

    /* Template Selector */
    .template-selector {
        position: relative;
    }

    .template-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        background-color: rgb(250, 250, 250);
        border: 1px solid #e1e1e1;
        border-radius: 4px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        width: 200px;
        max-height: 400px;
        overflow-y: auto;
        z-index: 100;
        display: none;
    }

    .template-dropdown.show {
        display: block;
    }

    .template-option {
        padding: 10px 16px;
        cursor: pointer;
        border-bottom: 1px solid #f0f0f0;
    }

    .template-option:hover {
        background-color: #ebe7e3;
    }

    .template-option:last-child {
        border-bottom: none;
    }

/* Template Modal */
.template-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    display: none;
}

.template-modal-content {
    background-color: white;
    border-radius: 8px;
    width: 80%;
    max-width: 900px;
    height: 80%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.template-modal-header {
    padding: 16px 24px;
    border-bottom: 1px solid #e1e1e1;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.template-modal-body {
    flex: 1;
    padding: 24px;
    overflow-y: auto;
}

.template-modal-footer {
    padding: 16px 24px;
    border-top: 1px solid #e1e1e1;
    display: flex;
    justify-content: flex-end;
    gap: 12px;
}

.btn {
    padding: 8px 16px;
    border-radius: 4px;
    border: none;
    cursor: pointer;
    font-weight: 600;
}

.btn-primary {
    background-color: #0078d7;
    color: white;
}

.btn-secondary {
    background-color: #f3f2f1;
    color: #323130;
}

.btn:hover {
    opacity: 0.9;
}

/* === BLACK & GOLD THEME OVERRIDE === */

:root {
  --black: #1B1A17;
  --gold: #F0A500;
}

/* SPLASH SCREEN */
.splash-screen {
  background: linear-gradient(to bottom right, var(--black), var(--black), var(--black)) !important;
}

.animated-orb.orb-1 {
  background: rgba(240, 165, 0, 0.2) !important;
}

.animated-orb.orb-2 {
  background: rgba(240, 165, 0, 0.15) !important;
}

.glow-ring {
  background: var(--gold) !important;
}

.app-name h1 {
  color: var(--gold) !important;
}

.divider {
  background: linear-gradient(to right, transparent, var(--gold), transparent) !important;
}

.dot {
  background: var(--gold) !important;
}

/* AUTH PAGES */
.auth-page {
  background: linear-gradient(to bottom right, var(--black), var(--black), var(--black)) !important;
}

.particle {
  background: rgba(240, 165, 0, 0.4) !important;
}

.auth-header h1 {
  color: var(--gold) !important;
}

.auth-header p {
  color: var(--gold) !important;
}

.auth-card {
  background: rgba(27, 26, 23, 0.8) !important;
  border: 1px solid var(--gold) !important;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 15px rgba(240, 165, 0, 0.1) !important;
}

.tabs {
  background: rgba(27, 26, 23, 0.5) !important;
  border: 1px solid var(--gold) !important;
}

.tab-button {
  color: var(--gold) !important;
}

.tab-button.active {
  background: var(--gold) !important;
  color: var(--black) !important;
}

.btn-primary {
  background: var(--gold) !important;
  color: var(--black) !important;
  box-shadow: 0 10px 15px -3px rgba(240, 165, 0, 0.3) !important;
}

.btn-primary:hover {
  background: #d19400 !important;
  box-shadow: 0 10px 15px -3px rgba(240, 165, 0, 0.5) !important;
}

/* PRINT SELECTOR MODAL */
.print-modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.print-modal-content {
    background: var(--black);
    border: 1px solid var(--gold);
    padding: 20px;
    border-radius: 10px;
    width: 350px;
    color: var(--gold);
    box-shadow: 0 0 15px rgba(240,165,0,0.3);
}

.print-modal-content h3 {
    margin-bottom: 15px;
}

#printSelectDropdown {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--gold);
    background: var(--black);
    color: var(--gold);
    border-radius: 5px;
    margin-bottom: 20px;
}

.print-modal-actions {
    display: flex;
    justify-content: space-between;
}

.btn-cancel,
.btn-confirm {
    padding: 10px 15px;
    border-radius: 6px;
    cursor: pointer;
    border: none;
    font-weight: 600;
}

.btn-cancel {
    background: #444;
    color: white;
}

.btn-confirm {
    background: var(--gold);
    color: var(--black);
    display: flex;
    align-items: center;
    gap: 6px;
}

.btn-confirm:hover {
    background: #d19400;
}


/* LOADING PAGE */
.loading-page {
  background: linear-gradient(135deg, var(--black) 0%, var(--black) 50%, var(--black) 100%) !important;
}

.loading-container {
  background: rgba(240, 165, 0, 0.05) !important;
  border: 1px solid var(--gold) !important;
}

.loading-container::before {
  background: radial-gradient(circle, rgba(240, 165, 0, 0.1) 0%, transparent 70%) !important;
}

.logo {
  box-shadow: 0 0 30px rgba(240, 165, 0, 0.3) !important;
  border: 2px solid var(--gold) !important;
}

.brand-name {
  background: linear-gradient(to right, var(--gold), var(--gold), var(--gold)) !important;
  -webkit-background-clip: text !important;
  background-clip: text !important;
  text-shadow: 0 0 20px rgba(240, 165, 0, 0.3) !important;
}

.loading-bar {
  background: linear-gradient(90deg, var(--gold), var(--gold), var(--gold)) !important;
  box-shadow: 0 0 10px rgba(240, 165, 0, 0.5) !important;
}

.percentage {
  color: var(--gold) !important;
}

.loading-text {
  color: var(--gold) !important;
}

.dot {
  background-color: var(--gold) !important;
}

.hint {
  color: var(--gold) !important;
}

.floating-element {
  background: rgba(240, 165, 0, 0.03) !important;
}

/* APP CONTAINER */
.app-container {
  background: var(--black) !important;
}

.header {
  background: var(--black) !important;
  color: var(--gold) !important;
}

.header h1 {
  color: var(--gold) !important;
}

.theme-toggle {
  background: var(--gold) !important;
  color: var(--black) !important;
}

.datetime-display {
  background: rgba(240, 165, 0, 0.05) !important;
  color: var(--gold) !important;
  border-bottom: 1px solid var(--gold) !important;
}

.note-container {
  background: var(--black) !important;
  border: 1px solid var(--gold) !important;
  box-shadow: 0 0 20px rgba(240, 165, 0, 0.15) !important;
}

.small-btn {
  background: var(--gold) !important;
  color: var(--black) !important;
}

.note-item {
  background: var(--black) !important;
  border: 1px solid var(--gold) !important;
}

.note-title {
  color: var(--gold) !important;
}

.note-content {
  color: var(--gold) !important;
}

/* EDITOR */
.note-editor {
  background: var(--black) !important;
  border: 1px solid var(--gold) !important;
}

.editor-content {
  background: var(--black) !important;
  color: var(--gold) !important;
}

#noteTitle, #Tag {
  background: var(--black) !important;
  color: var(--gold) !important;
  border: 1px solid var(--gold) !important;
}

#noteContent {
  background: var(--black) !important;
  color: var(--gold) !important;
  border: 1px solid var(--gold) !important;
}

.option-btn {
  background: var(--black) !important;
  color: var(--gold) !important;
  border: 1px solid var(--gold) !important;
}

.style-button {
  background: var(--gold) !important;
  color: var(--black) !important;
}

.dropdown-content {
  background: var(--black) !important;
  border: 1px solid var(--gold) !important;
}

.font-option {
  color: var(--gold) !important;
  border-bottom: 1px solid var(--gold) !important;
}

/* MENU */
.menu-items {
  background: var(--black) !important;
  border: 1px solid var(--gold) !important;
}

.profile-section {
  border-bottom: 1px solid var(--gold) !important;
}

.profile-username {
  color: var(--gold) !important;
}

.profile-email {
  color: var(--gold) !important;
}

.menu-item {
  border-bottom: 1px solid var(--gold) !important;
  color: var(--gold) !important;
}

.menu-item span {
  color: var(--gold) !important;
}

/* INPUTS */
input, textarea {
  background: var(--black) !important;
  color: var(--gold) !important;
  border: 1px solid var(--gold) !important;
}

input::placeholder, textarea::placeholder {
  color: var(--gold) !important;
}

/* BUTTONS */
button {
  background: var(--gold) !important;
  color: var(--black) !important;
}

/* ICONS */
i, svg, .input-icon {
  color: var(--gold) !important;
}

/* === BLACK & GOLD THEME WITH LIGHT/DARK MODE === */

:root {
  --black: #1B1A17;
  --gold: #F0A500;
  --light-bg: #f5f5f5;
  --light-text: #333;
  --dark-bg: #1B1A17;
  --dark-text: #F0A500;
}

/* Light Mode */
body:not(.dark-mode) {
  --bg-color: var(--light-bg);
  --text-color: var(--light-text);
  --primary-color: var(--gold);
  --primary-text: var(--black);
  --border-color: var(--gold);
}

/* Dark Mode */
body.dark-mode {
  --bg-color: var(--dark-bg);
  --text-color: var(--dark-text);
  --primary-color: var(--gold);
  --primary-text: var(--black);
  --border-color: var(--gold);
}

/* Apply theme variables */
body {
  background-color: var(--bg-color) !important;
  color: var(--text-color) !important;
}

/* SPLASH SCREEN */
.splash-screen {
  background: linear-gradient(to bottom right, var(--black), var(--black), var(--black)) !important;
}

.animated-orb.orb-1 {
  background: rgba(240, 165, 0, 0.2) !important;
}

.animated-orb.orb-2 {
  background: rgba(240, 165, 0, 0.15) !important;
}

.glow-ring {
  background: var(--gold) !important;
}

.app-name h1 {
  color: var(--gold) !important;
}

.divider {
  background: linear-gradient(to right, transparent, var(--gold), transparent) !important;
}

.dot {
  background: var(--gold) !important;
}

/* AUTH PAGES */
.auth-page {
  background: linear-gradient(to bottom right, var(--black), var(--black), var(--black)) !important;
}

.particle {
  background: rgba(240, 165, 0, 0.4) !important;
}

.auth-header h1 {
  color: var(--gold) !important;
}

.auth-header p {
  color: var(--gold) !important;
}

.auth-card {
  background: rgba(27, 26, 23, 0.8) !important;
  border: 1px solid var(--gold) !important;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 15px rgba(240, 165, 0, 0.1) !important;
}

.tabs {
  background: rgba(27, 26, 23, 0.5) !important;
  border: 1px solid var(--gold) !important;
}

.tab-button {
  color: var(--gold) !important;
}

.tab-button.active {
  background: var(--gold) !important;
  color: var(--black) !important;
}

.btn-primary {
  background: var(--gold) !important;
  color: var(--black) !important;
  box-shadow: 0 10px 15px -3px rgba(240, 165, 0, 0.3) !important;
}

.btn-primary:hover {
  background: #d19400 !important;
  box-shadow: 0 10px 15px -3px rgba(240, 165, 0, 0.5) !important;
}

/* LOADING PAGE */
.loading-page {
  background: linear-gradient(135deg, var(--black) 0%, var(--black) 50%, var(--black) 100%) !important;
}

.loading-container {
  background: rgba(240, 165, 0, 0.05) !important;
  border: 1px solid var(--gold) !important;
}

.loading-container::before {
  background: radial-gradient(circle, rgba(240, 165, 0, 0.1) 0%, transparent 70%) !important;
}

.logo {
  box-shadow: 0 0 30px rgba(240, 165, 0, 0.3) !important;
  border: 2px solid var(--gold) !important;
}

.brand-name {
  background: linear-gradient(to right, var(--gold), var(--gold), var(--gold)) !important;
  -webkit-background-clip: text !important;
  background-clip: text !important;
  text-shadow: 0 0 20px rgba(240, 165, 0, 0.3) !important;
}

.loading-bar {
  background: linear-gradient(90deg, var(--gold), var(--gold), var(--gold)) !important;
  box-shadow: 0 0 10px rgba(240, 165, 0, 0.5) !important;
}

.percentage {
  color: var(--gold) !important;
}

.loading-text {
  color: var(--gold) !important;
}

.dot {
  background-color: var(--gold) !important;
}

.hint {
  color: var(--gold) !important;
}

.floating-element {
  background: rgba(240, 165, 0, 0.03) !important;
}

/* APP CONTAINER */
.app-container {
  background: var(--bg-color) !important;
}

.header {
  background: var(--bg-color) !important;
  color: var(--text-color) !important;
}

.header h1 {
  color: var(--text-color) !important;
}

.theme-toggle {
  background: var(--primary-color) !important;
  color: var(--primary-text) !important;
}

.datetime-display {
  background: rgba(240, 165, 0, 0.05) !important;
  color: var(--text-color) !important;
  border-bottom: 1px solid var(--border-color) !important;
}

.note-container {
  background: var(--bg-color) !important;
  border: 1px solid var(--border-color) !important;
  box-shadow: 0 0 20px rgba(240, 165, 0, 0.15) !important;
}

.small-btn {
  background: var(--primary-color) !important;
  color: var(--primary-text) !important;
}

.note-item {
  background: var(--bg-color) !important;
  border: 1px solid var(--border-color) !important;
}

.note-title {
  color: var(--text-color) !important;
}

.note-content {
  color: var(--text-color) !important;
}

/* EDITOR */
.note-editor {
  background: var(--bg-color) !important;
  border: 1px solid var(--border-color) !important;
}

.editor-content {
  background: var(--bg-color) !important;
  color: var(--text-color) !important;
}

#noteTitle, #Tag {
  background: var(--bg-color) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--border-color) !important;
}

#noteContent {
  background: var(--bg-color) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--border-color) !important;
}

.option-btn {
  background: var(--bg-color) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--border-color) !important;
}

.style-button {
  background: var(--primary-color) !important;
  color: var(--primary-text) !important;
}

.dropdown-content {
  background: var(--bg-color) !important;
  border: 1px solid var(--border-color) !important;
}

.font-option {
  color: var(--text-color) !important;
  border-bottom: 1px solid var(--border-color) !important;
}

/* MENU */
.menu-items {
  background: var(--bg-color) !important;
  border: 1px solid var(--border-color) !important;
}

.profile-section {
  border-bottom: 1px solid var(--border-color) !important;
}

.profile-username {
  color: var(--text-color) !important;
}

.profile-email {
  color: var(--text-color) !important;
}

.menu-item {
  border-bottom: 1px solid var(--border-color) !important;
  color: var(--text-color) !important;
}

.menu-item span {
  color: var(--text-color) !important;
}

/* INPUTS */
input, textarea {
  background: var(--bg-color) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--border-color) !important;
}

input::placeholder, textarea::placeholder {
  color: var(--text-color) !important;
  opacity: 0.7;
}

/* BUTTONS */
button {
  background: var(--primary-color) !important;
  color: var(--primary-text) !important;
}

/* ICONS */
i, svg, .input-icon {
  color: var(--text-color) !important;
}

/* Ensure gold accents in both modes */
body:not(.dark-mode) .gold-accent,
body.dark-mode .gold-accent {
  color: var(--gold) !important;
  border-color: var(--gold) !important;
  background: var(--gold) !important;
}

/* Black‚ÄìGold Styled Dropdown */
.hide-dropdown {
    width: 100%;
    padding: 12px 14px;
    background: #1B1A17;                /* Black background */
    color: #F0A500;                     /* Gold text */
    border: 2px solid #F0A500;          /* Gold border */
    border-radius: 10px;
    font-size: 16px;
    outline: none;
    cursor: pointer;
    transition: 0.3s ease;
}

/* Hover effect */
.hide-dropdown:hover {
    border-color: #ffbe3c;              /* Soft gold glow */
    box-shadow: 0 0 12px rgba(240,165,0,0.4);
}

/* Dropdown options */
.hide-dropdown option {
    background: #1B1A17;                /* Same black background */
    color: #F0A500;                     /* Gold text */
}

/* Print Notes Dropdown - Black & Gold Theme */
.print-dropdown {
    width: 100%;
    padding: 12px 14px;
    background: #1B1A17;                /* Black */
    color: #F0A500;                     /* Gold Text */
    border: 2px solid #F0A500;          /* Gold Border */
    border-radius: 10px;
    font-size: 16px;
    outline: none;
    cursor: pointer;
    transition: 0.3s ease;
}

/* Hover effect for dropdown */
.print-dropdown:hover {
    border-color: #ffbe3c;              /* Soft gold glow */
    box-shadow: 0 0 12px rgba(240,165,0,0.4);
}

/* Dropdown list items */
.print-dropdown option {
    background: #1B1A17;                /* Black background for items */
    color: #F0A500;                     /* Gold text */
}


/* === FIXES FOR AUTH PAGES === */

/* Separate Sign In and Register buttons */
.tabs {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  background: rgba(27, 26, 23, 0.5) !important;
  border: 1px solid var(--gold) !important;
  padding: 0.25rem;
  border-radius: 0.5rem;
  margin: 1.5rem;
  margin-bottom: 0;
  gap: 0.25rem;
}

.tab-button {
  background: transparent !important;
  border: none;
  padding: 0.625rem 1rem;
  color: var(--gold) !important;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  border-radius: 0.375rem;
  transition: all 0.2s ease;
}

.tab-button:hover {
  background: rgba(240, 165, 0, 0.1) !important;
  color: var(--gold) !important;
}

.tab-button.active {
  background: var(--gold) !important;
  color: var(--black) !important;
}

/* Make password eye icon visible */
.password-toggle {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--gold) !important;
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
  transition: color 0.2s ease;
  z-index: 10;
}

.password-toggle:hover {
  color: #ffbf1a !important;
}

.password-toggle svg {
  color: var(--gold) !important;
  stroke: var(--gold) !important;
}

/* Visual feedback for text selection */
#noteContent::selection {
  background: rgba(240, 165, 0, 0.3) !important;
}

#noteContent::-moz-selection {
  background: rgba(240, 165, 0, 0.3) !important;
}

/* Highlight selected font option */
.font-option.selected {
  background-color: #f0a500 !important;
  color: #1b1a17 !important;
  font-weight: bold;
}

/* Email and Password text in gold */
.form-group label {
  color: var(--gold) !important;
  font-size: 0.875rem;
  font-weight: 500;
}

.input-icon {
  color: var(--gold) !important;
}

/* === PIN MODAL THEME - WHITE & GOLD FOR LIGHT MODE === */

/* Light Mode - White and Gold */
body:not(.dark-mode) .pin-modal-content {
    background: #ffffff !important;
    border: 2px solid #F0A500 !important;
    color: #F0A500 !important;
    box-shadow: 0 0 25px rgba(240, 165, 0, 0.3) !important;
}

body:not(.dark-mode) .pin-modal-content h2 {
    color: #F0A500 !important;
}

body:not(.dark-mode) .otpBox {
    background: #ffffff !important;
    color: #F0A500 !important;
    border: 2px solid #F0A500 !important;
}

body:not(.dark-mode) #togglePin {
    color: #F0A500 !important;
}

body:not(.dark-mode) #forgotPinBtn {
    color: #F0A500 !important;
}

body:not(.dark-mode) #cancelPin {
    background: #f8f9fa !important;
    color: #F0A500 !important;
    border: 1px solid #F0A500 !important;
}

body:not(.dark-mode) #cancelPin:hover {
    background: #e9ecef !important;
}

body:not(.dark-mode) #confirmPin {
    background: #F0A500 !important;
    color: #ffffff !important;
    border: 1px solid #F0A500 !important;
}

body:not(.dark-mode) #confirmPin:hover {
    background: #ffbf1a !important;
}

/* Dark Mode - Black and Gold (Keep existing) */
body.dark-mode .pin-modal-content {
    background: #1B1A17 !important;
    border: 2px solid #F0A500 !important;
    color: #F0A500 !important;
    box-shadow: 0 0 25px rgba(240, 165, 0, 0.3) !important;
}

body.dark-mode .pin-modal-content h2 {
    color: #F0A500 !important;
}

body.dark-mode .otpBox {
    background: #000000 !important;
    color: #F0A500 !important;
    border: 2px solid #F0A500 !important;
}

body.dark-mode #togglePin {
    color: #F0A500 !important;
}

body.dark-mode #forgotPinBtn {
    color: #F0A500 !important;
}

body.dark-mode #cancelPin {
    background: #444 !important;
    color: #ffffff !important;
    border: 1px solid #F0A500 !important;
}

body.dark-mode #cancelPin:hover {
    background: #555 !important;
}

body.dark-mode #confirmPin {
    background: #F0A500 !important;
    color: #1B1A17 !important;
    border: 1px solid #F0A500 !important;
}

body.dark-mode #confirmPin:hover {
    background: #ffbf1a !important;
}

/* Common styles for both modes */
.pin-modal-content {
    padding: 30px;
    border-radius: 12px;
    text-align: center;
    width: 330px;
    box-shadow: 0 0 25px rgba(240, 165, 0, 0.3);
    animation: fadeIn 0.2s ease;
}

.pin-modal-content h2 {
    margin: 0 0 15px 0;
}

.otpBox {
    width: 55px;
    height: 55px;
    border-radius: 8px;
    font-size: 26px;
    text-align: center;
    outline: none;
}

#togglePin {
    cursor: pointer;
    font-size: 20px;
    margin-top: 10px;
    display: inline-block;
}

#forgotPinBtn {
    margin-top: 12px;
    cursor: pointer;
    text-decoration: underline;
    display: block;
}

.pin-modal-actions {
    margin-top: 20px;
    display: flex;
    gap: 10px;
    justify-content: center;
}

#cancelPin, #confirmPin {
    padding: 8px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
}

#confirmPin {
    font-weight: bold;
}

.shake {
    animation: shake 0.3s ease;
}

@keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-6px); }
    50% { transform: translateX(6px); }
    75% { transform: translateX(-6px); }
    100% { transform: translateX(0); }
}

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
}
/* === HIDE NOTES MODAL TITLE - GOLD IN LIGHT MODE === */

/* Light Mode - Make title gold */
body:not(.dark-mode) .hide-notes-modal h3 {
    color: #F0A500 !important;
}

/* Light Mode - Ensure all text in the modal is gold */
body:not(.dark-mode) .hide-notes-modal,
body:not(.dark-mode) .hide-notes-modal * {
    color: #F0A500 !important;
}

/* Light Mode - Specific elements that might need override */
body:not(.dark-mode) #noteCheckboxes label {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes strong {
    color: #F0A500 !important;
}

body:not(.dark-mode) #noteCheckboxes div {
    color: #F0A500 !important;
}

/* Light Mode - Buttons */
body:not(.dark-mode) #cancelHide {
    background: #ffffff !important;
    color: #F0A500 !important;
    border: 1px solid #F0A500 !important;
}

body:not(.dark-mode) #cancelHide:hover {
    background: rgba(240, 165, 0, 0.1) !important;
}

body:not(.dark-mode) #confirmHide {
    background: #F0A500 !important;
    color: #ffffff !important;
    border: 1px solid #F0A500 !important;
}

body:not(.dark-mode) #confirmHide:hover {
    background: #ffbf1a !important;
}

/* Dark Mode - Keep existing black and gold theme */
body.dark-mode .hide-notes-modal h3 {
    color: #F0A500 !important;
}
/* Force the title to be gold in light mode */
body:not(.dark-mode) .hide-notes-modal h3 {
    color: #F0A500 !important;
    background: linear-gradient(to right, #F0A500, #F0A500) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    text-shadow: 0 0 10px rgba(240, 165, 0, 0.3) !important;
}

/* === HIDE NOTES MODAL - BLACK & GOLD THEME FOR DARK MODE === */

/* Dark Mode - Black and Gold */
body.dark-mode .hide-notes-modal {
    background: #1B1A17 !important;
    border: 2px solid #F0A500 !important;
    color: #F0A500 !important;
    box-shadow: 0 0 20px rgba(240, 165, 0, 0.3) !important;
}

body.dark-mode .hide-notes-modal h3 {
    color: #F0A500 !important;
    border-bottom: 2px solid #F0A500 !important;
}

body.dark-mode #noteCheckboxes {
    background: #1B1A17 !important;
    color: #F0A500 !important;
    border: 1px solid #F0A500 !important;
}

body.dark-mode #noteCheckboxes label {
    color: #F0A500 !important;
    border: 1px solid rgba(240, 165, 0, 0.3) !important;
}

body.dark-mode #noteCheckboxes label:hover {
    background: rgba(240, 165, 0, 0.1) !important;
    border-color: #F0A500 !important;
}

body.dark-mode #noteCheckboxes strong {
    color: #F0A500 !important;
}

body.dark-mode #noteCheckboxes div {
    color: rgba(240, 165, 0, 0.8) !important;
}

body.dark-mode .modal-buttons {
    background: #1B1A17 !important;
    border-top: 1px solid #F0A500 !important;
}

body.dark-mode #cancelHide {
    background: #333 !important;
    color: #ffffff !important;
    border: 1px solid #F0A500 !important;
}

body.dark-mode #cancelHide:hover {
    background: #444 !important;
}

body.dark-mode #confirmHide {
    background: #F0A500 !important;
    color: #1B1A17 !important;
    border: 1px solid #F0A500 !important;
}

body.dark-mode #confirmHide:hover {
    background: #ffbf1a !important;
}

body.dark-mode .hide-notes-modal::-webkit-scrollbar-track {
    background: #1B1A17 !important;
}

body.dark-mode .hide-notes-modal::-webkit-scrollbar-thumb {
    background: #F0A500 !important;
    border: 2px solid #1B1A17;
}

/* === HIDE NOTES MODAL - BLACK & GOLD THEME FOR DARK MODE === */

/* Dark Mode - Black and Gold */
body.dark-mode .hide-notes-modal {
    background: #1B1A17 !important;
    border: 2px solid #F0A500 !important;
    color: #F0A500 !important;
    box-shadow: 0 0 20px rgba(240, 165, 0, 0.3) !important;
}

body.dark-mode .hide-notes-modal h3 {
    color: #F0A500 !important;
    border-bottom: 2px solid #F0A500 !important;
}

body.dark-mode .hide-notes-modal #noteCheckboxes {
    background: #1B1A17 !important;
    color: #F0A500 !important;
    border: 1px solid #F0A500 !important;
}

body.dark-mode .hide-notes-modal #noteCheckboxes label {
    color: #F0A500 !important;
    border: 1px solid rgba(240, 165, 0, 0.3) !important;
    background: #1B1A17 !important;
}

body.dark-mode .hide-notes-modal #noteCheckboxes label:hover {
    background: rgba(240, 165, 0, 0.1) !important;
    border-color: #F0A500 !important;
}

body.dark-mode .hide-notes-modal #noteCheckboxes strong {
    color: #F0A500 !important;
}

body.dark-mode .hide-notes-modal #noteCheckboxes div {
    color: rgba(240, 165, 0, 0.8) !important;
}

body.dark-mode .hide-notes-modal .modal-buttons {
    background: #1B1A17 !important;
    border-top: 1px solid #F0A500 !important;
}

body.dark-mode .hide-notes-modal #cancelHide {
    background: #333 !important;
    color: #F0A500 !important;
    border: 1px solid #F0A500 !important;
}

body.dark-mode .hide-notes-modal #cancelHide:hover {
    background: #444 !important;
    box-shadow: 0 0 10px rgba(240, 165, 0, 0.3);
}

body.dark-mode .hide-notes-modal #confirmHide {
    background: #F0A500 !important;
    color: #1B1A17 !important;
    border: 1px solid #F0A500 !important;
    box-shadow: 0 0 15px rgba(240, 165, 0, 0.4);
}

body.dark-mode .hide-notes-modal #confirmHide:hover {
    background: #ffbf1a !important;
    box-shadow: 0 0 20px rgba(240, 165, 0, 0.6);
    transform: translateY(-2px);
}

/* Common Styles for Both Modes */
.hide-notes-modal {
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 0 20px rgba(240, 165, 0, 0.3) !important;
}

.hide-notes-modal h3 {
    margin-bottom: 20px;
    text-align: center;
    font-size: 1.5rem;
    padding-bottom: 10px;
}

#noteCheckboxes {
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
}

#noteCheckboxes label {
    display: block;
    margin: 12px 0;
    padding: 10px;
    border-radius: 6px;
    transition: all 0.3s ease;
    cursor: pointer;
}

#noteCheckboxes label:hover {
    transform: translateY(-2px);
}

#noteCheckboxes strong {
    font-size: 16px;
    display: block;
    margin-bottom: 5px;
}

#noteCheckboxes div {
    font-size: 12px;
    margin-left: 0;
}

#noteCheckboxes input[type="checkbox"] {
    accent-color: #F0A500 !important;
    transform: scale(1.3);
    margin-right: 12px;
}

.modal-buttons {
    padding-top: 20px;
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
    gap: 10px;
}

#cancelHide, #confirmHide {
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    flex: 1;
}

#confirmHide {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: bold;
}

#confirmHide:hover {
    box-shadow: 0 0 15px rgba(240, 165, 0, 0.4);
    transform: translateY(-2px);
}

.hide-notes-modal::-webkit-scrollbar {
    width: 8px;
}

.hide-notes-modal::-webkit-scrollbar-thumb {
    border-radius: 4px;
}

.hide-notes-modal::-webkit-scrollbar-thumb:hover {
    background: #ffbf1a !important;
}

#noteCheckboxes label:has(input[type="checkbox"]:checked) {
    background: rgba(240, 165, 0, 0.2) !important;
    border-color: #F0A500 !important;
    box-shadow: 0 0 10px rgba(240, 165, 0, 0.2);
}

#noteCheckboxes input[type="checkbox"]:focus {
    outline: 2px solid #F0A500 !important;
    outline-offset: 2px;
}

.hide-notes-modal h3::before {
    content: "üîí ";
    margin-right: 8px;
}

/* Hide Notes Modal - Dark Mode Only */
body.dark-mode .hide-notes-modal-content {
    background: #1B1A17 !important;
    border: 2px solid #F0A500 !important;
    color: #F0A500 !important;
    padding: 30px;
    border-radius: 12px;
    max-width: 500px;
    width: 90%;
    max-height: 70vh;
    overflow-y: auto;
    box-shadow: 0 0 30px rgba(240, 165, 0, 0.5) !important;
}

body.dark-mode .hide-notes-modal-content h3 {
    color: #F0A500 !important;
    border-bottom: 2px solid #F0A500 !important;
    padding-bottom: 10px;
    margin-bottom: 20px;
    text-align: center;
}

body.dark-mode .hide-notes-modal-content #noteCheckboxes {
    background: #1B1A17 !important;
    border: 1px solid #F0A500 !important;
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
}

body.dark-mode .hide-notes-modal-content #noteCheckboxes label {
    display: block;
    margin: 12px 0;
    padding: 10px;
    border: 1px solid rgba(240, 165, 0, 0.3) !important;
    border-radius: 6px;
    cursor: pointer;
    color: #F0A500 !important;
    background: #1B1A17 !important;
    transition: all 0.3s ease;
}

body.dark-mode .hide-notes-modal-content #noteCheckboxes label:hover {
    background: rgba(240, 165, 0, 0.1) !important;
    border-color: #F0A500 !important;
}

body.dark-mode .hide-notes-modal-content #noteCheckboxes strong {
    color: #F0A500 !important;
    font-size: 16px;
    display: block;
    margin-bottom: 5px;
}

body.dark-mode .hide-notes-modal-content #noteCheckboxes div {
    color: rgba(240, 165, 0, 0.8) !important;
    font-size: 12px;
    margin-left: 0;
}

body.dark-mode .hide-notes-modal-content #noteCheckboxes input[type="checkbox"] {
    accent-color: #F0A500 !important;
    transform: scale(1.3);
    margin-right: 12px;
}

body.dark-mode .hide-notes-modal-content .modal-buttons {
    background: #1B1A17 !important;
    border-top: 1px solid #F0A500 !important;
    padding-top: 20px;
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
    gap: 10px;
}

body.dark-mode .hide-notes-modal-content #cancelHide {
    background: #333 !important;
    color: #ffffff !important;
    border: 1px solid #F0A500 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    flex: 1;
}

body.dark-mode .hide-notes-modal-content #cancelHide:hover {
    background: #444 !important;
}

body.dark-mode .hide-notes-modal-content #confirmHide {
    background: #F0A500 !important;
    color: #1B1A17 !important;
    border: 1px solid #F0A500 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s ease;
    flex: 1;
}

body.dark-mode .hide-notes-modal-content #confirmHide:hover {
    background: #ffbf1a !important;
}

/* Light mode will use default styles */
body:not(.dark-mode) .hide-notes-modal-content {
    background: white;
    padding: 30px;
    border-radius: 10px;
    max-width: 500px;
    width: 90%;
    max-height: 70vh;
    overflow-y: auto;
}

/* Input fields styling */
input[type="email"],
input[type="password"],
input[type="text"] {
  width: 100%;
  padding: 0.625rem 0.75rem 0.625rem 2.5rem;
  background: rgba(27, 26, 23, 0.5) !important;
  border: 1px solid var(--gold) !important;
  border-radius: 0.375rem;
  color: var(--gold) !important;
  font-size: 0.875rem;
  transition: all 0.2s ease;
  box-sizing: border-box;
}

input[type="email"]:focus,
input[type="password"]:focus,
input[type="text"]:focus {
  outline: none;
  border-color: var(--gold) !important;
  box-shadow: 0 0 0 3px rgba(240, 165, 0, 0.1) !important;
}

input::placeholder {
  color: rgba(240, 165, 0, 0.6) !important;
}

/* Ensure input wrapper has proper positioning */
.input-wrapper {
  position: relative;
}

/* Fix for password toggle visibility */
.input-wrapper .password-toggle {
  opacity: 1 !important;
  visibility: visible !important;
}

/* Error and success messages */
.error-message {
  color: #ff6b6b !important;
  font-size: 0.875rem;
  margin-top: 0.5rem;
  display: none;
}

.success-message {
  color: #51cf66 !important;
  font-size: 0.875rem;
  margin-top: 0.5rem;
  display: none;
}
/* === PASSWORD EYE ICON VISIBILITY FIX === */

/* Password toggle button styling */
.password-toggle {
  position: absolute !important;
  right: 0.75rem !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  background: transparent !important;
  border: none !important;
  color: var(--gold) !important;
  cursor: pointer !important;
  padding: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 20px !important;
  height: 20px !important;
  opacity: 1 !important;
  visibility: visible !important;
  z-index: 100 !important;
}

.password-toggle:hover {
  color: #ffbf1a !important;
  background: transparent !important;
}

.password-toggle svg {
  width: 20px !important;
  height: 20px !important;
  color: var(--gold) !important;
  stroke: var(--gold) !important;
  fill: none !important;
  display: block !important;
}

/* Ensure input wrapper has enough padding for the eye icon */
.input-wrapper {
  position: relative !important;
}

.input-wrapper input[type="password"],
.input-wrapper input[type="text"] {
  padding-right: 3rem !important; /* Make space for the eye icon */
}

/* Specific fixes for both forms */
#loginForm .password-toggle,
#registerForm .password-toggle {
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Make sure the eye icon stays on top */
.input-wrapper .password-toggle {
  z-index: 1000 !important;
}

/* Fix for any potential hiding */
.password-toggle[style*="display: none"] {
  display: flex !important;
}

.password-toggle[style*="visibility: hidden"] {
  visibility: visible !important;
}

.password-toggle[style*="opacity: 0"] {
  opacity: 1 !important;
}

/* === SEARCH BAR WHITE IN LIGHT MODE === */

/* Light mode - white search bar */
body:not(.dark-mode) #searchInput {
  background: white !important;
  color: #333 !important;
  border: 1px solid #ccc !important;
}

body:not(.dark-mode) #searchInput::placeholder {
  color: #666 !important;
}

/* Dark mode - keep the existing black and gold theme */
body.dark-mode #searchInput {
  background: var(--bg-color) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--border-color) !important;
}

body.dark-mode #searchInput::placeholder {
  color: var(--text-color) !important;
  opacity: 0.7;
}

/* === SEARCH BAR GOLD OUTLINE === */

/* Light mode - white search bar with gold outline */
body:not(.dark-mode) #searchInput {
  background: white !important;
  color: #333 !important;
  border: 1px solid var(--gold) !important;
}

body:not(.dark-mode) #searchInput::placeholder {
  color: #666 !important;
}

body:not(.dark-mode) #searchInput:focus {
  outline: none !important;
  border-color: var(--gold) !important;
  box-shadow: 0 0 0 2px rgba(240, 165, 0, 0.1) !important;
}

/* Dark mode - black background with gold outline */
body.dark-mode #searchInput {
  background: var(--bg-color) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--gold) !important;
}

body.dark-mode #searchInput::placeholder {
  color: var(--text-color) !important;
  opacity: 0.7;
}

body.dark-mode #searchInput:focus {
  outline: none !important;
  border-color: var(--gold) !important;
  box-shadow: 0 0 0 2px rgba(240, 165, 0, 0.1) !important;
}

/* === SEARCH BAR MATCHING APP CONTAINER COLOR === */

/* Light mode - match app container background (light) */
body:not(.dark-mode) #searchInput {
  background: var(--light-bg) !important;
  color: var(--light-text) !important;
  border: 1px solid var(--gold) !important;
}

body:not(.dark-mode) #searchInput::placeholder {
  color: var(--light-text) !important;
  opacity: 0.7;
}

/* Dark mode - match app container background (dark) */
body.dark-mode #searchInput {
  background: var(--dark-bg) !important;
  color: var(--dark-text) !important;
  border: 1px solid var(--gold) !important;
}

body.dark-mode #searchInput::placeholder {
  color: var(--dark-text) !important;
  opacity: 0.7;
}

/* Focus state for both modes */
#searchInput:focus {
  outline: none !important;
  border-color: var(--gold) !important;
  box-shadow: 0 0 0 2px rgba(240, 165, 0, 0.1) !important;
}

/* === GOLD TITLE FOR ETHERX ONENOTE === */

/* Make the main title gold in both light and dark modes */
.header h1 {
  color: var(--gold) !important;
}

/* Ensure no other changes to the header */
.header {
  /* Keep all existing header styles */
  background: var(--bg-color) !important;
  /* Other header properties remain unchanged */
}

/* === LOADING PAGE LOGO UPDATE === */

/* Update loading page logo to match auth pages */
.loading-container .logo img {
  content: url('exlogo.png') !important;
  filter: none !important; /* Remove the white filter */
}

/* Ensure the logo displays properly on error */
.loading-container .logo img[onerror] {
  filter: none !important;
}

/* Change note content container to match theme */
#noteContent {
  background: #1B1A17 !important; /* Your exact black color */
  color: #F0A500 !important; /* Your exact gold color */
  border: 1px solid #F0A500 !important; /* Gold border */
}

/* Placeholder text in gold */
#noteContent::placeholder {
  color: #F0A500 !important;
  opacity: 0.7;
}

/* Focus state */
#noteContent:focus {
  outline: 2px solid #F0A500 !important;
  background: #1B1A17 !important;
}

/* Text selection */
#noteContent ::selection {
  background: #F0A500 !important;
  color: #1B1A17 !important;
}

#noteContent ::-moz-selection {
  background: #F0A500 !important;
  color: #1B1A17 !important;
}

/* Dark mode - black and gold theme */
body.dark-mode #noteContent {
  background: #1B1A17 !important; /* Your exact black color */
  color: #F0A500 !important; /* Your exact gold color */
  border: 1px solid #F0A500 !important; /* Gold border */
}

/* Dark mode placeholder text in gold */
body.dark-mode #noteContent::placeholder {
  color: #F0A500 !important;
  opacity: 0.7;
}

/* Dark mode focus state */
body.dark-mode #noteContent:focus {
  outline: 2px solid #F0A500 !important;
  background: #1B1A17 !important;
}

/* Dark mode text selection */
body.dark-mode #noteContent ::selection {
  background: #F0A500 !important;
  color: #1B1A17 !important;
}

body.dark-mode #noteContent ::-moz-selection {
  background: #F0A500 !important;
  color: #1B1A17 !important;
}

/* Dark mode - black background with white text */
body.dark-mode #noteContent {
  background: #1B1A17 !important; /* Your exact black color */
  color: #ffffff !important; /* White text */
  border: 1px solid #F0A500 !important; /* Gold border */
}

/* Dark mode placeholder text in gold */
body.dark-mode #noteContent::placeholder {
  color: #F0A500 !important;
  opacity: 0.7;
}

/* Dark mode focus state */
body.dark-mode #noteContent:focus {
  outline: 2px solid #F0A500 !important;
  background: #1B1A17 !important;
}

/* Dark mode text selection */
body.dark-mode #noteContent ::selection {
  background: #F0A500 !important;
  color: #1B1A17 !important;
}

body.dark-mode #noteContent ::-moz-selection {
  background: #F0A500 !important;
  color: #1B1A17 !important;
}

/* Search bar with icon */
.search-container {
  position: relative;
  flex: 1;
  min-width: 200px;
}

.search-container .search-icon {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--gold);
  z-index: 2;
  pointer-events: none;
}

.search-container #searchInput {
  padding-left: 40px !important; /* Make space for the icon */
}

/* Dark mode search icon */
body.dark-mode .search-container .search-icon {
  color: #ffffff !important;
}

/* Light mode search icon */
body:not(.dark-mode) .search-container .search-icon {
  color: #1B1A17 !important;
}

/* Search bar text color */
#searchInput {
  color: #ffffff !important; /* White text for entered text */
}

/* Search bar placeholder text */
#searchInput::placeholder {
  color: #cccccc !important; /* Light grey for placeholder */
  opacity: 0.7;
}

/* Ensure text remains white in both light and dark modes */
body:not(.dark-mode) #searchInput {
  color: #ffffff !important;
}

body.dark-mode #searchInput {
  color: #ffffff !important;
}

/* Placeholder colors for both modes */
body:not(.dark-mode) #searchInput::placeholder {
  color: #cccccc !important;
}

body.dark-mode #searchInput::placeholder {
  color: #cccccc !important;
}

/* Light mode - black text */
body:not(.dark-mode) #searchInput {
  color: #000000 !important; /* Black text in light mode */
}

body:not(.dark-mode) #searchInput::placeholder {
  color: #666666 !important; /* Dark grey placeholder in light mode */
}

/* Dark mode - white text (keep existing) */
body.dark-mode #searchInput {
  color: #ffffff !important; /* White text in dark mode */
}

body.dark-mode #searchInput::placeholder {
  color: #cccccc !important; /* Light grey placeholder in dark mode */
}

/* Light mode - white background with black text */
body:not(.dark-mode) #noteContent {
  background: #ffffff !important; /* White background */
  color: #000000 !important; /* Black text */
  border: 1px solid #cccccc !important; /* Light grey border */
}

/* Light mode placeholder text */
body:not(.dark-mode) #noteContent::placeholder {
  color: #666666 !important; /* Dark grey placeholder */
  opacity: 0.7;
}

/* Light mode focus state */
body:not(.dark-mode) #noteContent:focus {
  outline: 2px solid #007bff !important; /* Blue focus outline */
  background: #ffffff !important;
}

/* Light mode text selection */
body:not(.dark-mode) #noteContent ::selection {
  background: #007bff !important; /* Blue selection */
  color: #ffffff !important;
}

body:not(.dark-mode) #noteContent ::-moz-selection {
  background: #007bff !important;
  color: #ffffff !important;
}

/* Light mode - use same white as app container */
body:not(.dark-mode) #noteContent {
  background: var(--light-bg) !important; /* Same as app container */
  color: #000000 !important; /* Black text */
}

/* Light mode - use same white as app container with gold outline */
body:not(.dark-mode) #noteContent {
  background: var(--light-bg) !important; /* Same as app container */
  color: #000000 !important; /* Black text */
  border: 1px solid #F0A500 !important; /* Gold border */
}

/* Light mode focus state with gold outline */
body:not(.dark-mode) #noteContent:focus {
  outline: 2px solid #F0A500 !important; /* Gold focus outline */
  background: var(--light-bg) !important;
}

/* Dark mode - saved notes text in white */
body.dark-mode .note-content {
  color: #ffffff !important; /* White text for saved notes */
}

/* Dark mode - note titles in white */
body.dark-mode .note-title {
  color: #ffffff !important; /* White text for note titles */
}

/* Dark mode - note container gold outline */
body.dark-mode .note-container {
  border: 1px solid #F0A500 !important; /* Gold border */
}

/* Dark mode - note container gold outline */
body.dark-mode .note-container {
  border-color: #F0A500 !important; /* Gold border */
}

/* Dark mode - note container gold outline */
body.dark-mode .note-container {
  border-color: #F0A500 !important; /* Gold border */
}

/* Fix for note container outline in dark mode */
body.dark-mode .note-container {
  border: 1px solid #F0A500 !important;
  outline: none !important;
  box-shadow: 0 0 20px rgba(240, 165, 0, 0.15) !important;
}

/* Remove any white borders that might be appearing */
body.dark-mode .note-container * {
  border-color: #F0A500 !important;
}

/* Gold glow outline for note container in dark mode */
body.dark-mode .note-container {
  box-shadow: 0 0 15px rgba(240, 165, 0, 0.8), 
              0 0 30px rgba(240, 165, 0, 0.4),
              inset 0 0 15px rgba(240, 165, 0, 0.1) !important;
  border: 1px solid #F0A500 !important;
}

/* Make date text white in saved notes in dark mode */
body.dark-mode .note-meta span {
    color: #ffffff !important;
}

/* Make email and password input text white in auth pages */
.auth-page input[type="email"],
.auth-page input[type="password"],
.auth-page input[type="text"] {
    color: white !important;
}

.hamburger-line {
  background: #000000 !important; /* Force black color */
}

/* Remove any existing dark mode overrides */
body.dark-mode .hamburger-line {
  background: #000000 !important; /* Keep black in dark mode too */
}

/* === HIDE NOTES MODAL - BLACK & GOLD THEME FOR DARK MODE === */

/* Dark Mode - Black and Gold */
body.dark-mode .hide-notes-modal {
    background: #1B1A17 !important;
    border: 2px solid #F0A500 !important;
    color: #F0A500 !important;
    box-shadow: 0 0 25px rgba(240, 165, 0, 0.4) !important;
}

body.dark-mode .hide-notes-modal h3 {
    color: #F0A500 !important;
    border-bottom: 2px solid #F0A500 !important;
    text-shadow: 0 0 10px rgba(240, 165, 0, 0.5);
}

/* Container for notes checkboxes - Black with Gold Glow */
body.dark-mode .hide-notes-modal #noteCheckboxes {
    background: #1B1A17 !important;
    color: #F0A500 !important;
    border: 2px solid #F0A500 !important;
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
    box-shadow: 
        0 0 15px rgba(240, 165, 0, 0.3),
        inset 0 0 10px rgba(240, 165, 0, 0.1) !important;
}

body.dark-mode .hide-notes-modal #noteCheckboxes label {
    color: #F0A500 !important;
    border: 1px solid rgba(240, 165, 0, 0.3) !important;
    background: #1B1A17 !important;
    border-radius: 6px;
    padding: 12px;
    margin: 10px 0;
    transition: all 0.3s ease;
}

body.dark-mode .hide-notes-modal #noteCheckboxes label:hover {
    background: rgba(240, 165, 0, 0.1) !important;
    border-color: #F0A500 !important;
    box-shadow: 0 0 8px rgba(240, 165, 0, 0.3);
    transform: translateY(-2px);
}

/* Selected notes with gold glow */
body.dark-mode .hide-notes-modal #noteCheckboxes label:has(input[type="checkbox"]:checked) {
    background: rgba(240, 165, 0, 0.15) !important;
    border: 2px solid #F0A500 !important;
    box-shadow: 
        0 0 15px rgba(240, 165, 0, 0.5),
        0 0 25px rgba(240, 165, 0, 0.3) !important;
    color: #FFD700 !important;
}

body.dark-mode .hide-notes-modal #noteCheckboxes label:has(input[type="checkbox"]:checked) strong {
    color: #FFD700 !important;
    text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
}

body.dark-mode .hide-notes-modal #noteCheckboxes label:has(input[type="checkbox"]:checked) div {
    color: rgba(255, 215, 0, 0.9) !important;
}

body.dark-mode .hide-notes-modal #noteCheckboxes strong {
    color: #F0A500 !important;
    font-size: 16px;
}

body.dark-mode .hide-notes-modal #noteCheckboxes div {
    color: rgba(240, 165, 0, 0.8) !important;
    font-size: 12px;
}

/* Checkboxes with gold accent */
body.dark-mode .hide-notes-modal #noteCheckboxes input[type="checkbox"] {
    accent-color: #F0A500 !important;
    transform: scale(1.3);
    margin-right: 12px;
    box-shadow: 0 0 5px rgba(240, 165, 0, 0.5);
}

body.dark-mode .hide-notes-modal #noteCheckboxes input[type="checkbox"]:checked {
    accent-color: #FFD700 !important;
    box-shadow: 0 0 8px rgba(255, 215, 0, 0.7);
}

body.dark-mode .hide-notes-modal #noteCheckboxes input[type="checkbox"]:focus {
    outline: 2px solid #F0A500 !important;
    outline-offset: 2px;
    box-shadow: 0 0 10px rgba(240, 165, 0, 0.8);
}

/* Modal buttons section */
body.dark-mode .hide-notes-modal .modal-buttons {
    background: #1B1A17 !important;
    border-top: 2px solid #F0A500 !important;
    padding-top: 20px;
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
    gap: 10px;
}

body.dark-mode .hide-notes-modal #cancelHide {
    background: #2A2926 !important;
    color: #F0A500 !important;
    border: 2px solid #F0A500 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 0 10px rgba(240, 165, 0, 0.2);
}

body.dark-mode .hide-notes-modal #cancelHide:hover {
    background: #3A3936 !important;
    box-shadow: 0 0 15px rgba(240, 165, 0, 0.4);
    transform: translateY(-1px);
}

body.dark-mode .hide-notes-modal #confirmHide {
    background: #F0A500 !important;
    color: #1B1A17 !important;
    border: 2px solid #F0A500 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s ease;
    box-shadow: 
        0 0 15px rgba(240, 165, 0, 0.5),
        0 0 25px rgba(240, 165, 0, 0.3) !important;
}

body.dark-mode .hide-notes-modal #confirmHide:hover {
    background: #FFD700 !important;
    box-shadow: 
        0 0 20px rgba(255, 215, 0, 0.7),
        0 0 35px rgba(255, 215, 0, 0.4) !important;
    transform: translateY(-2px);
}

/* Scrollbar styling */
body.dark-mode .hide-notes-modal::-webkit-scrollbar-track {
    background: #1B1A17 !important;
}

body.dark-mode .hide-notes-modal::-webkit-scrollbar-thumb {
    background: #F0A500 !important;
    border: 2px solid #1B1A17;
    border-radius: 4px;
}

body.dark-mode .hide-notes-modal::-webkit-scrollbar-thumb:hover {
    background: #FFD700 !important;
    box-shadow: 0 0 8px rgba(255, 215, 0, 0.6);
}

.hide-notes-modal h3::before {
    content: "üîí ";
    margin-right: 8px;
    filter: drop-shadow(0 0 5px rgba(240, 165, 0, 0.5));
}

 /* Enhanced Templates Section Styles */ 
    .templates-section { 
      margin: 25px 0; 
      padding: 25px; 
      background: #1B1A17; 
      border-radius: 20px; 
      border: 2px solid #F0A500; 
      position: relative; 
      overflow: hidden; 
      box-shadow: 0 8px 32px rgba(240, 165, 0, 0.3); 
    } 
 
    .section-header { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      margin-bottom: 25px; 
      position: relative; 
    } 
 
    .section-header h3 { 
      color: #F0A500; 
      font-size: 24px; 
      font-weight: 700; 
      margin: 0; 
    } 
 
    .header-decoration { 
      display: flex; 
      gap: 8px; 
    } 
 
    .decoration-star { 
      font-size: 16px; 
      color: #F0A500; 
      animation: starTwinkle 3s ease-in-out infinite; 
    } 
 
    .decoration-star:nth-child(2) { 
      animation-delay: 1s; 
    } 
 
    .decoration-star:nth-child(3) { 
      animation-delay: 2s; 
    } 
 
    @keyframes starTwinkle { 
 
      0%, 
      100% { 
        opacity: 0.5; 
        transform: scale(1); 
      } 
 
      50% { 
        opacity: 1; 
        transform: scale(1.2); 
      } 
    } 
 
    .templates-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
      gap: 20px; 
      margin-bottom: 20px; 
    } 
 
    .template-card { 
      background: #1B1A17; 
      border-radius: 16px; 
      padding: 25px 20px; 
      text-align: center; 
      cursor: pointer; 
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
      border: 2px solid #F0A500; 
      position: relative; 
      overflow: hidden; 
      box-shadow: 0 8px 25px rgba(240, 165, 0, 0.2); 
      min-height: 140px; 
      display: flex; 
      flex-direction: column; 
      justify-content: center; 
      align-items: center; 
    } 
 
    .card-glow { 
      position: absolute; 
      top: -10px; 
      left: -10px; 
      right: -10px; 
      bottom: -10px; 
      background: radial-gradient(circle at center, rgba(240, 165, 0, 0.4) 0%, transparent 70%); 
      opacity: 0; 
      transition: opacity 0.3s ease; 
      border-radius: 20px; 
      z-index: -1; 
      filter: blur(15px); 
    } 
 
    .template-card:hover { 
      transform: translateY(-8px) scale(1.05); 
      box-shadow: 0 0 30px rgba(240, 165, 0, 0.6), 0 15px 35px rgba(240, 165, 0, 0.4); 
      background: #F0A500; 
      border-color: #F0A500; 
    } 
 
    .template-card:hover .card-glow { 
      opacity: 1; 
    } 
 
    .template-card:hover .card-glow { 
      opacity: 1; 
    } 
 
    .template-icon { 
      font-size: 42px; 
      margin-bottom: 12px; 
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2)); 
      transition: transform 0.3s ease; 
    } 
 
    .template-card:hover .template-icon { 
      transform: scale(1.2) rotate(5deg); 
    } 
 
    .template-name { 
      font-size: 16px; 
      font-weight: 600; 
      color: #F0A500; 
      margin-bottom: 8px; 
    } 
 
    .template-badge { 
      background: #F0A500; 
      color: #1B1A17; 
      padding: 4px 12px; 
      border-radius: 20px; 
      font-size: 11px; 
      font-weight: 600; 
      border: 1px solid #F0A500; 
      transition: all 0.3s ease; 
    } 
 
    .templates-footer { 
      text-align: center; 
      padding-top: 20px; 
      border-top: 1px solid rgba(255, 255, 255, 0.2); 
      position: relative; 
      overflow: hidden; 
    } 
 
    .templates-footer p { 
      color: #F0A500; 
      font-size: 14px; 
      font-weight: 500; 
      margin: 0; 
      position: relative; 
      z-index: 2; 
    } 
 
    .floating-orb { 
      position: absolute; 
      border-radius: 50%; 
      filter: blur(20px); 
      opacity: 0.6; 
      animation: floatOrb 8s ease-in-out infinite; 
    } 
 
    .orb-1 { 
      width: 60px; 
      height: 60px; 
      background: rgba(240, 165, 0, 0.3); 
      top: -30px; 
      left: 20%; 
      animation-delay: 0s; 
    } 
 
    .orb-2 { 
      width: 40px; 
      height: 40px; 
      background: rgba(240, 165, 0, 0.2); 
      top: -20px; 
      right: 25%; 
      animation-delay: 2s; 
    } 
 
    @keyframes floatOrb { 
 
      0%, 
      100% { 
        transform: translateY(0) translateX(0); 
      } 
 
      25% { 
        transform: translateY(-10px) translateX(10px); 
      } 
 
      50% { 
        transform: translateY(-5px) translateX(-5px); 
      } 
 
      75% { 
        transform: translateY(-15px) translateX(5px); 
      } 
    } 
 
    /* Pulse animation for cards */ 
    @keyframes cardPulse { 
      0% { 
        box-shadow: 0 8px 25px rgba(240, 165, 0, 0.2); 
      } 
 
      50% { 
        box-shadow: 0 8px 25px rgba(240, 165, 0, 0.3), 0 0 25px rgba(240, 165, 0, 0.5); 
      } 
 
      100% { 
        box-shadow: 0 8px 25px rgba(240, 165, 0, 0.2); 
      } 
    } 
 
    body:not(.dark-mode) .template-card:hover { 
      transform: translateY(-8px) scale(1.05); 
      box-shadow: 0 0 30px rgba(240, 165, 0, 0.5), 0 15px 35px rgba(240, 165, 0, 0.3); 
      background: #F0A500; 
      border-color: #F0A500; 
    } 
 
    body:not(.dark-mode) .template-card:hover .template-name { 
      color: #1B1A17; 
      font-weight: 700; 
    } 
 
    body:not(.dark-mode) .template-card:hover .template-badge { 
      background: #1B1A17; 
      color: #F0A500; 
      border: 1px solid #1B1A17; 
    } 
 
    body:not(.dark-mode) .template-card:hover .template-icon { 
      filter: drop-shadow(0 4px 8px rgba(27, 26, 23, 0.5)); 
    } 
 
 
 
    body:not(.dark-mode) .templates-section { 
      background: #ffffff; 
      border: 2px solid #F0A500; 
      box-shadow: 0 8px 32px rgba(240, 165, 0, 0.15); 
    } 
 
    body:not(.dark-mode) .template-card { 
      background: #ffffff; 
      border: 2px solid #F0A500; 
      box-shadow: 0 8px 25px rgba(240, 165, 0, 0.1); 
    } 
/* Light Mode Text Colors */ 
body:not(.dark-mode) .section-header h3 { 
  color: #F0A500; 
} 
 
body:not(.dark-mode) .decoration-star { 
  color: #F0A500; 
} 
 
body:not(.dark-mode) .templates-footer p { 
  color: #F0A500; 
} 
 
 
    body.dark-mode .templates-section { 
      background: #1B1A17; 
      border: 2px solid #F0A500; 
      box-shadow: 0 8px 32px rgba(240, 165, 0, 0.3); 
    } 
 
    body.dark-mode .template-card { 
      background: #1B1A17; 
      border: 2px solid #F0A500; 
      box-shadow: 0 8px 25px rgba(240, 165, 0, 0.2); 
    } 
 
    body.dark-mode .template-card:hover { 
      transform: translateY(-8px) scale(1.05); 
      box-shadow: 0 0 30px rgba(240, 165, 0, 0.7), 0 15px 35px rgba(240, 165, 0, 0.4); 
      background: #F0A500; 
      border-color: #F0A500; 
    } 
 
    body.dark-mode .template-card:hover .template-name { 
      color: #1B1A17; 
      font-weight: 700; 
    } 
 
    body.dark-mode .template-card:hover .template-badge { 
      background: #1B1A17; 
      color: #F0A500; 
      border: 1px solid #1B1A17; 
    } 
 
    body.dark-mode .template-card:hover .template-icon { 
      filter: drop-shadow(0 4px 8px rgba(27, 26, 23, 0.5)); 
    } 
 
    .template-card:nth-child(odd) { 
      animation: cardPulse 4s ease-in-out infinite; 
    } 
 
    .template-card:nth-child(even) { 
      animation: cardPulse 4s ease-in-out 2s infinite; 
    } 
 
    /* Responsive adjustments */ 
    @media (max-width: 768px) { 
      .templates-section { 
        padding: 20px 15px; 
        margin: 15px 0; 
      } 
 
      .templates-grid { 
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
        gap: 15px; 
      } 
 
      .template-card { 
        padding: 20px 15px; 
        min-height: 120px; 
      } 
 
      .template-icon { 
        font-size: 36px; 
      } 
 
      .template-name { 
        font-size: 14px; 
      } 
 
      .section-header h3 { 
        font-size: 20px; 
      } 
    } 
 
    @media (max-width: 480px) { 
      .templates-grid { 
        grid-template-columns: repeat(2, 1fr); 
      } 
 
      .section-header { 
        flex-direction: column; 
        gap: 10px; 
        text-align: center; 
      } 
    }

    /* Undo/Redo button styles */
#undoBtn, #redoBtn {
  background: #f1f5f9;
  border: 1px solid #ddd;
  padding: 6px 10px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s ease;
}

#undoBtn:hover, #redoBtn:hover {
  background: #e2e8f0;
  transform: translateY(-1px);
}

#undoBtn:disabled, #redoBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* Dark mode support */
body.dark-mode #undoBtn, 
body.dark-mode #redoBtn {
  background: #444;
  color: #e0e0e0;
  border: 1px solid #555;
}

body.dark-mode #undoBtn:hover, 
body.dark-mode #redoBtn:hover {
  background: #555;
}

/* For success messages (gold background, black text) */
.copy-paste-success {
    background: #F0A500 !important;
    color: #1B1A17 !important;
}

/* For error messages (gold background, black text) */
.copy-paste-error {
    background: #F0A500 !important;
    color: #1B1A17 !important;
}

/* For info messages (gold background, black text) */
.copy-paste-info {
    background: #F0A500 !important;
    color: #1B1A17 !important;
}

/* Or if you have a general feedback class */
#copyPasteFeedback {
    background: #F0A500 !important;
    color: #1B1A17 !important;
}
#copyPasteFeedback {
    top: 70px !important;
    right: 20px !important;
    bottom: auto !important;
}

/* Hide Password Setup Modal */
.hide-password-setup-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  backdrop-filter: blur(5px);
}

.hide-password-setup-content {
  background: var(--bg-color);
  border: 2px solid var(--gold);
  border-radius: 16px;
  padding: 30px;
  max-width: 450px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 20px 60px rgba(240, 165, 0, 0.3);
  animation: slideInUp 0.3s ease-out;
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.setup-header {
  text-align: center;
  margin-bottom: 30px;
}

.setup-icon {
  font-size: 48px;
  margin-bottom: 15px;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-10px);
  }
  60% {
    transform: translateY(-5px);
  }
}

.setup-header h3 {
  color: var(--gold);
  font-size: 24px;
  margin-bottom: 8px;
  font-weight: 600;
}

.setup-header p {
  color: var(--text-color);
  opacity: 0.8;
  font-size: 14px;
}

.password-form {
  margin-bottom: 25px;
}

.password-form .form-group {
  margin-bottom: 20px;
}

.password-form label {
  display: block;
  color: var(--text-color);
  font-weight: 500;
  margin-bottom: 8px;
  font-size: 14px;
}

.password-form .input-wrapper {
  position: relative;
}

.password-form input {
  width: 100%;
  padding: 12px 45px 12px 15px;
  border: 2px solid var(--border-color);
  border-radius: 8px;
  background: var(--bg-color);
  color: var(--text-color);
  font-size: 16px;
  transition: all 0.3s ease;
}

.password-form input:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 3px rgba(240, 165, 0, 0.1);
}

.password-form .password-toggle {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--text-color);
  cursor: pointer;
  padding: 5px;
  opacity: 0.7;
  transition: opacity 0.3s ease;
}

.password-form .password-toggle:hover {
  opacity: 1;
}

.password-strength {
  margin-top: 8px;
}

.strength-bar {
  height: 4px;
  background: #ef4444;
  border-radius: 2px;
  width: 0%;
  transition: all 0.3s ease;
  margin-bottom: 4px;
}

.strength-text {
  font-size: 12px;
  color: #6b7280;
}

.password-match {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 8px;
  font-size: 12px;
}

.password-match i {
  font-size: 12px;
}

.password-requirements {
  background: rgba(240, 165, 0, 0.1);
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 25px;
}

.password-requirements h4 {
  color: var(--gold);
  margin-bottom: 10px;
  font-size: 14px;
}

.password-requirements ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.password-requirements li {
  font-size: 12px;
  margin-bottom: 4px;
  transition: color 0.3s ease;
}

.setup-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
}

.setup-btn {
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.setup-btn:disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

.setup-btn:not(:disabled):hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(240, 165, 0, 0.3);
}

.setup-info {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px;
  background: rgba(240, 165, 0, 0.1);
  border-radius: 6px;
  font-size: 12px;
  color: var(--text-color);
}

.setup-info i {
  color: var(--gold);
  font-size: 14px;
}

/* Responsive Design */
@media (max-width: 480px) {
  .hide-password-setup-content {
    padding: 20px;
    margin: 20px;
  }
  
  .setup-header h3 {
    font-size: 20px;
  }
  
  .setup-icon {
    font-size: 36px;
  }
}

/* Password Setup Modal Styles */
.hide-password-setup-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  backdrop-filter: blur(5px);
}

.hide-password-setup-content {
  background: #1B1A17;
  border: 2px solid #F0A500;
  border-radius: 16px;
  padding: 30px;
  max-width: 450px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 20px 60px rgba(240, 165, 0, 0.3);
  animation: slideInUp 0.3s ease-out;
  color: #F0A500;
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.setup-header {
  text-align: center;
  margin-bottom: 30px;
}

.setup-icon {
  font-size: 48px;
  margin-bottom: 15px;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-10px);
  }
  60% {
    transform: translateY(-5px);
  }
}

.setup-header h3 {
  color: #F0A500;
  font-size: 24px;
  margin-bottom: 8px;
  font-weight: 600;
}

.setup-header p {
  color: #F0A500;
  opacity: 0.8;
  font-size: 14px;
}

.password-form {
  margin-bottom: 25px;
}

.password-form .form-group {
  margin-bottom: 20px;
}

.password-form label {
  display: block;
  color: #F0A500;
  font-weight: 500;
  margin-bottom: 8px;
  font-size: 14px;
}

.password-form .input-wrapper {
  position: relative;
}

.password-form input {
  width: 100%;
  padding: 12px 45px 12px 15px;
  border: 2px solid #F0A500;
  border-radius: 8px;
  background: #1B1A17;
  color: #F0A500;
  font-size: 16px;
  transition: all 0.3s ease;
}

.password-form input:focus {
  outline: none;
  border-color: #F0A500;
  box-shadow: 0 0 0 3px rgba(240, 165, 0, 0.1);
}

.password-form .password-toggle {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: #F0A500;
  cursor: pointer;
  padding: 5px;
  opacity: 0.7;
  transition: opacity 0.3s ease;
}

.password-form .password-toggle:hover {
  opacity: 1;
}

.password-strength {
  margin-top: 8px;
}

.strength-bar {
  height: 4px;
  background: #ef4444;
  border-radius: 2px;
  width: 0%;
  transition: all 0.3s ease;
  margin-bottom: 4px;
}

.strength-text {
  font-size: 12px;
  color: #F0A500;
}

.password-match {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 8px;
  font-size: 12px;
  color: #ef4444;
  display: none;
}

.password-match.valid {
  color: #10b981;
}

.password-match i {
  font-size: 12px;
}

.password-requirements {
  background: rgba(240, 165, 0, 0.1);
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 25px;
}

.password-requirements h4 {
  color: #F0A500;
  margin-bottom: 10px;
  font-size: 14px;
}

.password-requirements ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.password-requirements li {
  font-size: 12px;
  margin-bottom: 4px;
  transition: color 0.3s ease;
  color: #ef4444;
}

.password-requirements li.valid {
  color: #10b981;
}

.setup-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
}

.setup-btn {
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: #F0A500;
  color: #1B1A17;
}

.setup-btn:disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

.setup-btn:not(:disabled):hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(240, 165, 0, 0.3);
}

.setup-info {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px;
  background: rgba(240, 165, 0, 0.1);
  border-radius: 6px;
  font-size: 12px;
  color: #F0A500;
}

.setup-info i {
  color: #F0A500;
  font-size: 14px;
}

/* Responsive Design */
@media (max-width: 480px) {
  .hide-password-setup-content {
    padding: 20px;
    margin: 20px;
  }
  
  .setup-header h3 {
    font-size: 20px;
  }
  
  .setup-icon {
    font-size: 36px;
  }
}

/* OTP Modal Styles */
.otp-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  backdrop-filter: blur(5px);
}

.otp-modal-content {
  background: #1B1A17;
  border: 2px solid #F0A500;
  border-radius: 16px;
  padding: 30px;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 20px 60px rgba(240, 165, 0, 0.3);
  animation: slideInUp 0.3s ease-out;
  color: #F0A500;
}

.otp-header {
  text-align: center;
  margin-bottom: 25px;
}

.otp-icon {
  font-size: 48px;
  margin-bottom: 15px;
  animation: bounce 2s infinite;
}

.otp-header h3 {
  color: #F0A500;
  font-size: 24px;
  margin-bottom: 8px;
  font-weight: 600;
}

.otp-header p {
  color: #F0A500;
  opacity: 0.8;
  font-size: 14px;
}

.otp-inputs {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 20px;
}

.otp-box {
  width: 50px;
  height: 50px;
  border: 2px solid #F0A500;
  border-radius: 8px;
  background: #1B1A17;
  color: #F0A500;
  font-size: 20px;
  font-weight: bold;
  text-align: center;
  outline: none;
  transition: all 0.3s ease;
}

.otp-box:focus {
  border-color: #FFD700;
  box-shadow: 0 0 10px rgba(240, 165, 0, 0.5);
  transform: scale(1.05);
}

.otp-box.filled {
  border-color: #4CAF50;
  background: rgba(76, 175, 80, 0.1);
}

.otp-timer {
  text-align: center;
  margin-bottom: 20px;
}

.otp-timer p {
  color: #F0A500;
  font-size: 14px;
}

#otpTimer {
  font-weight: bold;
  color: #FFD700;
}

.otp-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 15px;
}

.otp-btn {
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: #F0A500;
  color: #1B1A17;
}

.otp-btn:disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

.otp-btn:not(:disabled):hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(240, 165, 0, 0.3);
}

.otp-btn.secondary {
  background: transparent;
  color: #F0A500;
  border: 1px solid #F0A500;
}

.otp-status {
  text-align: center;
  font-size: 14px;
  min-height: 20px;
}

.otp-status.success {
  color: #4CAF50;
}

.otp-status.error {
  color: #f44336;
}

/* Animations */
@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-10px);
  }
  60% {
    transform: translateY(-5px);
  }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Responsive Design */
@media (max-width: 480px) {
  .otp-modal-content {
    padding: 20px;
    margin: 20px;
  }
  
  .otp-box {
    width: 40px;
    height: 40px;
    font-size: 18px;
  }
  
  .otp-header h3 {
    font-size: 20px;
  }
  
  .otp-icon {
    font-size: 36px;
  }
}

/* Simple OTP Modal Styles */
.otp-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    font-family: Arial, sans-serif;
}

.otp-modal-content {
    background: #1B1A17;
    border: 3px solid #F0A500;
    border-radius: 15px;
    padding: 30px;
    max-width: 400px;
    width: 90%;
    text-align: center;
    color: #F0A500;
    box-shadow: 0 10px 30px rgba(240, 165, 0, 0.3);
}

.otp-header h3 {
    margin: 0 0 10px 0;
    font-size: 24px;
    color: #F0A500;
}

.otp-header p {
    margin: 0 0 20px 0;
    color: #FFD700;
    font-size: 16px;
}

.otp-actions {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 20px;
}

.otp-btn {
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    background: #F0A500;
    color: #1B1A17;
    font-size: 16px;
}

.otp-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(240, 165, 0, 0.4);
}

.otp-btn.secondary {
    background: transparent;
    color: #F0A500;
    border: 2px solid #F0A500;
}

.otp-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}
/* Golden hover effect for editor options */
.option-btn {
  background: var(--bg-color) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--border-color) !important;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
  position: relative;
  overflow: hidden;
}

.option-btn:hover {
  background: #F0A500 !important;
  color: #1B1A17 !important;
  border-color: #F0A500 !important;
  transform: translateY(-8px) scale(1.05);
  box-shadow: 0 0 30px rgba(240, 165, 0, 0.6), 0 15px 35px rgba(240, 165, 0, 0.4);
}

.option-btn:hover::before {
  opacity: 1;
}

/* Golden hover effect for font style button */
.style-button {
  background: var(--primary-color) !important;
  color: var(--primary-text) !important;
  border: none !important;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
  position: relative;
  overflow: hidden;
}

.style-button:hover {
  background: #F0A500 !important;
  color: #1B1A17 !important;
  transform: translateY(-8px) scale(1.05);
  box-shadow: 0 0 30px rgba(240, 165, 0, 0.6), 0 15px 35px rgba(240, 165, 0, 0.4);
}

/* Golden hover effect for template button */
.toolbar-button {
  background: var(--primary-color) !important;
  color: var(--primary-text) !important;
  border: none !important;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
  position: relative;
  overflow: hidden;
}

.toolbar-button:hover {
  background: #F0A500 !important;
  color: #1B1A17 !important;
  transform: translateY(-8px) scale(1.05);
  box-shadow: 0 0 30px rgba(240, 165, 0, 0.6), 0 15px 35px rgba(240, 165, 0, 0.4);
}

/* Add subtle glow effect for both buttons */
.style-button::before,
.toolbar-button::before {
  content: '';
  position: absolute;
  top: -10px;
  left: -10px;
  right: -10px;
  bottom: -10px;
  background: radial-gradient(circle at center, rgba(240, 165, 0, 0.4) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
  border-radius: 6px;
  z-index: -1;
  filter: blur(15px);
}

.style-button:hover::before,
.toolbar-button:hover::before {
  opacity: 1;
}

/* Font Style and Template Button Theme Colors */
body:not(.dark-mode) .style-button,
body:not(.dark-mode) .toolbar-button {
    background: var(--light-bg) !important;
    color: var(--light-text) !important;
    border: 1px solid var(--border-color) !important;
}

body.dark-mode .style-button,
body.dark-mode .toolbar-button {
    background: var(--dark-bg) !important;
    color: var(--dark-text) !important;
    border: 1px solid var(--border-color) !important;
}

/* Hover states */
body:not(.dark-mode) .style-button:hover,
body:not(.dark-mode) .toolbar-button:hover {
    background: #F0A500 !important;
    color: #1B1A17 !important;
    border-color: #F0A500 !important;
}

body.dark-mode .style-button:hover,
body.dark-mode .toolbar-button:hover {
    background: #F0A500 !important;
    color: #1B1A17 !important;
    border-color: #F0A500 !important;
}

/* Dropdown backgrounds */
body:not(.dark-mode) .dropdown-content,
body:not(.dark-mode) .template-dropdown {
    background: var(--light-bg) !important;
    color: var(--light-text) !important;
    border: 1px solid var(--border-color) !important;
}

body.dark-mode .dropdown-content,
body.dark-mode .template-dropdown {
    background: var(--dark-bg) !important;
    color: var(--dark-text) !important;
    border: 1px solid var(--border-color) !important;
}

/* Dropdown options */
body:not(.dark-mode) .font-option,
body:not(.dark-mode) .template-option {
    background: var(--light-bg) !important;
    color: var(--light-text) !important;
    border-bottom: 1px solid var(--border-color) !important;
}

body.dark-mode .font-option,
body.dark-mode .template-option {
    background: var(--dark-bg) !important;
    color: var(--dark-text) !important;
    border-bottom: 1px solid var(--border-color) !important;
}

/* Hover states for dropdown options */
body:not(.dark-mode) .font-option:hover,
body:not(.dark-mode) .template-option:hover {
    background: rgba(240, 165, 0, 0.1) !important;
}

body.dark-mode .font-option:hover,
body.dark-mode .template-option:hover {
    background: rgba(240, 165, 0, 0.1) !important;
}

/* Selected font option */
body:not(.dark-mode) .font-option.selected {
    background: #F0A500 !important;
    color: #1B1A17 !important;
}

body.dark-mode .font-option.selected {
    background: #F0A500 !important;
    color: #1B1A17 !important;
}

/* To-Do List Container Theme */
body:not(.dark-mode) .todo-container {
    background: var(--light-bg) !important;
    color: var(--light-text) !important;
    border: 1px solid var(--border-color) !important;
}

body.dark-mode .todo-container {
    background: var(--dark-bg) !important;
    color: var(--dark-text) !important;
    border: 1px solid var(--border-color) !important;
}

/* Ensure the golden border color */
body:not(.dark-mode) .todo-container,
body.dark-mode .todo-container {
    border-color: #F0A500 !important;
}

/* To-Do List Input Container Theme */
body:not(.dark-mode) #taskInput {
    background: var(--light-bg) !important;
    color: var(--light-text) !important;
    border: 1px solid var(--border-color) !important;
}

body.dark-mode #taskInput {
    background: var(--dark-bg) !important;
    color: var(--dark-text) !important;
    border: 1px solid var(--border-color) !important;
}

/* Ensure the golden border color */
body:not(.dark-mode) #taskInput,
body.dark-mode #taskInput {
    border-color: #F0A500 !important;
}
/* To-Do List Buttons Golden Theme */
body:not(.dark-mode) #addTaskBtn,
body:not(.dark-mode) #taskList li button {
    background: #F0A500 !important;
    color: #1B1A17 !important;
    border: 1px solid #F0A500 !important;
}

body.dark-mode #addTaskBtn,
body.dark-mode #taskList li button {
    background: #F0A500 !important;
    color: #1B1A17 !important;
    border: 1px solid #F0A500 !important;
}

/* Hover effects */
body:not(.dark-mode) #addTaskBtn:hover,
body:not(.dark-mode) #taskList li button:hover {
    background: #d19400 !important;
    border-color: #d19400 !important;
}

body.dark-mode #addTaskBtn:hover,
body.dark-mode #taskList li button:hover {
    background: #d19400 !important;
    border-color: #d19400 !important;
}
/* To-Do List Task Items Container Theme */
body:not(.dark-mode) #taskList li {
    background: var(--light-bg) !important;
    color: var(--light-text) !important;
    border: 1px solid var(--border-color) !important;
}

body.dark-mode #taskList li {
    background: var(--dark-bg) !important;
    color: var(--dark-text) !important;
    border: 1px solid var(--border-color) !important;
}

/* Ensure the golden border color */
body:not(.dark-mode) #taskList li,
body.dark-mode #taskList li {
    border-color: #F0A500 !important;
}

/* To-Do List Task Text Color */
body:not(.dark-mode) #taskList li {
    color: var(--light-text) !important;
}

body.dark-mode #taskList li {
    color: #ffffff !important;
}

/* To-Do List Text Color - Input and Displayed Tasks */
body:not(.dark-mode) #taskInput {
    color: var(--light-text) !important;
}

body.dark-mode #taskInput {
    color: #ffffff !important;
}

body:not(.dark-mode) #taskList li {
    color: var(--light-text) !important;
}

body.dark-mode #taskList li {
    color: #ffffff !important;
}

/* Placeholder text color */
body:not(.dark-mode) #taskInput::placeholder {
    color: var(--light-text) !important;
    opacity: 0.7;
}

body.dark-mode #taskInput::placeholder {
    color: #ffffff !important;
    opacity: 0.7;
}


/* === LIGHT LINEAR GRADIENT GOLD THEME - CLEAN VERSION === */

/* SPLASH SCREEN */
.animated-orb.orb-1 {
  background: linear-gradient(135deg, rgba(255, 223, 100, 0.2), rgba(255, 235, 150, 0.15));
}

.animated-orb.orb-2 {
  background: linear-gradient(135deg, rgba(255, 235, 150, 0.15), rgba(255, 223, 100, 0.2));
}

.glow-ring {
  background: linear-gradient(135deg, #FFD966, #FFE699);
}

.app-name h1 {
  background: linear-gradient(to right, #FFE699, #FFD966, #FFE699);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.divider {
  background: linear-gradient(to right, transparent, #FFD966, #FFE699, transparent);
}

.dot {
  background: linear-gradient(135deg, #FFD966, #FFE699);
}

/* AUTH PAGES */
.particle {
  background: linear-gradient(135deg, rgba(255, 223, 100, 0.4), rgba(255, 235, 150, 0.3));
}

.auth-header h1 {
  background: linear-gradient(to right, #FFE699, #FFD966, #FFE699);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.auth-header p {
  background: linear-gradient(to right, #FFE699, #FFD966);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.tab-button {
  color: #FFE699;
}

.tab-button.active {
  background: linear-gradient(135deg, #FFD966, #FFE699);
  color: #1B1A17;
}

.btn-primary {
  background: linear-gradient(135deg, #FFD966, #FFE699);
  color: #1B1A17;
}

.btn-primary:hover {
  background: linear-gradient(135deg, #E6C252, #E6D189);
}

/* LOADING PAGE */
.loading-container::before {
  background: radial-gradient(circle, rgba(255, 223, 100, 0.1), rgba(255, 235, 150, 0.05));
}

.logo {
  border: 2px solid #FFE699;
}

.brand-name {
  background: linear-gradient(to right, #FFE699, #FFD966, #FFE699);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.loading-bar {
  background: linear-gradient(90deg, #FFD966, #FFE699, #FFD966);
}

.percentage {
  background: linear-gradient(to right, #FFE699, #FFD966);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.loading-text {
  background: linear-gradient(to right, #FFE699, #FFD966);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.hint {
  background: linear-gradient(to right, #FFE699, #FFD966);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

/* APP CONTAINER */
.header h1 {
  background: linear-gradient(to right, #FFE699, #FFD966, #FFE699);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.theme-toggle {
  background: linear-gradient(135deg, #FFD966, #FFE699);
  color: #1B1A17;
}

.small-btn {
  background: linear-gradient(135deg, #FFD966, #FFE699);
  color: #1B1A17;
}

/* EDITOR */
.style-button {
  background: linear-gradient(135deg, #FFD966, #FFE699);
  color: #1B1A17;
}

/* MENU ITEMS */
.menu-item.export-pdf {
  color: #FFE699;
}

.menu-item.duplicate-note {
  color: #FFE699;
}

.menu-item.print-notes {
  color: #FFE699;
}

.menu-item.logout-menu {
  color: #FFE699;
}

/* BUTTONS */
button {
  background: linear-gradient(135deg, #FFD966, #FFE699);
  color: #1B1A17;
}

/* MODAL BUTTONS */
.btn-confirm {
  background: linear-gradient(135deg, #FFD966, #FFE699);
  color: #1B1A17;
}

/* TEMPLATES */
.section-header h3 {
  background: linear-gradient(to right, #FFE699, #FFD966, #FFE699);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.template-name {
  background: linear-gradient(to right, #FFE699, #FFD966);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.template-badge {
  background: linear-gradient(135deg, #FFD966, #FFE699);
  color: #1B1A17;
}

/* HOVER EFFECTS */
.option-btn:hover {
  background: linear-gradient(135deg, #FFD966, #FFE699);
  color: #1B1A17;
}

.style-button:hover {
  background: linear-gradient(135deg, #FFE699, #FFD966);
  color: #1B1A17;
}

.toolbar-button:hover {
  background: linear-gradient(135deg, #FFE699, #FFD966);
  color: #1B1A17;
}

/* FEEDBACK MESSAGES */
.copy-paste-success,
.copy-paste-error,
.copy-paste-info,
#copyPasteFeedback {
  background: linear-gradient(135deg, #FFD966, #FFE699);
  color: #1B1A17;
}


/* === COMPLETE LIGHT GOLD THEME - MATCHING QUICK TEMPLATES === */

/* SPLASH SCREEN */
.splash-screen {
    background: linear-gradient(to bottom right, #000000, #1B1A17, #000000) !important;
}

.animated-orb.orb-1 {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 223, 100, 0.15)) !important;
}

.animated-orb.orb-2 {
    background: linear-gradient(135deg, rgba(255, 223, 100, 0.15), rgba(255, 215, 0, 0.2)) !important;
}

.glow-ring {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    animation: pulse 2s ease-in-out infinite !important;
}

.app-name h1 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699, #FFD966, #FFD700) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.divider {
    background: linear-gradient(to right, transparent, #FFD700, #FFD966, #FFE699, #FFD966, #FFD700, transparent) !important;
}

.dot {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
}

/* AUTH PAGES */
.auth-page {
    background: linear-gradient(to bottom right, #000000, #1B1A17, #000000) !important;
}

.particle {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.4), rgba(255, 223, 100, 0.3)) !important;
}

.auth-header h1 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699, #FFD966, #FFD700) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.auth-header p {
    background: linear-gradient(to right, #FFD966, #FFE699, #FFD966) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.auth-card {
    background: rgba(27, 26, 23, 0.8) !important;
    border: 1px solid #FFD966 !important;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 15px rgba(255, 215, 0, 0.1) !important;
}

.tabs {
    background: rgba(15, 23, 42, 0.5) !important;
    border: 1px solid #FFD966 !important;
}

.tab-button {
    color: #FFD966 !important;
}

.tab-button.active {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
}

.btn-primary {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    box-shadow: 0 10px 15px -3px rgba(255, 215, 0, 0.3) !important;
}

.btn-primary:hover {
    background: linear-gradient(135deg, #E6C252, #E6D189) !important;
    box-shadow: 0 10px 15px -3px rgba(255, 215, 0, 0.5) !important;
}

/* LOADING PAGE */
.loading-page {
    background: linear-gradient(135deg, #1B1A17 0%, #2b2200 50%, #1B1A17 100%) !important;
}

.loading-container {
    background: rgba(255, 215, 0, 0.05) !important;
    border: 1px solid #FFD966 !important;
}

.loading-container::before {
    background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%) !important;
}

.logo {
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.3) !important;
    border: 2px solid #FFD966 !important;
}

.brand-name {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699, #FFD966, #FFD700) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    text-shadow: 0 0 20px rgba(255, 215, 0, 0.3) !important;
}

.loading-bar {
    background: linear-gradient(90deg, #FFD700, #FFD966, #FFE699, #FFD966, #FFD700) !important;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.5) !important;
}

.percentage {
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.loading-text {
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.hint {
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.floating-element {
    background: rgba(255, 215, 0, 0.03) !important;
}

/* APP CONTAINER */
.app-container {
    background: var(--bg-color) !important;
}

.header {
    background: var(--bg-color) !important;
}

.header h1 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699, #FFD966, #FFD700) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.theme-toggle {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
}

.datetime-display {
    background: rgba(255, 215, 0, 0.05) !important;
    color: var(--text-color) !important;
    border-bottom: 1px solid #FFD966 !important;
}

.note-container {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.15) !important;
}

.small-btn {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
}

.note-item {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
}

/* EDITOR */
.note-editor {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
}

.editor-content {
    background: var(--bg-color) !important;
}

#noteTitle, #Tag {
    background: var(--bg-color) !important;
    color: var(--text-color) !important;
    border: 1px solid #FFD966 !important;
}

#noteContent {
    background: var(--bg-color) !important;
    color: var(--text-color) !important;
    border: 1px solid #FFD966 !important;
}

.option-btn {
    background: var(--bg-color) !important;
    color: var(--text-color) !important;
    border: 1px solid #FFD966 !important;
}

.style-button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
}

.dropdown-content {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
}

.font-option {
    color: var(--text-color) !important;
    border-bottom: 1px solid #FFD966 !important;
}

/* MENU */
.menu-items {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
}

.profile-section {
    border-bottom: 1px solid #FFD966 !important;
}

.menu-item {
    border-bottom: 1px solid #FFD966 !important;
    color: var(--text-color) !important;
}

.menu-item.export-pdf {
    color: #FFD966 !important;
}

.menu-item.duplicate-note {
    color: #FFD966 !important;
}

.menu-item.print-notes {
    color: #FFD966 !important;
}

.menu-item.logout-menu {
    color: #FFD966 !important;
}

/* TEMPLATES SECTION - APPLIED EVERYWHERE */
.templates-section {
    background: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    box-shadow: 0 8px 32px rgba(255, 215, 0, 0.3) !important;
}

.section-header h3 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699, #FFD966, #FFD700) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-size: 24px !important;
    font-weight: 700 !important;
}

.decoration-star {
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.template-card {
    background: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.2) !important;
}

.template-card:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    border-color: #FFE699 !important;
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.6), 0 15px 35px rgba(255, 215, 0, 0.4) !important;
}

.template-name {
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.template-badge {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

.templates-footer p {
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

/* Light Mode Templates */
body:not(.dark-mode) .templates-section {
    background: #ffffff !important;
    border: 2px solid #FFD966 !important;
}

body:not(.dark-mode) .template-card {
    background: #ffffff !important;
    border: 2px solid #FFD966 !important;
}

body:not(.dark-mode) .template-card:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
}

body:not(.dark-mode) .template-card:hover .template-name {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important;
}

body:not(.dark-mode) .template-card:hover .template-badge {
    background: #1B1A17 !important;
    color: #FFD966 !important;
}

/* GOLDEN HOVER EFFECTS */
.option-btn:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
}

.style-button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    color: #1B1A17 !important;
}

.toolbar-button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    color: #1B1A17 !important;
}

/* TO-DO LIST */
.todo-container {
    background: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

body:not(.dark-mode) .todo-container {
    background: #ffffff !important;
    border: 1px solid #FFD966 !important;
}

#addTaskBtn,
#taskList li button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

#addTaskBtn:hover,
#taskList li button:hover {
    background: linear-gradient(135deg, #E6C252, #E6D189) !important;
    border-color: #FFE699 !important;
}

/* MODALS */
.print-modal-content,
.pin-modal-content,
.hide-notes-modal,
.hide-password-setup-content,
.otp-modal-content {
    background: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    color: #FFD966 !important;
}

.print-modal-content h3,
.pin-modal-content h2,
.hide-notes-modal h3,
.hide-password-setup-content h3,
.otp-header h3 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.btn-confirm,
#confirmPin,
#confirmHide,
.setup-btn,
.otp-btn {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

.btn-confirm:hover,
#confirmPin:hover,
#confirmHide:hover,
.setup-btn:hover,
.otp-btn:hover {
    background: linear-gradient(135deg, #E6C252, #E6D189) !important;
    border-color: #FFE699 !important;
}

/* FEEDBACK MESSAGES */
.copy-paste-success,
.copy-paste-error,
.copy-paste-info,
#copyPasteFeedback {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
}

/* SEARCH INPUT */
#searchInput {
    border: 1px solid #FFD966 !important;
}

#searchInput:focus {
    border-color: #FFE699 !important;
    box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.1) !important;
}

/* ALL HEADLINES FOLLOW SAME THEME */
h1, h2, h3, h4, h5, h6,
.editor-content h3,
.auth-header h1,
.print-modal-content h3,
.pin-modal-content h2,
.hide-notes-modal h3,
.otp-header h3,
.setup-header h3 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699, #FFD966, #FFD700) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-weight: 700 !important;
}


/* === QUICK TEMPLATES THEME - WORKS FOR BOTH LIGHT & DARK MODES === */

/* Templates Section Container */
.templates-section { 
    margin: 25px 0; 
    padding: 25px; 
    background: var(--bg-color, #ffffff) !important;
    border-radius: 20px; 
    border: 2px solid #FFD966 !important;
    position: relative; 
    overflow: hidden; 
    box-shadow: 0 8px 32px rgba(255, 215, 0, 0.15) !important;
} 

/* Section Header */
.section-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    margin-bottom: 25px; 
    position: relative; 
} 

.section-header h3 { 
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-size: 24px; 
    font-weight: 700; 
    margin: 0; 
} 

.header-decoration { 
    display: flex; 
    gap: 8px; 
} 

.decoration-star { 
    font-size: 16px; 
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    animation: starTwinkle 3s ease-in-out infinite; 
} 

/* Templates Grid */
.templates-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
    gap: 20px; 
    margin-bottom: 20px; 
} 

/* Template Cards */
.template-card { 
    background: var(--bg-color, #ffffff) !important;
    border-radius: 16px; 
    padding: 25px 20px; 
    text-align: center; 
    cursor: pointer; 
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
    border: 2px solid #FFD966 !important;
    position: relative; 
    overflow: hidden; 
    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.1) !important;
    min-height: 140px; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center; 
} 

/* Card Glow Effect */
.card-glow { 
    position: absolute; 
    top: -10px; 
    left: -10px; 
    right: -10px; 
    bottom: -10px; 
    background: radial-gradient(circle at center, rgba(255, 215, 0, 0.3) 0%, transparent 70%); 
    opacity: 0; 
    transition: opacity 0.3s ease; 
    border-radius: 20px; 
    z-index: -1; 
    filter: blur(15px); 
} 

/* HOVER EFFECT - SAME FOR BOTH THEMES */
.template-card:hover { 
    transform: translateY(-8px) scale(1.05); 
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.5), 0 15px 35px rgba(255, 215, 0, 0.3) !important;
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    border-color: #FFE699 !important;
} 

.template-card:hover .card-glow { 
    opacity: 1; 
} 

.template-card:hover .template-icon { 
    transform: scale(1.2) rotate(5deg); 
} 

/* Template Content - SAME FOR BOTH THEMES */
.template-icon { 
    font-size: 42px; 
    margin-bottom: 12px; 
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2)); 
    transition: transform 0.3s ease; 
} 

.template-name { 
    font-size: 16px; 
    font-weight: 600; 
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    margin-bottom: 8px; 
} 

.template-badge { 
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    padding: 4px 12px; 
    border-radius: 20px; 
    font-size: 11px; 
    font-weight: 600; 
    border: 1px solid #FFD966 !important;
    transition: all 0.3s ease; 
} 

/* Hover Text Colors - SAME FOR BOTH THEMES */
.template-card:hover .template-name {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important;
    font-weight: 700 !important;
}

.template-card:hover .template-badge {
    background: #1B1A17 !important;
    color: #FFD966 !important;
    border: 1px solid #1B1A17 !important;
}

.template-card:hover .template-icon { 
    filter: drop-shadow(0 4px 8px rgba(27, 26, 23, 0.5)) !important;
} 

/* Templates Footer */
.templates-footer { 
    text-align: center; 
    padding-top: 20px; 
    border-top: 1px solid rgba(255, 215, 0, 0.2); 
    position: relative; 
    overflow: hidden; 
} 

.templates-footer p { 
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-size: 14px; 
    font-weight: 500; 
    margin: 0; 
    position: relative; 
    z-index: 2; 
} 

/* Floating Orbs */
.floating-orb { 
    position: absolute; 
    border-radius: 50%; 
    filter: blur(20px); 
    opacity: 0.6; 
    animation: floatOrb 8s ease-in-out infinite; 
} 

.orb-1 { 
    width: 60px; 
    height: 60px; 
    background: rgba(255, 215, 0, 0.3); 
    top: -30px; 
    left: 20%; 
    animation-delay: 0s; 
} 

.orb-2 { 
    width: 40px; 
    height: 40px; 
    background: rgba(255, 215, 0, 0.2); 
    top: -20px; 
    right: 25%; 
    animation-delay: 2s; 
} 

/* Animations */
@keyframes starTwinkle { 
    0%, 100% { 
        opacity: 0.5; 
        transform: scale(1); 
    } 
    50% { 
        opacity: 1; 
        transform: scale(1.2); 
    } 
} 

@keyframes floatOrb { 
    0%, 100% { 
        transform: translateY(0) translateX(0); 
    } 
    25% { 
        transform: translateY(-10px) translateX(10px); 
    } 
    50% { 
        transform: translateY(-5px) translateX(-5px); 
    } 
    75% { 
        transform: translateY(-15px) translateX(5px); 
    } 
} 

@keyframes cardPulse { 
    0% { 
        box-shadow: 0 8px 25px rgba(255, 215, 0, 0.1); 
    } 
    50% { 
        box-shadow: 0 8px 25px rgba(255, 215, 0, 0.2), 0 0 25px rgba(255, 215, 0, 0.3); 
    } 
    100% { 
        box-shadow: 0 8px 25px rgba(255, 215, 0, 0.1); 
    } 
} 

/* Pulse animation for cards */
.template-card:nth-child(odd) { 
    animation: cardPulse 4s ease-in-out infinite; 
} 

.template-card:nth-child(even) { 
    animation: cardPulse 4s ease-in-out 2s infinite; 
} 

/* Responsive adjustments */
@media (max-width: 768px) { 
    .templates-section { 
        padding: 20px 15px; 
        margin: 15px 0; 
    } 

    .templates-grid { 
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
        gap: 15px; 
    } 

    .template-card { 
        padding: 20px 15px; 
        min-height: 120px; 
    } 

    .template-icon { 
        font-size: 36px; 
    } 

    .template-name { 
        font-size: 14px; 
    } 

    .section-header h3 { 
        font-size: 20px; 
    } 
} 

@media (max-width: 480px) { 
    .templates-grid { 
        grid-template-columns: repeat(2, 1fr); 
    } 

    .section-header { 
        flex-direction: column; 
        gap: 10px; 
        text-align: center; 
    } 
}


/* === CONSISTENT GOLDEN HOVER EFFECTS FOR ALL ELEMENTS === */

/* NOTE ITEMS HOVER */
.note-item:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3), 0 4px 15px rgba(255, 215, 0, 0.2) !important;
    border-color: #FFE699 !important;
    background: linear-gradient(135deg, var(--bg-color), rgba(255, 215, 0, 0.05)) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* TEMPLATE BUTTON HOVER */
.toolbar-button:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4), 0 3px 12px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* FONT STYLE BUTTON HOVER */
.style-button:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4), 0 3px 12px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* OPTION BUTTONS HOVER */
.option-btn:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4), 0 3px 12px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* SMALL BUTTONS HOVER */
.small-btn:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px) scale(1.03);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4), 0 2px 8px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* PRIMARY BUTTONS HOVER */
.btn-primary:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px) scale(1.03);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5), 0 3px 12px rgba(255, 215, 0, 0.4) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* MENU ITEMS HOVER */
.menu-item:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    transform: translateX(5px);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.menu-item:hover span {
    color: #1B1A17 !important;
    font-weight: 600;
}

.menu-item:hover i {
    color: #1B1A17 !important;
}

/* CONTAINER ELEMENTS HOVER */
.note-container:hover {
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.25), 0 8px 35px rgba(255, 215, 0, 0.15) !important;
    border-color: #FFE699 !important;
    transition: all 0.3s ease;
}

/* SEARCH INPUT HOVER & FOCUS */
#searchInput:hover {
    border-color: #FFD966 !important;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.2) !important;
    transition: all 0.3s ease;
}

#searchInput:focus {
    border-color: #FFE699 !important;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.4), 0 0 0 2px rgba(255, 215, 0, 0.1) !important;
    transition: all 0.3s ease;
}

/* HAMBURGER MENU HOVER */
.hamburger-btn:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    transform: scale(1.1);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.hamburger-btn:hover .hamburger-line {
    background: #1B1A17 !important;
}

/* THEME TOGGLE BUTTON HOVER */
.theme-toggle:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* EDITOR CONTAINER HOVER */
.note-editor:hover {
    box-shadow: 0 0 40px rgba(255, 215, 0, 0.3), 0 10px 40px rgba(255, 215, 0, 0.2) !important;
    border-color: #FFE699 !important;
    transition: all 0.3s ease;
}

/* DROPDOWN OPTIONS HOVER */
.font-option:hover,
.template-option:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    transform: translateX(5px);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.font-option:hover .font-preview,
.font-option:hover .font-sample,
.template-option:hover {
    color: #1B1A17 !important;
    font-weight: 600;
}

/* ATTACHMENT ITEMS HOVER */
.attachment-item:hover {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 223, 100, 0.05)) !important;
    border-color: #FFD966 !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2) !important;
    transition: all 0.3s ease;
}

/* TODO LIST ITEMS HOVER */
#taskList li:hover {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 223, 100, 0.05)) !important;
    border-color: #FFD966 !important;
    transform: translateX(5px);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2) !important;
    transition: all 0.3s ease;
}

/* EXPORT BUTTONS HOVER */
.export-main-btn:hover,
.export-option:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* PIN BUTTON HOVER */
.pin-btn:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s ease;
}

/* EDIT/DELETE BUTTONS HOVER */
.edit-btn:hover,
.delete-btn:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s ease;
}

/* SHARING BUTTONS HOVER */
.share-btn:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-3px) scale(1.03);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* ZOOM CONTROLS HOVER */
.zoom-controls button:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s ease;
}

/* UNDO/REDO BUTTONS HOVER */
#undoBtn:hover,
#redoBtn:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* CUT/COPY/PASTE BUTTONS HOVER */
#cutBtn:hover,
#copyBtn:hover,
#pasteBtn:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* ADD TASK BUTTON HOVER */
#addTaskBtn:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* TASK LIST BUTTONS HOVER */
#taskList li button:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3) !important;
    transition: all 0.3s ease;
}


/* === HAMBURGER MENU THEME UPDATE - TEXT ONLY === */

/* Menu Items Text Colors */
.menu-item span {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-weight: 500;
}

/* Profile Text */
.profile-username {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-weight: 700;
}

.profile-email {
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

/* Hover States - Text becomes solid dark */
.menu-item:hover span {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important;
    font-weight: 600;
}

/* Dark Mode Support - Same golden text */
body.dark-mode .menu-item span,
body.dark-mode .profile-username,
body.dark-mode .profile-email {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

body.dark-mode .menu-item:hover span {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important;
}

/* Light Mode Support - Same golden text */
body:not(.dark-mode) .menu-item span,
body:not(.dark-mode) .profile-username,
body:not(.dark-mode) .profile-email {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

body:not(.dark-mode) .menu-item:hover span {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important;
}


/* === HAMBURGER BUTTON & MENU ITEMS THEME === */

/* Hamburger Button Background */
.hamburger-btn {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
}

.hamburger-btn:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
}

.hamburger-btn.active {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
}

/* Menu Items Icons - Keep Same in Both Themes */
.menu-item i {
    color: #FFD966 !important;
}

.menu-item:hover i {
    color: #1B1A17 !important;
}

/* Hide Notes Dropdown Menu - Same Golden Theme */
.hide-notes-modal {
    border: 2px solid #FFD966 !important;
}

.hide-notes-modal h3 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

#noteCheckboxes label {
    border: 1px solid #FFD966 !important;
}

#noteCheckboxes label:hover {
    background: rgba(255, 215, 0, 0.1) !important;
    border-color: #FFE699 !important;
}

#confirmHide {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

#confirmHide:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
}


/* === COMPLETE GOLDEN THEME TRANSFORMATION === */

/* ===== BUTTONS ===== */
/* All buttons with golden gradient */
button,
.btn-primary,
.small-btn,
.style-button,
.toolbar-button,
.option-btn,
.pin-btn,
.edit-btn,
.delete-btn,
.share-btn,
.export-main-btn,
.export-option,
.setup-btn,
.otp-btn,
.btn-confirm,
#confirmPin,
#confirmHide,
#addTaskBtn,
#taskList li button,
#undoBtn,
#redoBtn,
#cutBtn,
#copyBtn,
#pasteBtn,
#zoomInBtn,
#zoomOutBtn,
#addImageBtn,
#addAudioBtn,
#voiceToTextBtn,
#addTodoBtn,
#saveNoteBtn,
#cancelNoteBtn,
#savePdfBtn,
#emailNoteBtn,
#downloadNoteBtn,
#newNoteBtn,
#themeToggle,
.hamburger-btn {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

/* Button hover states */
button:hover,
.btn-primary:hover,
.small-btn:hover,
.style-button:hover,
.toolbar-button:hover,
.option-btn:hover,
.pin-btn:hover,
.edit-btn:hover,
.delete-btn:hover,
.share-btn:hover,
.export-main-btn:hover,
.export-option:hover,
.setup-btn:hover,
.otp-btn:hover,
.btn-confirm:hover,
#confirmPin:hover,
#confirmHide:hover,
#addTaskBtn:hover,
#taskList li button:hover,
#undoBtn:hover,
#redoBtn:hover,
#cutBtn:hover,
#copyBtn:hover,
#pasteBtn:hover,
#zoomInBtn:hover,
#zoomOutBtn:hover,
#addImageBtn:hover,
#addAudioBtn:hover,
#voiceToTextBtn:hover,
#addTodoBtn:hover,
#saveNoteBtn:hover,
#cancelNoteBtn:hover,
#savePdfBtn:hover,
#emailNoteBtn:hover,
#downloadNoteBtn:hover,
#newNoteBtn:hover,
#themeToggle:hover,
.hamburger-btn:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
}

/* ===== CONTAINERS ===== */
/* All containers with golden borders */
.note-container,
.note-editor,
.menu-items,
.templates-section,
.template-card,
.todo-container,
.print-modal-content,
.pin-modal-content,
.hide-notes-modal,
.hide-password-setup-content,
.otp-modal-content,
.dropdown-content,
.template-dropdown,
.auth-card {
    border: 2px solid #FFD966 !important;
}

/* ===== INPUT FIELDS ===== */
/* Input fields with golden borders */
input,
textarea,
#noteTitle,
#Tag,
#noteContent,
#searchInput,
#taskInput,
.password-form input,
.otp-box,
#printSelectDropdown,
.hide-dropdown,
.print-dropdown {
    border: 1px solid #FFD966 !important;
}

/* Input focus states */
input:focus,
textarea:focus,
#noteTitle:focus,
#Tag:focus,
#noteContent:focus,
#searchInput:focus,
#taskInput:focus,
.password-form input:focus,
.otp-box:focus,
#printSelectDropdown:focus,
.hide-dropdown:focus,
.print-dropdown:focus {
    border-color: #FFE699 !important;
    outline: none !important;
}

/* ===== TEXT ELEMENTS ===== */
/* All golden gradient text */
h1, h2, h3, h4, h5, h6,
.app-name h1,
.auth-header h1,
.brand-name,
.section-header h3,
.template-name,
.templates-footer p,
.profile-username,
.menu-item span,
.print-modal-content h3,
.pin-modal-content h2,
.hide-notes-modal h3,
.otp-header h3,
.setup-header h3,
.auth-header p,
.loading-text,
.hint,
.percentage {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

/* ===== DECORATIVE ELEMENTS ===== */
/* Orbs and glow effects */
.animated-orb.orb-1 {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 223, 100, 0.15)) !important;
}

.animated-orb.orb-2 {
    background: linear-gradient(135deg, rgba(255, 223, 100, 0.15), rgba(255, 215, 0, 0.2)) !important;
}

.glow-ring {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
}

.particle {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.4), rgba(255, 223, 100, 0.3)) !important;
}

.dot {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
}

.divider {
    background: linear-gradient(to right, transparent, #FFD700, #FFD966, #FFE699, transparent) !important;
}

/* ===== LOADING AND PROGRESS ===== */
.loading-bar {
    background: linear-gradient(90deg, #FFD700, #FFD966, #FFE699, #FFD966, #FFD700) !important;
}

.loading-container::before {
    background: radial-gradient(circle, rgba(255, 215, 0, 0.1), rgba(255, 223, 100, 0.05)) !important;
}

/* ===== ICONS ===== */
/* Menu and UI icons */
.menu-item i,
.menu-item.export-pdf i,
.menu-item.duplicate-note i,
.menu-item.print-menu-option i,
.menu-item.logout-menu i,
.input-icon,
.password-toggle,
.decoration-star {
    color: #FFD966 !important;
}

/* Icon hover states */
.menu-item:hover i,
.menu-item:hover.export-pdf i,
.menu-item:hover.duplicate-note i,
.menu-item:hover.print-menu-option i,
.menu-item:hover.logout-menu i {
    color: #1B1A17 !important;
}

/* ===== BADGES AND LABELS ===== */
.template-badge {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

/* ===== BACKGROUND ELEMENTS ===== */
/* Subtle golden backgrounds */
.datetime-display {
    background: rgba(255, 215, 0, 0.05) !important;
}

.note-item:hover {
    background: rgba(255, 215, 0, 0.05) !important;
}

.attachment-item:hover {
    background: rgba(255, 215, 0, 0.05) !important;
}

#taskList li:hover {
    background: rgba(255, 215, 0, 0.05) !important;
}

.font-option:hover,
.template-option:hover {
    background: rgba(255, 215, 0, 0.1) !important;
}

/* ===== CHECKBOXES AND SELECTIONS ===== */
#noteCheckboxes input[type="checkbox"] {
    accent-color: #FFD966 !important;
}

#noteCheckboxes label:has(input[type="checkbox"]:checked) {
    background: rgba(255, 215, 0, 0.1) !important;
    border-color: #FFD966 !important;
}

.font-option.selected {
    background: rgba(255, 215, 0, 0.15) !important;
}

/* ===== FEEDBACK MESSAGES ===== */
.copy-paste-success,
.copy-paste-error,
.copy-paste-info,
#copyPasteFeedback {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
}

/* ===== HAMBURGER SPECIFIC ===== */
.hamburger-line {
    background: #1B1A17 !important;
}

.profile-avatar {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
}

/* ===== BORDER SEPARATORS ===== */
.profile-section,
.menu-item,
.modal-buttons,
.templates-footer,
.section-header h3 {
    border-bottom-color: #FFD966 !important;
}

.menu-item.logout-menu {
    border-top-color: #FFD966 !important;
}

/* ===== SHADOWS AND GLOWS ===== */
/* Remove existing shadows and replace with golden ones */
.note-container,
.note-editor,
.templates-section,
.template-card,
.auth-card,
.menu-items,
.print-modal-content,
.pin-modal-content,
.hide-notes-modal {
    box-shadow: 0 4px 20px rgba(255, 215, 0, 0.15) !important;
}

.note-item:hover,
.template-card:hover,
.menu-item:hover {
    box-shadow: 0 6px 25px rgba(255, 215, 0, 0.25) !important;
}

button:hover,
.btn-primary:hover,
.small-btn:hover {
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3) !important;
}


/* === FIXED ICONS & BUTTON CONSISTENCY === */

/* ===== TODO LIST BUTTONS ===== */
#addTaskBtn,
#taskList li button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

#addTaskBtn:hover,
#taskList li button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
}

/* ===== TEMPLATE & FONT STYLE BUTTONS ===== */
.toolbar-button,
.style-button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

.toolbar-button:hover,
.style-button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
}

/* ===== HAMBURGER MENU ICONS - BLACK IN BOTH THEMES ===== */
.menu-item i,
.menu-item.export-pdf i,
.menu-item.duplicate-note i,
.menu-item.print-menu-option i,
.menu-item.logout-menu i {
    color: #1B1A17 !important; /* Black in both themes */
}

.menu-item:hover i,
.menu-item:hover.export-pdf i,
.menu-item:hover.duplicate-note i,
.menu-item:hover.print-menu-option i,
.menu-item:hover.logout-menu i {
    color: #1B1A17 !important; /* Stay black on hover */
}

/* Dark mode hamburger menu icons */
body.dark-mode .menu-item i,
body.dark-mode .menu-item.export-pdf i,
body.dark-mode .menu-item.duplicate-note i,
body.dark-mode .menu-item.print-menu-option i,
body.dark-mode .menu-item.logout-menu i {
    color: #1B1A17 !important; /* Black in dark mode too */
}

/* ===== SHARING BUTTONS ICONS - BLACK IN BOTH THEMES ===== */
#savePdfBtn i,
#emailNoteBtn i,
#downloadNoteBtn i {
    color: #1B1A17 !important; /* Black icons */
}

#savePdfBtn:hover i,
#emailNoteBtn:hover i,
#downloadNoteBtn:hover i {
    color: #1B1A17 !important; /* Stay black on hover */
}

/* Dark mode sharing buttons icons */
body.dark-mode #savePdfBtn i,
body.dark-mode #emailNoteBtn i,
body.dark-mode #downloadNoteBtn i {
    color: #1B1A17 !important; /* Black in dark mode too */
}

/* ===== SHARING BUTTONS STYLING ===== */
#savePdfBtn,
#emailNoteBtn,
#downloadNoteBtn {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

#savePdfBtn:hover,
#emailNoteBtn:hover,
#downloadNoteBtn:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
}

/* ===== ENHANCED VISIBILITY FOR BOTH THEMES ===== */
/* Ensure good contrast in both themes */
body.dark-mode .menu-item,
body.dark-mode .menu-items {
    background: #1B1A17 !important;
}

body.dark-mode .menu-item:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
}

body:not(.dark-mode) .menu-item,
body:not(.dark-mode) .menu-items {
    background: #ffffff !important;
}

body:not(.dark-mode) .menu-item:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
}

/* ===== INPUT ICONS - GOLDEN THEME ===== */
.input-icon,
.password-toggle {
    color: #FFD966 !important; /* Golden for input icons */
}

/* ===== DECORATIVE ICONS - GOLDEN THEME ===== */
.decoration-star {
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

/* ===== BUTTON TEXT CONSISTENCY ===== */
/* Ensure all button text is dark for readability */
button,
.btn-primary,
.small-btn,
.style-button,
.toolbar-button,
.option-btn,
.pin-btn,
.edit-btn,
.delete-btn,
.share-btn,
.export-main-btn,
.export-option,
.setup-btn,
.otp-btn,
.btn-confirm,
#confirmPin,
#confirmHide,
#addTaskBtn,
#taskList li button,
#undoBtn,
#redoBtn,
#cutBtn,
#copyBtn,
#pasteBtn,
#zoomInBtn,
#zoomOutBtn,
#addImageBtn,
#addAudioBtn,
#voiceToTextBtn,
#addTodoBtn,
#saveNoteBtn,
#cancelNoteBtn,
#savePdfBtn,
#emailNoteBtn,
#downloadNoteBtn,
#newNoteBtn,
#themeToggle,
.hamburger-btn {
    color: #1B1A17 !important; /* Dark text for all buttons */
}

button:hover,
.btn-primary:hover,
.small-btn:hover,
.style-button:hover,
.toolbar-button:hover,
.option-btn:hover,
.pin-btn:hover,
.edit-btn:hover,
.delete-btn:hover,
.share-btn:hover,
.export-main-btn:hover,
.export-option:hover,
.setup-btn:hover,
.otp-btn:hover,
.btn-confirm:hover,
#confirmPin:hover,
#confirmHide:hover,
#addTaskBtn:hover,
#taskList li button:hover,
#undoBtn:hover,
#redoBtn:hover,
#cutBtn:hover,
#copyBtn:hover,
#pasteBtn:hover,
#zoomInBtn:hover,
#zoomOutBtn:hover,
#addImageBtn:hover,
#addAudioBtn:hover,
#voiceToTextBtn:hover,
#addTodoBtn:hover,
#saveNoteBtn:hover,
#cancelNoteBtn:hover,
#savePdfBtn:hover,
#emailNoteBtn:hover,
#downloadNoteBtn:hover,
#newNoteBtn:hover,
#themeToggle:hover,
.hamburger-btn:hover {
    color: #1B1A17 !important; /* Stay dark on hover */
}


/* === HAMBURGER MENU ICONS - GOLDEN IN DARK MODE ONLY === */

/* Light Mode - Black Icons */
body:not(.dark-mode) .menu-item i,
body:not(.dark-mode) .menu-item.export-pdf i,
body:not(.dark-mode) .menu-item.duplicate-note i,
body:not(.dark-mode) .menu-item.print-menu-option i,
body:not(.dark-mode) .menu-item.logout-menu i {
    color: #1B1A17 !important; /* Black in light mode */
}

body:not(.dark-mode) .menu-item:hover i,
body:not(.dark-mode) .menu-item:hover.export-pdf i,
body:not(.dark-mode) .menu-item:hover.duplicate-note i,
body:not(.dark-mode) .menu-item:hover.print-menu-option i,
body:not(.dark-mode) .menu-item:hover.logout-menu i {
    color: #1B1A17 !important; /* Stay black on hover in light mode */
}

/* Dark Mode - Golden Icons */
body.dark-mode .menu-item i,
body.dark-mode .menu-item.export-pdf i,
body.dark-mode .menu-item.duplicate-note i,
body.dark-mode .menu-item.print-menu-option i,
body.dark-mode .menu-item.logout-menu i {
    color: #FFD966 !important; /* Golden in dark mode */
}

body.dark-mode .menu-item:hover i,
body.dark-mode .menu-item:hover.export-pdf i,
body.dark-mode .menu-item:hover.duplicate-note i,
body.dark-mode .menu-item:hover.print-menu-option i,
body.dark-mode .menu-item:hover.logout-menu i {
    color: #1B1A17 !important; /* Black on hover in dark mode */
}


/* === FONT STYLE & TEMPLATE BUTTONS LAYOUT === */

/* Container for both dropdowns */
.toolbar-group {
    display: flex !important;
    gap: 10px !important;
    align-items: center !important;
}

/* Font selector and template selector side by side */
.font-selector,
.template-selector {
    display: inline-block !important;
    margin-right: 10px !important;
}

/* Ensure buttons have consistent sizing */
.style-button,
.toolbar-button {
    min-width: 120px !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 8px 12px !important;
}

/* Dropdown scroll functionality */
.dropdown-content,
.template-dropdown {
    max-height: 300px !important;
    overflow-y: auto !important;
    scrollbar-width: thin !important;
    scrollbar-color: #FFD966 var(--bg-color) !important;
}

/* Custom scrollbar for webkit browsers */
.dropdown-content::-webkit-scrollbar,
.template-dropdown::-webkit-scrollbar {
    width: 6px !important;
}

.dropdown-content::-webkit-scrollbar-track,
.template-dropdown::-webkit-scrollbar-track {
    background: var(--bg-color) !important;
    border-radius: 3px !important;
}

.dropdown-content::-webkit-scrollbar-thumb,
.template-dropdown::-webkit-scrollbar-thumb {
    background: #FFD966 !important;
    border-radius: 3px !important;
}

.dropdown-content::-webkit-scrollbar-thumb:hover,
.template-dropdown::-webkit-scrollbar-thumb:hover {
    background: #FFE699 !important;
}

/* Dropdown options styling */
.font-option,
.template-option {
    padding: 10px 12px !important;
    min-height: auto !important;
    border-bottom: 1px solid rgba(255, 215, 0, 0.2) !important;
}

.font-option:last-child,
.template-option:last-child {
    border-bottom: none !important;
}

/* Font preview text sizing */
.font-preview {
    font-size: 14px !important;
    font-weight: 600 !important;
}

.font-sample {
    font-size: 12px !important;
    opacity: 0.8 !important;
}

/* Ensure dropdowns don't extend too far */
.dropdown-content {
    width: 220px !important;
}

.template-dropdown {
    width: 180px !important;
}

/* Responsive design */
@media (max-width: 768px) {
    .toolbar-group {
        flex-wrap: wrap !important;
        gap: 8px !important;
    }
    
    .font-selector,
    .template-selector {
        margin-right: 5px !important;
    }
    
    .style-button,
    .toolbar-button {
        min-width: 110px !important;
        font-size: 13px !important;
    }
    
    .dropdown-content {
        width: 200px !important;
    }
    
    .template-dropdown {
        width: 160px !important;
    }
}


/* === FONT STYLE & TEMPLATE BUTTONS - CONSISTENT THEME (NO GLOW) === */

/* Font Style Button - Match Other Editor Buttons */
.style-button {
    background: var(--bg-color) !important;
    color: var(--text-color) !important;
    border: 1px solid #FFD966 !important;
    min-width: 120px !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 8px 12px !important;
    transition: all 0.2s ease !important;
}

.style-button:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-1px);
    /* No glow effect */
}

/* Template Button - Match Other Editor Buttons */
.toolbar-button {
    background: var(--bg-color) !important;
    color: var(--text-color) !important;
    border: 1px solid #FFD966 !important;
    min-width: 120px !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 8px 12px !important;
    transition: all 0.2s ease !important;
}

.toolbar-button:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-1px);
    /* No glow effect */
}

/* Container for both dropdowns */
.toolbar-group {
    display: flex !important;
    gap: 10px !important;
    align-items: center !important;
}

/* Font selector and template selector side by side */
.font-selector,
.template-selector {
    display: inline-block !important;
    margin-right: 10px !important;
}

/* Dropdown containers */
.dropdown-content,
.template-dropdown {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
    max-height: 300px !important;
    overflow-y: auto !important;
    scrollbar-width: thin !important;
    scrollbar-color: #FFD966 var(--bg-color) !important;
    /* No glow effect */
}

/* Dropdown options */
.font-option,
.template-option {
    background: var(--bg-color) !important;
    color: var(--text-color) !important;
    border-bottom: 1px solid rgba(255, 215, 0, 0.2) !important;
    padding: 10px 12px !important;
    transition: all 0.2s ease !important;
}

.font-option:hover,
.template-option:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    /* No glow effect */
}

/* Custom scrollbar for webkit browsers */
.dropdown-content::-webkit-scrollbar,
.template-dropdown::-webkit-scrollbar {
    width: 6px !important;
}

.dropdown-content::-webkit-scrollbar-track,
.template-dropdown::-webkit-scrollbar-track {
    background: var(--bg-color) !important;
    border-radius: 3px !important;
}

.dropdown-content::-webkit-scrollbar-thumb,
.template-dropdown::-webkit-scrollbar-thumb {
    background: #FFD966 !important;
    border-radius: 3px !important;
}

.dropdown-content::-webkit-scrollbar-thumb:hover,
.template-dropdown::-webkit-scrollbar-thumb:hover {
    background: #FFE699 !important;
}

/* Ensure dropdowns don't extend too far */
.dropdown-content {
    width: 220px !important;
}

.template-dropdown {
    width: 180px !important;
}

/* Font preview text */
.font-preview {
    font-size: 14px !important;
    font-weight: 600 !important;
}

.font-sample {
    font-size: 12px !important;
    opacity: 0.8 !important;
}

/* Selected font option */
.font-option.selected {
    background: rgba(255, 215, 0, 0.1) !important;
    border-left: 3px solid #FFD966 !important;
}

/* Responsive design */
@media (max-width: 768px) {
    .toolbar-group {
        flex-wrap: wrap !important;
        gap: 8px !important;
    }
    
    .font-selector,
    .template-selector {
        margin-right: 5px !important;
    }
    
    .style-button,
    .toolbar-button {
        min-width: 110px !important;
        font-size: 13px !important;
    }
    
    .dropdown-content {
        width: 200px !important;
    }
    
    .template-dropdown {
        width: 160px !important;
    }
}


/* === FONT STYLE & TEMPLATE BUTTONS - GOLDEN THEME ONLY === */

/* Font Style Button - Golden Theme */
.style-button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
    min-width: 120px !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 6px 10px !important;
    font-size: 12px !important;
    transition: all 0.2s ease !important;
    border-radius: 4px !important;
}

.style-button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: none !important;
}

/* Template Button - Golden Theme */
.toolbar-button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
    min-width: 120px !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 6px 10px !important;
    font-size: 12px !important;
    transition: all 0.2s ease !important;
    border-radius: 4px !important;
}

.toolbar-button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: none !important;
}

/* Same for both light and dark modes - Golden theme stays consistent */
body.dark-mode .style-button,
body.dark-mode .toolbar-button,
body:not(.dark-mode) .style-button,
body:not(.dark-mode) .toolbar-button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

body.dark-mode .style-button:hover,
body.dark-mode .toolbar-button:hover,
body:not(.dark-mode) .style-button:hover,
body:not(.dark-mode) .toolbar-button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
}

/* Container for both dropdowns */
.toolbar-group {
    display: flex !important;
    gap: 10px !important;
    align-items: center !important;
}

/* Font selector and template selector side by side */
.font-selector,
.template-selector {
    display: inline-block !important;
    margin-right: 10px !important;
}

/* Dropdown containers - Golden theme */
.dropdown-content,
.template-dropdown {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
    max-height: 300px !important;
    overflow-y: auto !important;
    scrollbar-width: thin !important;
    border-radius: 4px !important;
}

/* Dropdown options */
.font-option,
.template-option {
    background: var(--bg-color) !important;
    color: var(--text-color) !important;
    border-bottom: 1px solid rgba(255, 215, 0, 0.2) !important;
    padding: 10px 12px !important;
    transition: all 0.2s ease !important;
    font-size: 12px !important;
}

.font-option:hover,
.template-option:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
}

/* Custom scrollbar - Golden theme */
.dropdown-content::-webkit-scrollbar,
.template-dropdown::-webkit-scrollbar {
    width: 6px !important;
}

.dropdown-content::-webkit-scrollbar-track,
.template-dropdown::-webkit-scrollbar-track {
    background: var(--bg-color) !important;
    border-radius: 3px !important;
}

.dropdown-content::-webkit-scrollbar-thumb,
.template-dropdown::-webkit-scrollbar-thumb {
    background: #FFD966 !important;
    border-radius: 3px !important;
}

.dropdown-content::-webkit-scrollbar-thumb:hover,
.template-dropdown::-webkit-scrollbar-thumb:hover {
    background: #FFE699 !important;
}

/* Ensure dropdowns don't extend too far */
.dropdown-content {
    width: 220px !important;
}

.template-dropdown {
    width: 180px !important;
}

/* Font preview text */
.font-preview {
    font-size: 14px !important;
    font-weight: 600 !important;
}

.font-sample {
    font-size: 12px !important;
    opacity: 0.8 !important;
}

/* Selected font option - Golden theme */
.font-option.selected {
    background: rgba(255, 215, 0, 0.15) !important;
    border-left: 3px solid #FFD966 !important;
}

/* Responsive design */
@media (max-width: 768px) {
    .toolbar-group {
        flex-wrap: wrap !important;
        gap: 8px !important;
    }
    
    .font-selector,
    .template-selector {
        margin-right: 5px !important;
    }
    
    .style-button,
    .toolbar-button {
        min-width: 110px !important;
        font-size: 11px !important;
        padding: 5px 8px !important;
    }
    
    .dropdown-content {
        width: 200px !important;
    }
    
    .template-dropdown {
        width: 160px !important;
    }
}


/* === FONT STYLE & TEMPLATE BUTTONS - GOLDEN TEXT THEME === */

/* Font Style Button - Golden Text */
.style-button {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
    min-width: 120px !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 6px 10px !important;
    font-size: 12px !important;
    transition: all 0.2s ease !important;
    border-radius: 4px !important;
}

.style-button span {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.style-button:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    border-color: #FFE699 !important;
    transform: none !important;
}

.style-button:hover span {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important;
}

/* Template Button - Golden Text */
.toolbar-button {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
    min-width: 120px !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 6px 10px !important;
    font-size: 12px !important;
    transition: all 0.2s ease !important;
    border-radius: 4px !important;
}

.toolbar-button span {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.toolbar-button:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    border-color: #FFE699 !important;
    transform: none !important;
}

.toolbar-button:hover span {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important;
}


/* Same for both light and dark modes */
body.dark-mode .style-button,
body.dark-mode .toolbar-button {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
}

body.dark-mode .style-button span,
body.dark-mode .toolbar-button span {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

body.dark-mode .style-button:hover,
body.dark-mode .toolbar-button:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    border-color: #FFE699 !important;
}

body.dark-mode .style-button:hover span,
body.dark-mode .toolbar-button:hover span {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important;
}

/* Container for both dropdowns */
.toolbar-group {
    display: flex !important;
    gap: 10px !important;
    align-items: center !important;
}

/* Font selector and template selector side by side */
.font-selector,
.template-selector {
    display: inline-block !important;
    margin-right: 10px !important;
}

/* Dropdown containers - Golden theme */
.dropdown-content,
.template-dropdown {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
    max-height: 300px !important;
    overflow-y: auto !important;
    scrollbar-width: thin !important;
    border-radius: 4px !important;
}

/* Dropdown options with golden text */
.font-option,
.template-option {
    background: var(--bg-color) !important;
    border-bottom: 1px solid rgba(255, 215, 0, 0.2) !important;
    padding: 10px 12px !important;
    transition: all 0.2s ease !important;
    font-size: 12px !important;
}

.font-option .font-preview,
.font-option .font-sample,
.template-option {
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

.font-option:hover,
.template-option:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
}

.font-option:hover .font-preview,
.font-option:hover .font-sample,
.template-option:hover {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important;
}

/* Custom scrollbar - Golden theme */
.dropdown-content::-webkit-scrollbar,
.template-dropdown::-webkit-scrollbar {
    width: 6px !important;
}

.dropdown-content::-webkit-scrollbar-track,
.template-dropdown::-webkit-scrollbar-track {
    background: var(--bg-color) !important;
    border-radius: 3px !important;
}

.dropdown-content::-webkit-scrollbar-thumb,
.template-dropdown::-webkit-scrollbar-thumb {
    background: #FFD966 !important;
    border-radius: 3px !important;
}

.dropdown-content::-webkit-scrollbar-thumb:hover,
.template-dropdown::-webkit-scrollbar-thumb:hover {
    background: #FFE699 !important;
}

/* Ensure dropdowns don't extend too far */
.dropdown-content {
    width: 220px !important;
}

.template-dropdown {
    width: 180px !important;
}

/* Font preview text */
.font-preview {
    font-size: 14px !important;
    font-weight: 600 !important;
}

.font-sample {
    font-size: 12px !important;
    opacity: 0.8 !important;
}

/* Selected font option - Golden theme */
.font-option.selected {
    background: rgba(255, 215, 0, 0.15) !important;
    border-left: 3px solid #FFD966 !important;
}

.font-option.selected .font-preview,
.font-option.selected .font-sample {
    background: linear-gradient(to right, #FFD700, #FFD966) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-weight: 700 !important;
}

/* Responsive design */
@media (max-width: 768px) {
    .toolbar-group {
        flex-wrap: wrap !important;
        gap: 8px !important;
    }
    
    .font-selector,
    .template-selector {
        margin-right: 5px !important;
    }
    
    .style-button,
    .toolbar-button {
        min-width: 110px !important;
        font-size: 11px !important;
        padding: 5px 8px !important;
    }
    
    .dropdown-content {
        width: 200px !important;
    }
    
    .template-dropdown {
        width: 160px !important;
    }
}


/* === FONT STYLE & TEMPLATE BUTTONS - THEME-BASED TEXT COLORS === */

/* Light Mode - Black Text */
body:not(.dark-mode) .style-button span,
body:not(.dark-mode) .toolbar-button span {
    color: #1B1A17 !important; /* Black text in light mode */
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
}

/* Dark Mode - Golden Text */
body.dark-mode .style-button span,
body.dark-mode .toolbar-button span {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

/* Button Base Styles */
.style-button,
.toolbar-button {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
    min-width: 120px !important;
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    padding: 6px 10px !important;
    font-size: 12px !important;
    transition: all 0.2s ease !important;
    border-radius: 4px !important;
}

/* Hover States - Golden Background with Dark Text */
.style-button:hover,
.toolbar-button:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    border-color: #FFE699 !important;
    transform: none !important;
}

.style-button:hover span,
.toolbar-button:hover span {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important; /* Always dark text on hover */
}

/* Same for both light and dark modes on hover */
body.dark-mode .style-button:hover span,
body.dark-mode .toolbar-button:hover span,
body:not(.dark-mode) .style-button:hover span,
body:not(.dark-mode) .toolbar-button:hover span {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important; /* Always dark text on hover */
}

/* Container for both dropdowns */
.toolbar-group {
    display: flex !important;
    gap: 10px !important;
    align-items: center !important;
}

/* Font selector and template selector side by side */
.font-selector,
.template-selector {
    display: inline-block !important;
    margin-right: 10px !important;
}

/* Dropdown containers - Golden theme */
.dropdown-content,
.template-dropdown {
    background: var(--bg-color) !important;
    border: 1px solid #FFD966 !important;
    max-height: 300px !important;
    overflow-y: auto !important;
    scrollbar-width: thin !important;
    border-radius: 4px !important;
}

/* Dropdown options with theme-based text */
.font-option,
.template-option {
    background: var(--bg-color) !important;
    border-bottom: 1px solid rgba(255, 215, 0, 0.2) !important;
    padding: 10px 12px !important;
    transition: all 0.2s ease !important;
    font-size: 12px !important;
}

/* Light Mode - Black Text in Dropdowns */
body:not(.dark-mode) .font-option .font-preview,
body:not(.dark-mode) .font-option .font-sample,
body:not(.dark-mode) .template-option {
    color: #1B1A17 !important; /* Black text in light mode */
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
}

/* Dark Mode - Golden Text in Dropdowns */
body.dark-mode .font-option .font-preview,
body.dark-mode .font-option .font-sample,
body.dark-mode .template-option {
    background: linear-gradient(to right, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
}

/* Hover states for dropdown options */
.font-option:hover,
.template-option:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
}

.font-option:hover .font-preview,
.font-option:hover .font-sample,
.template-option:hover {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
    color: #1B1A17 !important; /* Always dark text on hover */
}

/* Custom scrollbar - Golden theme */
.dropdown-content::-webkit-scrollbar,
.template-dropdown::-webkit-scrollbar {
    width: 6px !important;
}

.dropdown-content::-webkit-scrollbar-track,
.template-dropdown::-webkit-scrollbar-track {
    background: var(--bg-color) !important;
    border-radius: 3px !important;
}

.dropdown-content::-webkit-scrollbar-thumb,
.template-dropdown::-webkit-scrollbar-thumb {
    background: #FFD966 !important;
    border-radius: 3px !important;
}

.dropdown-content::-webkit-scrollbar-thumb:hover,
.template-dropdown::-webkit-scrollbar-thumb:hover {
    background: #FFE699 !important;
}

/* Ensure dropdowns don't extend too far */
.dropdown-content {
    width: 220px !important;
}

.template-dropdown {
    width: 180px !important;
}

/* Font preview text */
.font-preview {
    font-size: 14px !important;
    font-weight: 600 !important;
}

.font-sample {
    font-size: 12px !important;
    opacity: 0.8 !important;
}

/* Selected font option */
.font-option.selected {
    background: rgba(255, 215, 0, 0.15) !important;
    border-left: 3px solid #FFD966 !important;
}

/* Responsive design */
@media (max-width: 768px) {
    .toolbar-group {
        flex-wrap: wrap !important;
        gap: 8px !important;
    }
    
    .font-selector,
    .template-selector {
        margin-right: 5px !important;
    }
    
    .style-button,
    .toolbar-button {
        min-width: 110px !important;
        font-size: 11px !important;
        padding: 5px 8px !important;
    }
    
    .dropdown-content {
        width: 200px !important;
    }
    
    .template-dropdown {
        width: 160px !important;
    }
}

/* === GOLD THEME FOR FONT STYLE & TEMPLATE BUTTONS ONLY === */

/* Font Style Button - Gold Background */
.note-container .style-button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

.note-container .style-button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
}

/* Template Button - Gold Background */
.note-container .toolbar-button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

.note-container .toolbar-button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
}

/* Ensure this applies to both light and dark modes */
body.dark-mode .note-container .style-button,
body.dark-mode .note-container .toolbar-button,
body:not(.dark-mode) .note-container .style-button,
body:not(.dark-mode) .note-container .toolbar-button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

body.dark-mode .note-container .style-button:hover,
body.dark-mode .note-container .toolbar-button:hover,
body:not(.dark-mode) .note-container .style-button:hover,
body:not(.dark-mode) .note-container .toolbar-button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
}

/* === GOLD THEME FOR FONT STYLE & TEMPLATE BUTTONS IN DARK MODE ONLY === */

/* Font Style Button - Gold Background in Dark Mode */
body.dark-mode .note-container .style-button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

body.dark-mode .note-container .style-button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
}

/* Template Button - Gold Background in Dark Mode */
body.dark-mode .note-container .toolbar-button {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
}

body.dark-mode .note-container .toolbar-button:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
}

/* === HIDE APP CONTAINER BACKGROUND ONLY === */

/* Hide app container when editor is active */
body.editor-open .app-container {
    display: none !important;
}

body.editor-open .header {
    display: none !important;
}

body.editor-open {
    background: #1B1A17 !important;
}

/* Your existing note editor modal styles remain completely unchanged */
.note-editor {
    /* All your existing styles stay exactly the same */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60%;
    height: 80%;
    background: #1B1A17;
    border: 2px solid #F0A500;
    border-radius: 12px;
    display: none;
    z-index: 1000;
    /* ... all your other existing styles */
}

.note-editor.active {
    display: flex;
}

/* === LIGHT MODE BACKGROUND FOR NOTE EDITOR === */

/* Hide app container when editor is active */
body.editor-open .app-container {
    display: none !important;
}

body.editor-open .header {
    display: none !important;
}

/* Light mode background when editor is open */
body.editor-open {
    background: #ffffff !important; /* Your light mode white */
}

/* Your existing note editor modal styles remain completely unchanged */
.note-editor {
    /* All your existing styles stay exactly the same */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60%;
    height: 80%;
    background: #1B1A17; /* Keep modal background black */
    border: 2px solid #F0A500;
    border-radius: 12px;
    display: none;
    z-index: 1000;
    /* ... all your other existing styles */
}

.note-editor.active {
    display: flex;
}

/* All your other existing styles remain exactly the same */
/* All your other existing styles remain exactly the same */

/* === DYNAMIC BACKGROUND FOR NOTE EDITOR === */

/* Hide app container when editor is active */
body.editor-open .app-container {
    display: none !important;
}

body.editor-open .header {
    display: none !important;
}

/* Light mode background when editor is open */
body:not(.dark-mode).editor-open {
    background: #ffffff !important; /* Your light mode white */
}

/* Dark mode background when editor is open */
body.dark-mode.editor-open {
    background: #1B1A17 !important; /* Your dark mode black */
}

/* Your existing note editor modal styles remain completely unchanged */
.note-editor {
    /* All your existing styles stay exactly the same */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60%;
    height: 80%;
    background: #1B1A17; /* Keep modal background black */
    border: 2px solid #F0A500;
    border-radius: 12px;
    display: none;
    z-index: 1000;
    /* ... all your other existing styles */
}

.note-editor.active {
    display: flex;
}

/* All your other existing styles remain exactly the same */

/* === GOLD GLOW HOVER EFFECT FOR TEMPLATE DROPDOWN - DARK MODE === */

/* Dark mode only - template dropdown hover with gold glow */
body.dark-mode .template-option:hover,
body.dark-mode .ribbon-option:hover {
    color: #1B1A17 !important; /* Black text */
    background: linear-gradient(135deg, #F0A500, #FFD700) !important; /* Gold gradient */
    border-color: #FFD700 !important;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(240, 165, 0, 0.3) !important; /* Gold glow */
    font-weight: 600;
}
/* === TEMPLATE DROPDOWN MATCHES FONT DROPDOWN === */

/* Make template options use same styles as font options */
.template-option {
    padding: 10px 12px !important;
    cursor: pointer;
    border-bottom: 1px solid rgba(240, 165, 0, 0.2) !important;
    transition: all 0.3s ease !important;
    color: #F0A500 !important;
    background: #1B1A17 !important;
}

.template-option:last-child {
    border-bottom: none !important;
}

/* Same hover effect as font options */
.template-option:hover {
    background: linear-gradient(135deg, #F0A500, #FFD700) !important;
    color: #1B1A17 !important;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(240, 165, 0, 0.3) !important;
}

/* Ensure template dropdown matches font dropdown */
.template-dropdown {
    background: #1B1A17 !important;
    border: 1px solid #F0A500 !important;
    border-radius: 4px !important;
    box-shadow: 0 4px 15px rgba(240, 165, 0, 0.2) !important;
}

/* === SAME LINEAR GRADIENT GLOW FOR TEMPLATES - DARK MODE === */

/* Dark mode template hover with linear gradient glow */
body.dark-mode .template-option:hover,
body.dark-mode .ribbon-option:hover {
    background: linear-gradient(135deg, #F0A500, #FFD700) !important;
    color: #1B1A17 !important;
    border-color: #FFD700 !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(240, 165, 0, 0.4) !important;
}

/* === PRINT NOTES MODAL THEME - WHITE & GOLD (LIGHT) / BLACK & GOLD (DARK) === */

/* Print Modal Container */
.print-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    backdrop-filter: blur(5px);
}

/* Light Mode - White & Gold */
body:not(.dark-mode) .print-modal-content {
    background: #ffffff !important;
    border: 2px solid #FFD966 !important;
    padding: 30px;
    border-radius: 16px;
    max-width: 450px;
    width: 90%;
    box-shadow: 0 20px 60px rgba(255, 215, 0, 0.2);
    color: #1B1A17 !important;
}

body:not(.dark-mode) .print-modal-content h3 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-size: 24px;
    margin-bottom: 20px;
    text-align: center;
    font-weight: 700;
}

/* Print Select Dropdown - Light Mode */
body:not(.dark-mode) #printSelectDropdown {
    background: #ffffff !important;
    color: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    width: 100% !important;
    padding: 12px 16px !important;
    border-radius: 10px !important;
    font-size: 16px !important;
    margin-bottom: 20px;
    transition: all 0.3s ease !important;
}

body:not(.dark-mode) #printSelectDropdown:hover {
    border-color: #FFE699 !important;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.3) !important;
}

body:not(.dark-mode) #printSelectDropdown:focus {
    border-color: #FFE699 !important;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.4) !important;
    outline: none !important;
}

/* Dropdown Options - Light Mode */
body:not(.dark-mode) #printSelectDropdown option {
    background: #ffffff !important;
    color: #1B1A17 !important;
    padding: 12px 16px !important;
    border-bottom: 1px solid rgba(255, 215, 0, 0.2) !important;
}

body:not(.dark-mode) #printSelectDropdown option:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
}

/* Print Modal Actions - Light Mode */
body:not(.dark-mode) .print-modal-actions {
    display: flex;
    justify-content: space-between;
    gap: 15px;
    margin-top: 25px;
}

body:not(.dark-mode) .btn-cancel {
    background: #f8f9fa !important;
    color: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    flex: 1;
}

body:not(.dark-mode) .btn-cancel:hover {
    background: #e9ecef !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 215, 0, 0.2);
}

body:not(.dark-mode) .btn-confirm {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    transition: all 0.3s ease;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

body:not(.dark-mode) .btn-confirm:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
}

/* Dark Mode - Black & Gold */
body.dark-mode .print-modal-content {
    background: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    padding: 30px;
    border-radius: 16px;
    max-width: 450px;
    width: 90%;
    box-shadow: 0 20px 60px rgba(255, 215, 0, 0.3);
    color: #FFD966 !important;
}

body.dark-mode .print-modal-content h3 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-size: 24px;
    margin-bottom: 20px;
    text-align: center;
    font-weight: 700;
}

/* Print Select Dropdown - Dark Mode */
body.dark-mode #printSelectDropdown {
    background: #1B1A17 !important;
    color: #FFD966 !important;
    border: 2px solid #FFD966 !important;
    width: 100% !important;
    padding: 12px 16px !important;
    border-radius: 10px !important;
    font-size: 16px !important;
    margin-bottom: 20px;
    transition: all 0.3s ease !important;
}

body.dark-mode #printSelectDropdown:hover {
    border-color: #FFE699 !important;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.4) !important;
}

body.dark-mode #printSelectDropdown:focus {
    border-color: #FFE699 !important;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.5) !important;
    outline: none !important;
}

/* Dropdown Options - Dark Mode */
body.dark-mode #printSelectDropdown option {
    background: #1B1A17 !important;
    color: #FFD966 !important;
    padding: 12px 16px !important;
    border-bottom: 1px solid rgba(255, 215, 0, 0.3) !important;
}

body.dark-mode #printSelectDropdown option:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
}

/* Print Modal Actions - Dark Mode */
body.dark-mode .print-modal-actions {
    display: flex;
    justify-content: space-between;
    gap: 15px;
    margin-top: 25px;
}

body.dark-mode .btn-cancel {
    background: #2A2926 !important;
    color: #FFD966 !important;
    border: 2px solid #FFD966 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    flex: 1;
}

body.dark-mode .btn-cancel:hover {
    background: #3A3936 !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
}

body.dark-mode .btn-confirm {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    transition: all 0.3s ease;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

body.dark-mode .btn-confirm:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5);
}

/* Common Styles for Both Modes */
.print-modal-content {
    animation: slideInUp 0.3s ease-out;
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Print Instructions */
.print-instructions {
    text-align: center;
    margin-top: 15px;
    font-size: 14px;
    opacity: 0.8;
}

body:not(.dark-mode) .print-instructions {
    color: #1B1A17 !important;
}

body.dark-mode .print-instructions {
    color: #FFD966 !important;
}

/* Responsive Design */
@media (max-width: 480px) {
    .print-modal-content {
        padding: 20px;
        margin: 20px;
    }
    
    .print-modal-actions {
        flex-direction: column;
    }
    
    .btn-cancel,
    .btn-confirm {
        width: 100%;
    }
    
    body:not(.dark-mode) .print-modal-content h3,
    body.dark-mode .print-modal-content h3 {
        font-size: 20px;
    }
}

/* === PRINT NOTES MODAL - CANCEL BUTTON GOLD THEME ONLY === */

/* Print Modal Container */
.print-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    backdrop-filter: blur(5px);
}

/* Light Mode - White & Gold */
body:not(.dark-mode) .print-modal-content {
    background: #ffffff !important;
    border: 2px solid #FFD966 !important;
    padding: 30px;
    border-radius: 16px;
    max-width: 450px;
    width: 90%;
    box-shadow: 0 20px 60px rgba(255, 215, 0, 0.2);
    color: #1B1A17 !important;
}

body:not(.dark-mode) .print-modal-content h3 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-size: 24px;
    margin-bottom: 20px;
    text-align: center;
    font-weight: 700;
}

/* Print Select Dropdown - Light Mode */
body:not(.dark-mode) #printSelectDropdown {
    background: #ffffff !important;
    color: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    width: 100% !important;
    padding: 12px 16px !important;
    border-radius: 10px !important;
    font-size: 16px !important;
    margin-bottom: 20px;
    transition: all 0.3s ease !important;
}

body:not(.dark-mode) #printSelectDropdown:hover {
    border-color: #FFE699 !important;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.3) !important;
}

body:not(.dark-mode) #printSelectDropdown:focus {
    border-color: #FFE699 !important;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.4) !important;
    outline: none !important;
}

/* Dropdown Options - Light Mode */
body:not(.dark-mode) #printSelectDropdown option {
    background: #ffffff !important;
    color: #1B1A17 !important;
    padding: 12px 16px !important;
    border-bottom: 1px solid rgba(255, 215, 0, 0.2) !important;
}

body:not(.dark-mode) #printSelectDropdown option:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
}

/* Print Modal Actions - Light Mode */
body:not(.dark-mode) .print-modal-actions {
    display: flex;
    justify-content: space-between;
    gap: 15px;
    margin-top: 25px;
}

/* CANCEL BUTTON - GOLD THEME IN BOTH MODES */
.btn-cancel {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.btn-cancel:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
}

/* CONFIRM BUTTON - REGULAR STYLE (NOT GOLD) */
body:not(.dark-mode) .btn-confirm {
    background: #f8f9fa !important;
    color: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

body:not(.dark-mode) .btn-confirm:hover {
    background: #e9ecef !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 215, 0, 0.2);
}

/* Dark Mode - Black & Gold */
body.dark-mode .print-modal-content {
    background: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    padding: 30px;
    border-radius: 16px;
    max-width: 450px;
    width: 90%;
    box-shadow: 0 20px 60px rgba(255, 215, 0, 0.3);
    color: #FFD966 !important;
}

body.dark-mode .print-modal-content h3 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-size: 24px;
    margin-bottom: 20px;
    text-align: center;
    font-weight: 700;
}

/* Print Select Dropdown - Dark Mode */
body.dark-mode #printSelectDropdown {
    background: #1B1A17 !important;
    color: #FFD966 !important;
    border: 2px solid #FFD966 !important;
    width: 100% !important;
    padding: 12px 16px !important;
    border-radius: 10px !important;
    font-size: 16px !important;
    margin-bottom: 20px;
    transition: all 0.3s ease !important;
}

body.dark-mode #printSelectDropdown:hover {
    border-color: #FFE699 !important;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.4) !important;
}

body.dark-mode #printSelectDropdown:focus {
    border-color: #FFE699 !important;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.5) !important;
    outline: none !important;
}

/* Dropdown Options - Dark Mode */
body.dark-mode #printSelectDropdown option {
    background: #1B1A17 !important;
    color: #FFD966 !important;
    padding: 12px 16px !important;
    border-bottom: 1px solid rgba(255, 215, 0, 0.3) !important;
}

body.dark-mode #printSelectDropdown option:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
}

/* Print Modal Actions - Dark Mode */
body.dark-mode .print-modal-actions {
    display: flex;
    justify-content: space-between;
    gap: 15px;
    margin-top: 25px;
}

/* CANCEL BUTTON - GOLD THEME (SAME IN DARK MODE) */
/* The .btn-cancel class above applies to both modes */

/* CONFIRM BUTTON - REGULAR STYLE IN DARK MODE */
body.dark-mode .btn-confirm {
    background: #2A2926 !important;
    color: #FFD966 !important;
    border: 2px solid #FFD966 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

body.dark-mode .btn-confirm:hover {
    background: #3A3936 !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
}

/* Common Styles for Both Modes */
.print-modal-content {
    animation: slideInUp 0.3s ease-out;
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Print Instructions */
.print-instructions {
    text-align: center;
    margin-top: 15px;
    font-size: 14px;
    opacity: 0.8;
}

body:not(.dark-mode) .print-instructions {
    color: #1B1A17 !important;
}

body.dark-mode .print-instructions {
    color: #FFD966 !important;
}

/* Responsive Design */
@media (max-width: 480px) {
    .print-modal-content {
        padding: 20px;
        margin: 20px;
    }
    
    .print-modal-actions {
        flex-direction: column;
    }
    
    .btn-cancel,
    .btn-confirm {
        width: 100%;
    }
    
    body:not(.dark-mode) .print-modal-content h3,
    body.dark-mode .print-modal-content h3 {
        font-size: 20px;
    }
}

/* === HIDE NOTES MODAL THEME - WHITE & GOLD (LIGHT) / BLACK & GOLD (DARK) === */

/* Hide Notes Modal Container */
.hide-notes-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    backdrop-filter: blur(5px);
}

/* Light Mode - White & Gold */
body:not(.dark-mode) .hide-notes-modal-content {
    background: #ffffff !important;
    border: 2px solid #FFD966 !important;
    padding: 30px;
    border-radius: 16px;
    max-width: 500px;
    width: 90%;
    max-height: 70vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(255, 215, 0, 0.2);
    color: #1B1A17 !important;
}

body:not(.dark-mode) .hide-notes-modal-content h3 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-size: 24px;
    margin-bottom: 20px;
    text-align: center;
    font-weight: 700;
    border-bottom: 2px solid #FFD966 !important;
    padding-bottom: 10px;
}

/* Notes Checkboxes Container - Light Mode */
body:not(.dark-mode) #noteCheckboxes {
    background: #ffffff !important;
    border: 2px solid #FFD966 !important;
    border-radius: 10px;
    padding: 20px;
    margin: 20px 0;
    max-height: 300px;
    overflow-y: auto;
}

body:not(.dark-mode) #noteCheckboxes label {
    background: #ffffff !important;
    color: #1B1A17 !important;
    border: 1px solid #FFD966 !important;
    border-radius: 8px;
    padding: 12px 15px;
    margin: 10px 0;
    display: block;
    cursor: pointer;
    transition: all 0.3s ease;
}

body:not(.dark-mode) #noteCheckboxes label:hover {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 223, 100, 0.05)) !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2);
}

body:not(.dark-mode) #noteCheckboxes label:has(input[type="checkbox"]:checked) {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 223, 100, 0.1)) !important;
    border-color: #FFD700 !important;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
}

body:not(.dark-mode) #noteCheckboxes strong {
    color: #1B1A17 !important;
    font-size: 16px;
    display: block;
    margin-bottom: 5px;
}

body:not(.dark-mode) #noteCheckboxes div {
    color: #666666 !important;
    font-size: 12px;
    margin-left: 0;
}

/* Checkboxes - Light Mode */
body:not(.dark-mode) #noteCheckboxes input[type="checkbox"] {
    accent-color: #FFD966 !important;
    transform: scale(1.3);
    margin-right: 12px;
}

/* Modal Buttons - Light Mode */
body:not(.dark-mode) .modal-buttons {
    background: #ffffff !important;
    border-top: 2px solid #FFD966 !important;
    padding-top: 20px;
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
    gap: 15px;
}

/* Cancel Button - Light Mode */
body:not(.dark-mode) #cancelHide {
    background: #f8f9fa !important;
    color: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    flex: 1;
}

body:not(.dark-mode) #cancelHide:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
}

/* Confirm Button - Light Mode */
body:not(.dark-mode) #confirmHide {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    transition: all 0.3s ease;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

body:not(.dark-mode) #confirmHide:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
}

/* Dark Mode - Black & Gold */
body.dark-mode .hide-notes-modal-content {
    background: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    padding: 30px;
    border-radius: 16px;
    max-width: 500px;
    width: 90%;
    max-height: 70vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(255, 215, 0, 0.3);
    color: #FFD966 !important;
}

body.dark-mode .hide-notes-modal-content h3 {
    background: linear-gradient(to right, #FFD700, #FFD966, #FFE699) !important;
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    font-size: 24px;
    margin-bottom: 20px;
    text-align: center;
    font-weight: 700;
    border-bottom: 2px solid #FFD966 !important;
    padding-bottom: 10px;
}

/* Notes Checkboxes Container - Dark Mode */
body.dark-mode #noteCheckboxes {
    background: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    border-radius: 10px;
    padding: 20px;
    margin: 20px 0;
    max-height: 300px;
    overflow-y: auto;
}

body.dark-mode #noteCheckboxes label {
    background: #1B1A17 !important;
    color: #FFD966 !important;
    border: 1px solid #FFD966 !important;
    border-radius: 8px;
    padding: 12px 15px;
    margin: 10px 0;
    display: block;
    cursor: pointer;
    transition: all 0.3s ease;
}

body.dark-mode #noteCheckboxes label:hover {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 223, 100, 0.05)) !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
}

body.dark-mode #noteCheckboxes label:has(input[type="checkbox"]:checked) {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 223, 100, 0.1)) !important;
    border-color: #FFD700 !important;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);
}

body.dark-mode #noteCheckboxes strong {
    color: #FFD966 !important;
    font-size: 16px;
    display: block;
    margin-bottom: 5px;
}

body.dark-mode #noteCheckboxes div {
    color: rgba(255, 215, 0, 0.8) !important;
    font-size: 12px;
    margin-left: 0;
}

/* Checkboxes - Dark Mode */
body.dark-mode #noteCheckboxes input[type="checkbox"] {
    accent-color: #FFD966 !important;
    transform: scale(1.3);
    margin-right: 12px;
}

/* Modal Buttons - Dark Mode */
body.dark-mode .modal-buttons {
    background: #1B1A17 !important;
    border-top: 2px solid #FFD966 !important;
    padding-top: 20px;
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
    gap: 15px;
}

/* Cancel Button - Dark Mode */
body.dark-mode #cancelHide {
    background: #2A2926 !important;
    color: #FFD966 !important;
    border: 2px solid #FFD966 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    flex: 1;
}

body.dark-mode #cancelHide:hover {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
}

/* Confirm Button - Dark Mode */
body.dark-mode #confirmHide {
    background: linear-gradient(135deg, #FFD700, #FFD966, #FFE699) !important;
    color: #1B1A17 !important;
    border: 2px solid #FFD966 !important;
    padding: 12px 24px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    transition: all 0.3s ease;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

body.dark-mode #confirmHide:hover {
    background: linear-gradient(135deg, #FFE699, #FFD966, #FFD700) !important;
    border-color: #FFE699 !important;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5);
}

/* Common Styles for Both Modes */
.hide-notes-modal-content {
    animation: slideInUp 0.3s ease-out;
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Scrollbar Styling */
#noteCheckboxes::-webkit-scrollbar {
    width: 8px;
}

body:not(.dark-mode) #noteCheckboxes::-webkit-scrollbar-track {
    background: #f8f9fa !important;
}

body:not(.dark-mode) #noteCheckboxes::-webkit-scrollbar-thumb {
    background: #FFD966 !important;
    border-radius: 4px;
}

body:not(.dark-mode) #noteCheckboxes::-webkit-scrollbar-thumb:hover {
    background: #FFE699 !important;
}

body.dark-mode #noteCheckboxes::-webkit-scrollbar-track {
    background: #2A2926 !important;
}

body.dark-mode #noteCheckboxes::-webkit-scrollbar-thumb {
    background: #FFD966 !important;
    border-radius: 4px;
}

body.dark-mode #noteCheckboxes::-webkit-scrollbar-thumb:hover {
    background: #FFE699 !important;
}

/* Responsive Design */
@media (max-width: 480px) {
    .hide-notes-modal-content {
        padding: 20px;
        margin: 20px;
    }
    
    .modal-buttons {
        flex-direction: column;
    }
    
    #cancelHide,
    #confirmHide {
        width: 100%;
    }
    
    body:not(.dark-mode) .hide-notes-modal-content h3,
    body.dark-mode .hide-notes-modal-content h3 {
        font-size: 20px;
    }
}

/* Text-to-Speech Styles */
#voiceToTextBtn.speaking {
    background: linear-gradient(135deg, #ff4444, #ff6666) !important;
    animation: pulse-speaking 1s infinite;
    border-color: #ff4444 !important;
}

@keyframes pulse-speaking {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.tts-feedback {
    font-family: Arial, sans-serif;
    font-size: 14px;
}

::selection {
    background: rgba(255, 215, 0, 0.4) !important;
    color: #1B1A17 !important;
}

::-moz-selection {
    background: rgba(255, 215, 0, 0.4) !important;
    color: #1B1A17 !important;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

  </style>
</head>
<body>

   <!-- Splash Screen -->
    <div id="splashScreen" class="splash-screen">
        <div class="background-overlay">
            <div class="animated-orb orb-1"></div>
            <div class="animated-orb orb-2"></div>
        </div>
        
        <div class="splash-content">
            <div class="logo-container">
                <div class="glow-ring"></div>
                <div class="logo-wrapper">
                    <img 
                        src="exlogo.png" 
                        alt="EtherX OneNote Logo" 
                        class="logo-image"
                        onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22128%22 height=%22128%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22white%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22%3E%3Cpath d=%22M12 2L2 7l10 5 10-5-10-5z%22/%3E%3Cpath d=%22M2 17l10 5 10-5%22/%3E%3Cpath d=%22M2 12l10 5 10-5%22/%3E%3C/svg%3E'"
                    >
                </div>
            </div>
            
            <div class="app-name">
                <h1>EtherX OneNote</h1>
                <div class="divider"></div>
            </div>
            
            <div class="loading-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
    </div>

  <!-- Auth Page -->
  <div class="auth-page" id="authPage">
    <div class="background-overlay">
      <div class="animated-orb orb-1"></div>
      <div class="animated-orb orb-2"></div>
    </div>
    
    <div id="particles-container"></div>
    
    <div class="auth-container">
      <div class="auth-header">
        <div class="header-title">
          <img 
            src="exlogo.png" 
            alt="EtherX OneNote Logo" 
            class="auth-logo"
            onerror="this.style.display='none'"
          >
          <h1>EtherX OneNote</h1>
        </div>
        <p>Welcome back! Please enter your details.</p>
      </div>
      
      <div class="auth-card">
        <div class="tabs">
          <button class="tab-button active" onclick="switchTab('signin')">Sign In</button>
          <button class="tab-button" onclick="switchTab('register')">Register</button>
        </div>
        
        <!-- Sign In Form -->
        <div id="signin-tab" class="tab-content active">
          <form class="auth-form" id="loginForm">
            <div class="form-group">
              <label for="email">Email</label>
              <div class="input-wrapper">
                <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                  <polyline points="22,6 12,13 2,6"/>
                </svg>
                <input type="email" id="email" placeholder="name@example.com" required>
              </div>
            </div>
            
            <div class="form-group">
              <label for="password">Password</label>
              <div class="input-wrapper">
                <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
                <input type="password" id="password" placeholder="Enter your password" required>
                <button type="button" class="password-toggle" onclick="togglePassword('password')">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                </button>
              </div>
            </div>
            
            <div class="error-message" id="loginError"></div>
            <button type="submit" class="btn-primary">Sign In</button>
          </form>
        </div>
        
        <!-- Register Form -->
        <div id="register-tab" class="tab-content">
          <form class="auth-form" id="registerForm">
            <div class="form-group">
              <label for="regUsername">Full Name</label>
              <div class="input-wrapper">
                <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                  <circle cx="12" cy="7" r="4"/>
                </svg>
                <input type="text" id="regUsername" placeholder="John Doe" required>
              </div>
            </div>
            
            <div class="form-group">
              <label for="regEmail">Email</label>
              <div class="input-wrapper">
                <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                  <polyline points="22,6 12,13 2,6"/>
                </svg>
                <input type="email" id="regEmail" placeholder="name@example.com" required>
              </div>
            </div>
            
            <div class="form-group">
              <label for="regPassword">Password</label>
              <div class="input-wrapper">
                <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                </svg>
                <input type="password" id="regPassword" placeholder="Create a strong password" required>
                <button type="button" class="password-toggle" onclick="togglePassword('regPassword')">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                </button>
              </div>
            </div>
            
            <div class="error-message" id="registerError"></div>
            <div class="success-message" id="registerSuccess"></div>
            <button type="submit" class="btn-primary">Create Account</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading Page -->
  <div class="loading-page" id="loadingPage" style="display: none;">
    <div class="floating-elements" id="floatingElements"></div>
    
    <div class="loading-container">
      <div class="logo-container">
        <div class="logo">
          <img src="exlogo.png" alt="EtherX Logo" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiByeD0iMjAiIGZpbGw9IiMzMzlBRjAiLz4KPHBhdGggZD0iTTM1IDM1SDUwVjY1SDM1VjM1WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTY1IDM1SDUwVjUwSDY1VjM1WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTY1IDUwSDUwVjY1SDY1VjUwWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg=='">
        </div>
      </div>
      
      <h1 class="brand-name">EtherX OneNote</h1>
      
      <div class="loading-bar-container">
        <div class="loading-bar" id="loadingBar"></div>
      </div>
      
      <div class="percentage" id="percentage">0%</div>
      
      <div class="loading-text">
        Loading your experience
        <div class="dots">
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
      </div>
      
      <p class="hint">Please wait while we prepare everything for you</p>
    </div>
  </div>

  <!-- App Container -->
  <div class="app-container" id="appContainer">
    <div class="header">
  <div style="display: flex; align-items: center; gap: 10px;">
    <div style="width: 50px; height: 50px; border-radius: 25px; overflow: hidden; display: flex; align-items: center; justify-content: center;">
      <img src="exlogo.png" alt="EtherX Logo" style="width: 120%; height: 120%; object-fit: contain;" onerror="this.style.display='none'">
    </div>
    <h1>EtherX OneNote</h1>
  </div>
  <div>
    <button class="theme-toggle" id="themeToggle">üåô Dark Mode</button>
  </div>
</div>
    <div class="datetime-display" id="datetimeDisplay"></div>
    <div class="main-content">
      <div class="note-controls">
        <button class="small-btn" id="newNoteBtn">+ New Note</button>
        <input type="text" id="searchInput" placeholder="Search notes...">
        <!-- Hamburger Menu -->
        <div class="hamburger-menu">
          <button class="hamburger-btn" id="hamburgerBtn">
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
          </button>

          <div class="menu-items" id="menuItems">
            <div class="profile-section">
              <div class="profile-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="profile-info">
                <div class="profile-username" id="profileUsername">Username</div>
                <div class="profile-email" id="profileEmail">user@email.com</div>
              </div>
            </div>
            <div class="menu-item export-pdf" id="exportPdfBtn">
              <i class="fas fa-file-pdf"></i>
              <span>Export as PDF</span>
            </div>
            <div class="menu-item duplicate-note" id="duplicateNoteBtn">
              <i class="fas fa-copy"></i>
              <span>Duplicate Note</span>
            </div>
            <div class="menu-item print-menu-option" id="openPrintSelector">
    <i class="fas fa-print"></i>
    <span>Print Note</span>
</div>

            <div class="menu-item" id="hideNotesBtn">
              <i class="fas fa-eye-slash"></i>
              <span>Select Notes to Hide</span>
            </div>
            <div class="menu-item" id="unhideNotesBtn" style="display:none;">
              <i class="fas fa-eye"></i>
              <span>Unhide Notes</span>
            </div>
            <div class="menu-item logout-menu" id="logoutMenuBtn">
              <i class="fas fa-sign-out-alt"></i>
              <span>Logout</span>
            </div>
          </div>
        </div>
      </div>
      <div class="templates-section"> 
        <div class="section-header"> 
          <h3>Quick Templates</h3> 
          <div class="header-decoration"> 
            <div class="decoration-star">‚ú¶</div> 
            <div class="decoration-star">‚ú¶</div> 
            <div class="decoration-star">‚ú¶</div> 
          </div> 
        </div> 
        <div class="templates-grid"> 
          <div class="template-card" data-template="meeting"> 
            <div class="card-glow"></div> 
            <div class="template-icon">    üìã    </div> 
            <div class="template-name">Meeting Notes</div> 
            <div class="template-badge">Professional</div> 
          </div> 
          <div class="template-card" data-template="todo"> 
            <div class="card-glow"></div> 
            <div class="template-icon"> ‚úÖ </div> 
            <div class="template-name">To-Do List</div> 
            <div class="template-badge">Productivity</div> 
          </div> 
          <div class="template-card" data-template="project"> 
            <div class="card-glow"></div> 
            <div class="template-icon">   üìä  </div> 
            <div class="template-name">Project Plan</div> 
            <div class="template-badge">Planning</div> 
          </div> 
          <div class="template-card" data-template="weekly"> 
            <div class="card-glow"></div> 
            <div class="template-icon">     üìÖ       </div> 
            <div class="template-name">Weekly Planner</div> 
            <div class="template-badge">Organization</div> 
          </div> 
          <div class="template-card" data-template="journal"> 
            <div class="card-glow"></div> 
            <div class="template-icon">    üìö   </div> 
            <div class="template-name">Journal</div> 
            <div class="template-badge">Personal</div> 
          </div> 
          <div class="template-card" data-template="brainstorm"> 
            <div class="card-glow"></div> 
            <div class="template-icon">   üí°   </div> 
            <div class="template-name">Brainstorming</div> 
            <div class="template-badge">Creative</div> 
          </div> 
        </div> 
        <div class="templates-footer"> 
          <div class="floating-orb orb-1"></div> 
          <div class="floating-orb orb-2"></div> 
          <p>Click any template to start a beautiful note ‚ú®   </p> 
        </div> 
      </div>
      <div id="notesContainer"></div>
    </div>
  </div>




  <!-- Note Editor Modal -->
  <div class="note-editor" id="noteEditor">
    <div class="editor-content">
      <h3 id="editorTitle">New Note</h3>


       <div class="toolbar-group">
  <div class="template-selector">
    <button class="toolbar-button" id="templateButton">
      <span>Template</span>
      <span>‚ñº</span>
    </button>
    <div class="template-dropdown" id="templateDropdown">
      <div class="template-option" data-template="blank">Blank Note</div>
      <div class="template-option" data-template="meeting">Meeting Notes</div>
      <div class="template-option" data-template="project">Project Plan</div>
      <div class="template-option" data-template="todo">To-Do List</div>
      <div class="template-option" data-template="weekly">Weekly Planner</div>
      <div class="template-option" data-template="business">Business Plan</div>
      <div class="template-option" data-template="decorative">Decorative Note</div>
      <div class="template-option" data-template="academic">Lecture Notes</div>
      <div class="template-option" data-template="styled">Styled Background</div>
      <div class="template-option" data-template="mindmap">Mind Map</div>
      <div class="template-option" data-template="travel">Travel Planner</div>
      <div class="template-option" data-template="journal">Journal</div>
      <div class="template-option" data-template="budget">Budget Planner</div>
      <div class="template-option" data-template="workout">Workout Log</div>
      <div class="template-option" data-template="book">Book Notes</div>
      <div class="template-option" data-template="brainstorm">Brainstorming</div>
      <div class="template-option" data-template="habit">Habit Tracker</div>
    </div>
  </div>

  <div class="font-selector">
    <button class="style-button" id="styleButton">
      <span>Font Style</span>
      <span>‚ñº</span>
    </button>
    <div class="dropdown-content" id="fontDropdown">
      <div class="font-option" data-font="Arial, sans-serif">
        <span class="font-preview" style="font-family: Arial, sans-serif">Arial</span>
        <div class="font-sample" style="font-family: Arial, sans-serif">Clean and modern</div>
      </div>
      <div class="font-option" data-font="'Times New Roman', serif">
        <span class="font-preview" style="font-family: 'Times New Roman', serif">Times New Roman</span>
        <div class="font-sample" style="font-family: 'Times New Roman', serif">Classic and formal</div>
      </div>
      <div class="font-option" data-font="'Courier New', monospace">
        <span class="font-preview" style="font-family: 'Courier New', monospace">Courier New</span>
        <div class="font-sample" style="font-family: 'Courier New', monospace">Typewriter style</div>
      </div>
      <div class="font-option" data-font="'Georgia', serif">
        <span class="font-preview" style="font-family: 'Georgia', serif">Georgia</span>
        <div class="font-sample" style="font-family: 'Georgia', serif">Elegant and readable</div>
      </div>
      <div class="font-option" data-font="'Helvetica', sans-serif">
        <span class="font-preview" style="font-family: 'Helvetica', sans-serif">Helvetica</span>
        <div class="font-sample" style="font-family: 'Helvetica', sans-serif">Clean and professional</div>
      </div>
      <div class="font-option" data-font="'Verdana', sans-serif">
        <span class="font-preview" style="font-family: 'Verdana', sans-serif">Verdana</span>
        <div class="font-sample" style="font-family: 'Verdana', sans-serif">Clear and legible</div>
      </div>
      <div class="font-option" data-font="'Trebuchet MS', sans-serif">
        <span class="font-preview" style="font-family: 'Trebuchet MS', sans-serif">Trebuchet MS</span>
        <div class="font-sample" style="font-family: 'Trebuchet MS', sans-serif">Modern and friendly</div>
      </div>
      <div class="font-option" data-font="'Palatino', serif">
        <span class="font-preview" style="font-family: 'Palatino', serif">Palatino</span>
        <div class="font-sample" style="font-family: 'Palatino', serif">Classic and refined</div>
      </div>
      <div class="font-option" data-font="'Garamond', serif">
        <span class="font-preview" style="font-family: 'Garamond', serif">Garamond</span>
        <div class="font-sample" style="font-family: 'Garamond', serif">Traditional and elegant</div>
      </div>
      <div class="font-option" data-font="'Tahoma', sans-serif">
        <span class="font-preview" style="font-family: 'Tahoma', sans-serif">Tahoma</span>
        <div class="font-sample" style="font-family: 'Tahoma', sans-serif">Compact and clear</div>
      </div>
      <div class="font-option" data-font="'Lucida Console', monospace">
        <span class="font-preview" style="font-family: 'Lucida Console', monospace">Lucida Console</span>
        <div class="font-sample" style="font-family: 'Lucida Console', monospace">Code-friendly</div>
      </div>
      <div class="font-option" data-font="'Impact', sans-serif">
        <span class="font-preview" style="font-family: 'Impact', sans-serif">Impact</span>
        <div class="font-sample" style="font-family: 'Impact', sans-serif">Bold and striking</div>
      </div>
      <div class="font-option" data-font="'Comic Sans MS', cursive">
        <span class="font-preview" style="font-family: 'Comic Sans MS', cursive">Comic Sans MS</span>
        <div class="font-sample" style="font-family: 'Comic Sans MS', cursive">Casual and playful</div>
      </div>
      <div class="font-option" data-font="'Calibri', sans-serif">
        <span class="font-preview" style="font-family: 'Calibri', sans-serif">Calibri</span>
        <div class="font-sample" style="font-family: 'Calibri', sans-serif">Modern and clean</div>
      </div>
      <div class="font-option" data-font="'Cambria', serif">
        <span class="font-preview" style="font-family: 'Cambria', serif">Cambria</span>
        <div class="font-sample" style="font-family: 'Cambria', serif">Elegant serif</div>
      </div>
      <div class="font-option" data-font="'Consolas', monospace">
        <span class="font-preview" style="font-family: 'Consolas', monospace">Consolas</span>
        <div class="font-sample" style="font-family: 'Consolas', monospace">Programming font</div>
      </div>
      <div class="font-option" data-font="'Book Antiqua', serif">
        <span class="font-preview" style="font-family: 'Book Antiqua', serif">Book Antiqua</span>
        <div class="font-sample" style="font-family: 'Book Antiqua', serif">Classic book style</div>
      </div>
      <div class="font-option" data-font="'Century Gothic', sans-serif">
        <span class="font-preview" style="font-family: 'Century Gothic', sans-serif">Century Gothic</span>
        <div class="font-sample" style="font-family: 'Century Gothic', sans-serif">Geometric and modern</div>
      </div>
      <div class="font-option" data-font="'Segoe UI', sans-serif">
        <span class="font-preview" style="font-family: 'Segoe UI', sans-serif">Segoe UI</span>
        <div class="font-sample" style="font-family: 'Segoe UI', sans-serif">Windows system font</div>
      </div>
      <div class="font-option" data-font="'Baskerville', serif">
        <span class="font-preview" style="font-family: 'Baskerville', serif">Baskerville</span>
        <div class="font-sample" style="font-family: 'Baskerville', serif">Transitional serif</div>
      </div>
      <div class="font-option" data-font="'Consolas', monospace">
        <span class="font-preview" style="font-family: 'Consolas', monospace">Consolas</span>
        <div class="font-sample" style="font-family: 'Consolas', monospace">Programming font</div>
      </div>
      <div class="font-option" data-font="'Book Antiqua', serif">
        <span class="font-preview" style="font-family: 'Book Antiqua', serif">Book Antiqua</span>
        <div class="font-sample" style="font-family: 'Book Antiqua', serif">Classic book style</div>
      </div>
      <div class="font-option" data-font="'Century Gothic', sans-serif">
        <span class="font-preview" style="font-family: 'Century Gothic', sans-serif">Century Gothic</span>
        <div class="font-sample" style="font-family: 'Century Gothic', sans-serif">Geometric and modern</div>
      </div>
      <div class="font-option" data-font="'Franklin Gothic Medium', sans-serif">
        <span class="font-preview" style="font-family: 'Franklin Gothic Medium', sans-serif">Franklin Gothic</span>
        <div class="font-sample" style="font-family: 'Franklin Gothic Medium', sans-serif">Bold and strong</div>
      </div>
      <div class="font-option" data-font="'Rockwell', serif">
        <span class="font-preview" style="font-family: 'Rockwell', serif">Rockwell</span>
        <div class="font-sample" style="font-family: 'Rockwell', serif">Slab serif style</div>
      </div>
      <div class="font-option" data-font="'Segoe UI', sans-serif">
        <span class="font-preview" style="font-family: 'Segoe UI', sans-serif">Segoe UI</span>
        <div class="font-sample" style="font-family: 'Segoe UI', sans-serif">Windows system font</div>
      </div>
      <div class="font-option" data-font="'Optima', sans-serif">
        <span class="font-preview" style="font-family: 'Optima', sans-serif">Optima</span>
        <div class="font-sample" style="font-family: 'Optima', sans-serif">Humanist sans-serif</div>
      </div>
      <div class="font-option" data-font="'Baskerville', serif">
        <span class="font-preview" style="font-family: 'Baskerville', serif">Baskerville</span>
        <div class="font-sample" style="font-family: 'Baskerville', serif">Transitional serif</div>
      </div>
      <div class="font-option" data-font="'Monaco', monospace">
        <span class="font-preview" style="font-family: 'Monaco', monospace">Monaco</span>
        <div class="font-sample" style="font-family: 'Monaco', monospace">Mac coding font</div>
      </div>
      <div class="font-option" data-font="'Futura', sans-serif">
        <span class="font-preview" style="font-family: 'Futura', sans-serif">Futura</span>
        <div class="font-sample" style="font-family: 'Futura', sans-serif">Geometric design</div>
      </div>
      <div class="font-option" data-font="'Minion Pro', serif">
        <span class="font-preview" style="font-family: 'Minion Pro', serif">Minion Pro</span>
        <div class="font-sample" style="font-family: 'Minion Pro', serif">Adobe serif font</div>
      </div>
      <div class="font-option" data-font="'Myriad Pro', sans-serif">
        <span class="font-preview" style="font-family: 'Myriad Pro', sans-serif">Myriad Pro</span>
        <div class="font-sample" style="font-family: 'Myriad Pro', sans-serif">Adobe sans-serif</div>
      </div>
      <div class="font-option" data-font="'Avenir', sans-serif">
        <span class="font-preview" style="font-family: 'Avenir', sans-serif">Avenir</span>
        <div class="font-sample" style="font-family: 'Avenir', sans-serif">French geometric</div>
      </div>
      <div class="font-option" data-font="'Didot', serif">
        <span class="font-preview" style="font-family: 'Didot', serif">Didot</span>
        <div class="font-sample" style="font-family: 'Didot', serif">High contrast serif</div>
      </div>
      <div class="font-option" data-font="'Bodoni MT', serif">
        <span class="font-preview" style="font-family: 'Bodoni MT', serif">Bodoni MT</span>
        <div class="font-sample" style="font-family: 'Bodoni MT', serif">Italian classic</div>
      </div>
      <div class="font-option" data-font="'Gill Sans', sans-serif">
        <span class="font-preview" style="font-family: 'Gill Sans', sans-serif">Gill Sans</span>
        <div class="font-sample" style="font-family: 'Gill Sans', sans-serif">British humanist</div>
      </div>
      <div class="font-option" data-font="'Caslon', serif">
        <span class="font-preview" style="font-family: 'Caslon', serif">Caslon</span>
        <div class="font-sample" style="font-family: 'Caslon', serif">Old style serif</div>
      </div>
    </div>
  </div>
</div>
      
      <div class="editor-options">
        <button class="option-btn" id="undoBtn" title="Undo (Ctrl+Z)">‚Ü∂ Undo</button>
  <button class="option-btn" id="redoBtn" title="Redo (Ctrl+Y)">‚Ü∑ Redo</button>
        <button class="option-btn" id="penBtn">‚úèÔ∏è</button>
        <button class="option-btn" id="clearDrawBtn" style="display:none;">Clear</button>
        <button class="option-btn" id="boldBtn"><b>B</b></button>
  <button class="option-btn" id="italicBtn"><i>I</i></button>
  <button class="option-btn" id="underlineBtn"><u>U</u></button>
  <button class="option-btn" id="deleteBtn" title="Delete">üóëÔ∏è Delete</button>
 
  <div class="editor-options">
    <!-- Existing buttons like Cut, Copy, Paste, Undo, Redo, etc. -->
    
    
    
    <!-- Your other existing buttons continue here... -->
</div>
  
  
  <!-- Add these buttons to the editor-options section -->
        <button class="option-btn" id="cutBtn" title="Cut">‚úÇ Cut</button>
        <button class="option-btn" id="copyBtn" title="Copy">üìÑ Copy</button>
        <button class="option-btn" id="pasteBtn" title="Paste">üìã Paste</button>
     
        <div class="zoom-controls">
          <button class="option-btn" id="zoomOutBtn">-</button>
          <span id="zoomLevel">100%</span>
          <button class="option-btn" id="zoomInBtn">+</button>
        </div>
        <button class="option-btn" id="addImageBtn">üì∑ Image</button>
        <input type="file" id="imageInput" accept="image/*" style="display:none;">
        <button class="option-btn" id="addAudioBtn">üéµ Audio</button>
        <button class="option-btn" id="voiceToTextBtn">üéô Voice-to-Text</button>
        <button class="option-btn" id="addTodoBtn">‚úÖ To-Do List</button>
      </div>

    <div id="status" style="margin-top:8px; color:green; font-size:14px;"></div>
      <!-- Container for To-Do List -->
<div class="todo-container" id="todoContainer" style="display:none;">
  <h2>My To-Do List</h2>
  <input type="text" id="taskInput" placeholder="Add a new task">
  <button id="addTaskBtn">Add</button>
  <ul id="taskList"></ul>
</div>
<input type="text" id="noteTitle" placeholder="Note title...">
      <!-- Tag Input -->
    <input type="text" id="Tag" placeholder="#Tag...">
     <div style="position:relative; border:1px solid #ccc; border-radius:8px; flex:1; background:#fff; margin:5px 0;">
       <div id="noteContent"
       contenteditable="true"
       placeholder="Write your note here..."
       style="padding:15px; height:100%; overflow-y:auto; outline:none;">
       </div>
       <canvas id="drawingCanvas" style="position:absolute; top:20px; left:20px; pointer-events:none; display:none; z-index:10;"></canvas>
     </div>
      

      
      <input type="file" id="imageInput" class="file-input" accept="image/*" multiple>
      <input type="file" id="audioInput" class="file-input" accept="audio/*" multiple>
      
      <div id="attachmentsContainer" class="attachments"></div>
      
      <div class="sharing-options">
        <button class="share-btn copy-link" id="savePdfBtn">
          <i class="fas fa-file-pdf"></i> Save as PDF
        </button>
        <button class="share-btn email-note" id="emailNoteBtn">
          <i class="fas fa-envelope"></i> Email Note
        </button>
        <button class="share-btn download-note" id="downloadNoteBtn">
          <i class="fas fa-download"></i> Download Note
        </button>
      </div>

      <div class="status-message" id="statusMessage"></div>

      <div class="editor-footer">
        <button class="small-btn" id="cancelNoteBtn" style="background: #6c757d;">Cancel</button>
        <button class="small-btn" id="saveNoteBtn">Save Note</button>
      </div>
    </div>
  </div>
  <!-- PRINT NOTE SELECTOR MODAL -->
<div id="printNoteModal" class="print-modal">
  <div class="print-modal-content">
    
    <h3>Select a Note to Print</h3>

    <select id="printSelectDropdown">
        <option value="">-- Choose Note --</option>
    </select>

    <div class="print-modal-actions">
        <button id="cancelPrint" class="btn-cancel">Cancel</button>
        <button id="confirmPrint" class="btn-confirm"><i class="fas fa-print"></i> Print</button>
    </div>
<!-- Add this modal after the existing modals in your HTML -->
<div id="passwordSetupModal" class="hide-password-setup-modal" style="display: none;">
  <div class="hide-password-setup-content">
    <div class="setup-header">
      <div class="setup-icon">üîí</div>
      <h3>Set Up Note Hiding Password</h3>
      <p>Create a password to protect your hidden notes</p>
    </div>

    <!-- Add this right after the password setup modal -->
<div id="debugModal" class="otp-modal" style="display: none;">
  <div class="otp-modal-content">
    <h3>Debug Info</h3>
    <div id="debugInfo" style="text-align: left; font-family: monospace; font-size: 12px;"></div>
    <button onclick="document.getElementById('debugModal').style.display='none'" class="otp-btn" style="margin-top: 20px;">
      Close
    </button>
  </div>
</div>
    
    <form id="passwordSetupForm" class="password-form">
      <div class="form-group">
        <label for="newPassword">New Password</label>
        <div class="input-wrapper">
          <input type="password" id="newPassword" placeholder="Enter your password" required>
          <button type="button" class="password-toggle" onclick="toggleSetupPassword('newPassword')">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
        </div>
        <div class="password-strength">
          <div class="strength-bar" id="strengthBar"></div>
          <div class="strength-text" id="strengthText">Password strength</div>
        </div>
      </div>
      
      <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <div class="input-wrapper">
          <input type="password" id="confirmPassword" placeholder="Confirm your password" required>
          <button type="button" class="password-toggle" onclick="toggleSetupPassword('confirmPassword')">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
        </div>
        <div class="password-match" id="passwordMatch">
          <i class="fas fa-times"></i>
          <span>Passwords do not match</span>
        </div>
      </div>
      
      <div class="password-requirements">
        <h4>Password Requirements:</h4>
        <ul>
          <li id="reqLength">At least 8 characters</li>
          <li id="reqUppercase">One uppercase letter</li>
          <li id="reqLowercase">One lowercase letter</li>
          <li id="reqNumber">One number</li>
          <li id="reqSpecial">One special character</li>
        </ul>
      </div>
    </form>
    
    <div class="setup-actions">
      <button type="button" class="setup-btn" id="savePasswordBtn" disabled>
        <i class="fas fa-save"></i>
        Save Password
      </button>
      <button type="button" class="setup-btn" id="cancelPasswordSetup" style="background: #6c757d;">
        <i class="fas fa-times"></i>
        Cancel
      </button>
    </div>
    
    <div class="setup-info">
      <i class="fas fa-info-circle"></i>
      <span>This password will be required to hide and unhide notes.</span>
    </div>
  </div>
  <!-- OTP Verification Modal -->
<div id="otpModal" class="otp-modal" style="display: none;">
  <div class="otp-modal-content">
    <div class="otp-header">
      <div class="otp-icon">üîê</div>
      <h3>Verify Your Email</h3>
      <p>We've sent a 6-digit OTP to your email</p>
    </div>
    
    <div class="otp-form">
      <div class="otp-inputs">
        <input type="text" class="otp-box" maxlength="1" data-index="0">
        <input type="text" class="otp-box" maxlength="1" data-index="1">
        <input type="text" class="otp-box" maxlength="1" data-index="2">
        <input type="text" class="otp-box" maxlength="1" data-index="3">
        <input type="text" class="otp-box" maxlength="1" data-index="4">
        <input type="text" class="otp-box" maxlength="1" data-index="5">
      </div>
      
      <div class="otp-timer">
        <p>OTP expires in: <span id="otpTimer">05:00</span></p>
      </div>
      
      <div class="otp-actions">
        <button type="button" class="otp-btn" id="verifyOtpBtn" disabled>
          <i class="fas fa-check"></i>
          Verify OTP
        </button>
        <button type="button" class="otp-btn secondary" id="resendOtpBtn" disabled>
          <i class="fas fa-redo"></i>
          Resend OTP
        </button>
        <button type="button" class="otp-btn secondary" id="cancelOtpBtn">
          <i class="fas fa-times"></i>
          Cancel
        </button>
      </div>
    </div>
    
    <div class="otp-status" id="otpStatus"></div>
  </div>
</div>
</div>
  </div>
</div>


  <script>
    document.addEventListener('DOMContentLoaded', function() {
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d', { willReadFrequently: true }); // Add here
    // rest of your code...
});

    document.addEventListener('DOMContentLoaded', function() {
            const splashScreen = document.getElementById('splashScreen');
            
            setTimeout(() => {
                splashScreen.classList.add('fade-out');
                
                setTimeout(() => {
                    splashScreen.style.display = 'none';
                }, 500);
            }, 3000);
        });

        // Undo/Redo Manager
  class UndoRedoManager {
    constructor() {
      this.states = [];
      this.currentStateIndex = -1;
      this.maxStates = 50;
    }

    saveState(state) {
      this.states = this.states.slice(0, this.currentStateIndex + 1);
      this.states.push(JSON.parse(JSON.stringify(state)));
      
      if (this.states.length > this.maxStates) {
        this.states.shift();
      }
      
      this.currentStateIndex = this.states.length - 1;
      this.updateButtonStates();
    }

    undo() {
      if (this.canUndo()) {
        this.currentStateIndex--;
        this.updateButtonStates();
        return JSON.parse(JSON.stringify(this.states[this.currentStateIndex]));
      }
      return null;
    }

    redo() {
      if (this.canRedo()) {
        this.currentStateIndex++;
        this.updateButtonStates();
        return JSON.parse(JSON.stringify(this.states[this.currentStateIndex]));
      }
      return null;
    }

    canUndo() {
      return this.currentStateIndex > 0;
    }

    canRedo() {
      return this.currentStateIndex < this.states.length - 1;
    }

    updateButtonStates() {
      const undoBtn = document.getElementById('undoBtn');
      const redoBtn = document.getElementById('redoBtn');
      
      if (undoBtn) undoBtn.disabled = !this.canUndo();
      if (redoBtn) redoBtn.disabled = !this.canRedo();
    }

    clear() {
      this.states = [];
      this.currentStateIndex = -1;
      this.updateButtonStates();
    }
  }

  // Initialize undo/redo manager
  const undoRedoManager = new UndoRedoManager();

  // Function to capture current editor state
  function captureEditorState() {
    const state = {
      title: document.getElementById('noteTitle').value,
      tag: document.getElementById('Tag').value,
      content: document.getElementById('noteContent').innerHTML,
      attachments: [...currentAttachments],
      drawing: null,
      timestamp: Date.now()
    };

    // Capture drawing if canvas has content
    if (canvas && ctx) {
      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
      const hasDrawing = imageData.data.some(pixel => pixel !== 0);
      if (hasDrawing) {
        state.drawing = canvas.toDataURL('image/png');
      }
    }

    return state;
  }

  // Function to restore editor state
  function restoreEditorState(state) {
    if (!state) return;

    document.getElementById('noteTitle').value = state.title || '';
    document.getElementById('Tag').value = state.tag || '';
    document.getElementById('noteContent').innerHTML = state.content || '';

    currentAttachments = [...(state.attachments || [])];
    renderAttachments();

    if (canvas && ctx && state.drawing) {
      const img = new Image();
      img.onload = function() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, 0, 0);
        canvas.style.display = 'block';
      };
      img.src = state.drawing;
    } else if (canvas && ctx) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
  }

  // Auto-save state with debouncing
  let saveStateTimeout;
  function scheduleStateSave() {
    clearTimeout(saveStateTimeout);
    saveStateTimeout = setTimeout(() => {
      const state = captureEditorState();
      undoRedoManager.saveState(state);
    }, 500);
  }

  // Event listeners for undo/redo
  function setupUndoRedoListeners() {
    const undoBtn = document.getElementById('undoBtn');
    const redoBtn = document.getElementById('redoBtn');

    undoBtn.addEventListener('click', performUndo);
    redoBtn.addEventListener('click', performRedo);

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      if ((e.ctrlKey || e.metaKey) && !e.altKey) {
        if (e.key === 'z' && !e.shiftKey) {
          e.preventDefault();
          performUndo();
        } else if ((e.key === 'y' || (e.key === 'z' && e.shiftKey))) {
          e.preventDefault();
          performRedo();
        }
      }
    });

    // Monitor changes in editor content
    const noteContent = document.getElementById('noteContent');
    const noteTitle = document.getElementById('noteTitle');
    const tagInput = document.getElementById('Tag');

    noteTitle.addEventListener('input', scheduleStateSave);
    tagInput.addEventListener('input', scheduleStateSave);
    noteContent.addEventListener('input', scheduleStateSave);
    
    if (canvas) {
      canvas.addEventListener('mouseup', scheduleStateSave);
      canvas.addEventListener('touchend', scheduleStateSave);
    }

    document.getElementById('imageInput').addEventListener('change', function() {
      setTimeout(scheduleStateSave, 100);
    });
    document.getElementById('audioInput').addEventListener('change', function() {
      setTimeout(scheduleStateSave, 100);
    });
  }

  function performUndo() {
    const state = undoRedoManager.undo();
    if (state) {
      restoreEditorState(state);
    }
  }

  function performRedo() {
    const state = undoRedoManager.redo();
    if (state) {
      restoreEditorState(state);
    }
  }

    const API_BASE = 'http://localhost:3001/api';
    let notes = [];
    let currentNoteId = null;
    let currentAttachments = [];
    let authToken = localStorage.getItem('authToken');


    // API functions
    async function apiCall(endpoint, options = {}) {
      try {
        const config = {
          headers: {
            'Content-Type': 'application/json',
            ...(authToken && { 'Authorization': `Bearer ${authToken}` })
          },
          ...options
        };

        const response = await fetch(`${API_BASE}${endpoint}`, config);
        
        if (!response.ok) {
          let errorMessage = 'API call failed';
          try {
            const data = await response.json();
            errorMessage = data.error || errorMessage;
          } catch (e) {
            console.warn('Could not parse error response');
          }
          throw new Error(errorMessage);
        }
        
        return await response.json();
      } catch (error) {
        if (error.name === 'TypeError' && error.message.includes('fetch')) {
          throw new Error('Server not running. Please start the backend server.');
        }
        console.error('API Error:', error);
        throw error;
      }
    }

    async function loadNotes() {
      try {
        const response = await apiCall('/notes');
        notes = Array.isArray(response) ? response : [];
      } catch (error) {
        console.error('Failed to load notes:', error);
        notes = [];
        // Show user-friendly error if server is not running
        if (error.message.includes('Server not running')) {
          const container = document.getElementById('notesContainer');
          if (container) {
            container.innerHTML = '<p style="text-align: center; color: #e74c3c; margin-top: 40px;">‚ö†Ô∏è Server not running. Please start the backend server.</p>';
          }
        }
      }
    }

    // Cut, Copy, Paste functionality
const cutBtn = document.getElementById('cutBtn');
const copyBtn = document.getElementById('copyBtn');
const pasteBtn = document.getElementById('pasteBtn');

// Store the last operation text
let clipboardText = '';

// Cut functionality
cutBtn.addEventListener('click', function() {
  focusEditor();
  try {
    const selection = window.getSelection();
    const selectedText = selection.toString();
    
    if (selectedText && selectedText.trim() !== '') {
      // Store the text before cutting
      clipboardText = selectedText;
      
      // Try to cut using execCommand
      const success = document.execCommand('cut');
      if (success) {
        showCopyPasteFeedback('Text cut successfully!', 'success');
      } else {
        // If execCommand cut fails, manually delete and store
        const range = selection.getRangeAt(0);
        range.deleteContents();
        showCopyPasteFeedback('Text cut successfully!', 'success');
      }
    } else {
      showCopyPasteFeedback('No text selected to cut', 'error');
    }
  } catch (err) {
    console.error('Cut failed:', err);
    showCopyPasteFeedback('Unable to cut. Please use Ctrl+X.', 'error');
  }
});

// Copy functionality
copyBtn.addEventListener('click', function() {
  focusEditor();
  try {
    const selection = window.getSelection();
    const selectedText = selection.toString();
    
    if (selectedText && selectedText.trim() !== '') {
      // Store the text
      clipboardText = selectedText;
      
      // Try to copy using execCommand
      const success = document.execCommand('copy');
      if (success) {
        showCopyPasteFeedback('Text copied successfully!', 'success');
      } else {
        showCopyPasteFeedback('Text stored for pasting', 'success');
      }
    } else {
      showCopyPasteFeedback('No text selected to copy', 'error');
    }
  } catch (err) {
    console.error('Copy failed:', err);
    showCopyPasteFeedback('Unable to copy. Please use Ctrl+C.', 'error');
  }
});

// PASTE FUNCTIONALITY - No permissions required
pasteBtn.addEventListener('click', function() {
  focusEditor();
  
  // Method 1: Try direct execCommand paste first
  try {
    const success = document.execCommand('paste');
    if (success) {
      showCopyPasteFeedback('Text pasted successfully!', 'success');
      return;
    }
  } catch (err) {
    console.log('Direct paste failed');
  }
  
  // Method 2: Use our stored text (no permissions needed)
  if (clipboardText && clipboardText.trim() !== '') {
    insertTextAtCursor(clipboardText);
    showCopyPasteFeedback('Text pasted successfully!', 'success');
  } else {
    // Method 3: Silent textarea method (no popups)
    useSilentTextareaPaste();
  }
});

// Silent textarea method without any prompts
function useSilentTextareaPaste() {
  const tempTextarea = document.createElement('textarea');
  tempTextarea.style.position = 'fixed';
  tempTextarea.style.left = '-9999px';
  tempTextarea.style.opacity = '0';
  document.body.appendChild(tempTextarea);
  
  tempTextarea.focus();
  
  setTimeout(() => {
    try {
      // Try to paste into textarea silently
      const pasted = document.execCommand('paste');
      
      setTimeout(() => {
        if (tempTextarea.value && tempTextarea.value.trim() !== '') {
          // Text was successfully pasted into textarea
          insertTextAtCursor(tempTextarea.value);
          showCopyPasteFeedback('Text pasted successfully!', 'success');
        } else {
          // No text available
          showCopyPasteFeedback('No text to paste', 'error');
        }
        
        // Clean up
        document.body.removeChild(tempTextarea);
      }, 50);
      
    } catch (err) {
      // Silent fail - just clean up
      document.body.removeChild(tempTextarea);
      showCopyPasteFeedback('No text to paste', 'error');
    }
  }, 50);
}

// Capture copy/cut events from keyboard to store text
document.addEventListener('copy', function(e) {
  const selection = window.getSelection();
  const selectedText = selection.toString();
  if (selectedText && selectedText.trim() !== '') {
    clipboardText = selectedText;
  }
});

document.addEventListener('cut', function(e) {
  const selection = window.getSelection();
  const selectedText = selection.toString();
  if (selectedText && selectedText.trim() !== '') {
    clipboardText = selectedText;
  }
});

// Function to insert text at cursor position
function insertTextAtCursor(text) {
  const selection = window.getSelection();
  
  if (selection.rangeCount > 0) {
    const range = selection.getRangeAt(0);
    range.deleteContents();
    
    // Handle multi-line text
    const lines = text.split('\n');
    
    for (let i = 0; i < lines.length; i++) {
      const textNode = document.createTextNode(lines[i]);
      range.insertNode(textNode);
      
      if (i < lines.length - 1) {
        const br = document.createElement('br');
        range.insertNode(br);
        range.setStartAfter(br);
        range.collapse(true);
      } else {
        range.setStartAfter(textNode);
        range.collapse(true);
      }
    }
    
    selection.removeAllRanges();
    selection.addRange(range);
  } else {
    // Fallback: append to content
    const noteContent = document.getElementById('noteContent');
    const textNode = document.createTextNode(text);
    noteContent.appendChild(textNode);
  }
}

// Enhanced focusEditor function
function focusEditor() {
  const noteContent = document.getElementById('noteContent');
  noteContent.focus();
  
  const selection = window.getSelection();
  if (selection.rangeCount === 0 || selection.toString().length === 0) {
    const range = document.createRange();
    range.selectNodeContents(noteContent);
    range.collapse(false);
    selection.removeAllRanges();
    selection.addRange(range);
  }
}

// Visual feedback function
function showCopyPasteFeedback(message, type) {
  const existingFeedback = document.getElementById('copyPasteFeedback');
  if (existingFeedback) {
    existingFeedback.remove();
  }
  
  const feedback = document.createElement('div');
  feedback.id = 'copyPasteFeedback';
  feedback.textContent = message;
  
  let backgroundColor, textColor;
  switch (type) {
    case 'success':
      backgroundColor = '#4CAF50';
      textColor = 'white';
      break;
    case 'error':
      backgroundColor = '#f44336';
      textColor = 'white';
      break;
    default:
      backgroundColor = '#333';
      textColor = 'white';
  }
  
  feedback.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 12px 20px;
    border-radius: 8px;
    font-weight: bold;
    z-index: 10000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    background: ${backgroundColor};
    color: ${textColor};
    transition: opacity 0.3s ease;
  `;
  
  document.body.appendChild(feedback);
  
  setTimeout(() => {
    feedback.style.opacity = '0';
    setTimeout(() => {
      if (feedback.parentNode) {
        feedback.parentNode.removeChild(feedback);
      }
    }, 300);
  }, 2000);
}

// Keyboard shortcuts
document.addEventListener('keydown', function(e) {
  const noteEditor = document.getElementById('noteEditor');
  if (noteEditor.style.display !== 'flex') return;
  
  const noteContent = document.getElementById('noteContent');
  if (!document.activeElement.isSameNode(noteContent) && 
      !noteContent.contains(document.activeElement)) return;
  
  if (e.ctrlKey && e.key === 'x') {
    e.preventDefault();
    cutBtn.click();
  }
  
  if (e.ctrlKey && e.key === 'c') {
    e.preventDefault();
    copyBtn.click();
  }
  
  if (e.ctrlKey && e.key === 'v') {
    e.preventDefault();
    pasteBtn.click();
  }
});

    // Show/Hide functions
    function showLoading() {
      document.getElementById('loadingPage').style.display = 'flex';
      initLoadingAnimation();
    }

    function initLoadingAnimation() {
      // Create floating background elements
      const floatingElements = document.getElementById('floatingElements');
      floatingElements.innerHTML = '';
      for (let i = 0; i < 15; i++) {
        const element = document.createElement('div');
        element.classList.add('floating-element');
        const size = Math.random() * 60 + 10;
        element.style.width = `${size}px`;
        element.style.height = `${size}px`;
        element.style.left = `${Math.random() * 100}%`;
        element.style.top = `${Math.random() * 100 + 100}%`;
        element.style.animationDuration = `${Math.random() * 20 + 10}s`;
        element.style.animationDelay = `${Math.random() * 5}s`;
        floatingElements.appendChild(element);
      }

      // Simulate loading progress - exactly 2 seconds
      const loadingBar = document.getElementById('loadingBar');
      const percentage = document.getElementById('percentage');
      const startTime = Date.now();
      const duration = 2000; // 2 seconds in milliseconds
      
      function updateProgress() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration * 100, 100);
        
        loadingBar.style.width = `${progress}%`;
        percentage.textContent = `${Math.round(progress)}%`;
        
        if (progress < 100) {
          requestAnimationFrame(updateProgress);
        }
      }
      
      // Start the loading animation
      updateProgress();
    }

    function hideLoading() {
      setTimeout(() => {
        document.getElementById('loadingPage').style.display = 'none';
      }, 2000);
    }

    async function showApp() {
      document.getElementById('authPage').style.display = 'none';
      document.getElementById('appContainer').style.display = 'block';
      
      const user = JSON.parse(localStorage.getItem('user'));
      document.getElementById('profileUsername').textContent = user?.username || 'User';
      document.getElementById('profileEmail').textContent = user?.email || 'user@email.com';
      
      // Clear any previous user's canvas data
      if (ctx && canvas) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        canvas.style.display = 'none';
      }
      isDrawMode = false;
      
      updateDateTime();
      setInterval(updateDateTime, 1000);
      
      await loadNotes();
      renderNotes();
      document.getElementById('searchInput').value = '';
    }

    function updateDateTime() {
      const now = new Date();
      const options = {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      };
      document.getElementById('datetimeDisplay').textContent = now.toLocaleDateString('en-US', options);
    }

    function showLogin() {
      document.getElementById('authPage').style.display = 'flex';
      document.getElementById('appContainer').style.display = 'none';
      initParticles();
    }

    // Tab Switching
    function switchTab(tab) {
      const tabButtons = document.querySelectorAll('.tab-button');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabButtons.forEach(btn => btn.classList.remove('active'));
      tabContents.forEach(content => content.classList.remove('active'));
      
      event.target.classList.add('active');
      document.getElementById(tab + '-tab').classList.add('active');
    }

    // Password Toggle
    function togglePassword(inputId) {
      const input = document.getElementById(inputId);
      const button = input.parentElement.querySelector('.password-toggle');
      const svg = button.querySelector('svg');
      
      if (input.type === 'password') {
        input.type = 'text';
        svg.innerHTML = `
          <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" stroke="currentColor" stroke-width="2" fill="none"/>
          <line x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2"/>
        `;
      } else {
        input.type = 'password';
        svg.innerHTML = `
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" stroke-width="2" fill="none"/>
          <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
        `;
      }
    }

    // Floating Particles
    function initParticles() {
      const container = document.getElementById('particles-container');
      if (!container) return;
      
      container.innerHTML = '';
      const particleCount = 20;
      
      for (let i = 0; i < particleCount; i++) {
        createParticle(container);
      }
    }

    function createParticle(container) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      
      particle.style.left = Math.random() * 100 + '%';
      particle.style.top = Math.random() * 100 + '%';
      particle.style.animationDelay = Math.random() * 2 + 's';
      particle.style.animationDuration = (3 + Math.random() * 2) + 's';
      
      container.appendChild(particle);
      
      particle.addEventListener('animationiteration', () => {
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
      });
    }

    // OPEN PRINT SELECTOR MODAL
document.getElementById("openPrintSelector").addEventListener("click", () => {
    const modal = document.getElementById("printNoteModal");
    const dropdown = document.getElementById("printSelectDropdown");

    dropdown.innerHTML = `<option value="">-- Choose Note --</option>`;

    // Load saved notes
    const notes = JSON.parse(localStorage.getItem("notes")) || [];

    notes.forEach((n, index) => {
        let opt = document.createElement("option");
        opt.value = index;
        opt.textContent = n.title || "Untitled Note";
        dropdown.appendChild(opt);
    });

    modal.style.display = "flex";
});


// CLOSE MODAL
document.getElementById("cancelPrint").addEventListener("click", () => {
    document.getElementById("printNoteModal").style.display = "none";
});


// Helper: populate dropdown with visible notes (hidden === true are excluded)
async function populatePrintDropdown() {
  const dropdown = document.getElementById("printSelectDropdown");
  dropdown.innerHTML = `<option value="">-- Choose Note --</option>`;

  try {
    // Ensure latest notes from backend
    if (typeof loadNotes === 'function') {
      await loadNotes();
    } else {
      console.warn("loadNotes() not found ‚Äî using existing notes array (if any).");
    }

    if (!Array.isArray(notes)) {
      console.error("Notes array not available after loadNotes():", notes);
      return [];
    }

    // Treat note.hidden === true as hidden; anything else is visible
    const visibleNotes = notes.filter(n => n && n.hidden !== true);

    // Optional: sort by created date (newest first) or by title
    visibleNotes.sort((a, b) => {
      if (a && b && a.created && b.created) {
        return new Date(b.created) - new Date(a.created);
      }
      return 0;
    });

    visibleNotes.forEach(note => {
      const option = document.createElement("option");
      option.value = note.id ?? JSON.stringify(note); // fallback if id missing
      option.textContent = (note.title && note.title.trim()) ? note.title : "Untitled Note";
      dropdown.appendChild(option);
    });

    return visibleNotes;
  } catch (err) {
    console.error("populatePrintDropdown error:", err);
    return [];
  }
}

// OPEN PRINT SELECTOR MODAL
document.getElementById("openPrintSelector").addEventListener("click", async () => {
  const modal = document.getElementById("printNoteModal");

  // Populate dropdown (this will call loadNotes and wait)
  const visibleNotes = await populatePrintDropdown();

  if (!visibleNotes || visibleNotes.length === 0) {
    alert("No visible notes available to print.");
    return;
  }

  modal.style.display = "flex";
});

// CLOSE MODAL
document.getElementById("cancelPrint").addEventListener("click", () => {
  document.getElementById("printNoteModal").style.display = "none";
});

// PRINT: confirm button
document.getElementById("confirmPrint").addEventListener("click", async () => {
  const dropdown = document.getElementById("printSelectDropdown");
  const selectedValue = dropdown.value;

  if (!selectedValue) {
    alert("Please select a note to print.");
    return;
  }

  // Make sure notes are up-to-date
  if (typeof loadNotes === 'function') {
    await loadNotes();
  }

  // Find note by id (or fallback by matching title if id missing)
  let note = Array.isArray(notes) ? notes.find(n => (n.id != null && String(n.id) === String(selectedValue))) : null;

  if (!note) {
    // fallback: try to find by title match (rare)
    note = Array.isArray(notes) ? notes.find(n => (n.title && String(n.title) === String(dropdown.options[dropdown.selectedIndex].text))) : null;
  }

  if (!note) {
    alert("Selected note could not be found. Try again.");
    console.error("Selected note not found. current notes:", notes, "selectedValue:", selectedValue);
    return;
  }

  // Build printable content (includes attachments/drawing/todo if your note contains html)
  const printWindow = window.open("", "_blank");
  printWindow.document.write(`
    <html>
      <head>
        <title>${(note.title||'Untitled Note')}</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 24px; color: #000; }
          h1 { font-size: 22px; margin-bottom: 8px; }
          .meta { color: #555; font-size: 12px; margin-bottom: 18px; }
          .content { white-space: pre-wrap; line-height: 1.5; }
          img { max-width: 100%; margin: 8px 0; }
        </style>
      </head>
      <body>
        <h1>${(note.title||'Untitled Note')}</h1>
        <div class="meta">Created: ${note.created || ''}</div>
        <div class="content">${note.content || ''}</div>
      </body>
    </html>
  `);
  printWindow.document.close();
  printWindow.focus();
  printWindow.print();

  // close modal after printing
  document.getElementById("printNoteModal").style.display = "none";
});

// FIXED: Enhanced renderNotes function
function renderNotes(searchTerm = '') {
    const container = document.getElementById('notesContainer');
    let filteredNotes = notes.filter(note => note && note.hidden !== true);

    if (searchTerm && searchTerm.trim() !== '') {
        const search = searchTerm.toLowerCase().trim();
        filteredNotes = filteredNotes.filter(note => 
            (note.title && note.title.toLowerCase().includes(search)) ||
            (note.content && note.content.toLowerCase().includes(search)) ||
            (note.tag && note.tag.toLowerCase().includes(search))
        );
    }

    // Sort: pinned first, then by date
    filteredNotes.sort((a, b) => {
        if (a.pinned && !b.pinned) return -1;
        if (!a.pinned && b.pinned) return 1;
        return new Date(b.created || 0) - new Date(a.created || 0);
    });
    
    // Update hide/unhide button visibility
    const hasHiddenNotes = notes.some(note => note && note.hidden === true);
    document.getElementById('hideNotesBtn').style.display = hasHiddenNotes ? 'none' : 'flex';
    document.getElementById('unhideNotesBtn').style.display = hasHiddenNotes ? 'flex' : 'none';

    // Render notes...
    // (Keep your existing rendering code here)
}

   // Render notes with search functionality
function renderNotes(searchTerm = '') {
    const container = document.getElementById('notesContainer');
    let filteredNotes = notes.filter(note => !note.hidden);

    if (searchTerm && searchTerm.trim() !== '') {
        const search = searchTerm.toLowerCase().trim();
        filteredNotes = filteredNotes.filter(note => 
            note.title.toLowerCase().includes(search) ||
            note.content.toLowerCase().includes(search)
        );
    }

    filteredNotes.sort((a, b) => {
        if (a.pinned && !b.pinned) return -1;
        if (!a.pinned && b.pinned) return 1;
        return new Date(b.created) - new Date(a.created);
    });
    
    const hasHiddenNotes = notes.some(note => note.hidden);
    document.getElementById('hideNotesBtn').style.display = hasHiddenNotes ? 'none' : 'flex';
    document.getElementById('unhideNotesBtn').style.display = hasHiddenNotes ? 'flex' : 'none';

    if (filteredNotes.length === 0) {
        if (searchTerm && searchTerm.trim() !== '') {
            container.innerHTML = '<p style="text-align: center; color: #666; margin-top: 40px;">No notes found matching "' + searchTerm + '"</p>';
        } else {
            container.innerHTML = '<p style="text-align: center; color: #666; margin-top: 40px;">No notes found. Create your first note!</p>';
        }
        return;
    }

    container.innerHTML = filteredNotes.map(note => `
        <div class="note-item ${note.pinned ? 'pinned' : ''}" ondblclick="viewNote(${note.id})">
            <div class="note-title">
                ${note.pinned ? '<span class="pin-indicator">üìå</span>' : ''}
                ${note.title}
            </div>
            <div class="note-content">${note.content.substring(0, 100)}${note.content.length > 100 ? '...' : ''}</div>
            ${note.drawing ? `<div style="margin-top: 10px;"><img src="${note.drawing}" alt="Drawing" style="max-width: 100px; max-height: 100px; object-fit: cover; border-radius: 4px; margin-right: 10px; cursor: pointer;" onclick="viewMedia('${note.drawing}')"></div>` : ''}
            ${note.attachments && note.attachments.length > 0 ? `<div style="margin-top: 10px;">${note.attachments.map(att => 
                att.type === 'image' ? 
                `<img src="${att.url}" alt="Note image" style="max-width: 100px; max-height: 100px; object-fit: cover; border-radius: 4px; margin-right: 10px; cursor: pointer;" onclick="viewMedia('${att.url}')">` :
                `<audio controls style="width: 200px; margin-right: 10px;"><source src="${att.url}" type="audio/mpeg"></audio>`
            ).join('')}</div>` : ''}
            <div class="note-meta">
                <span>${formatDate(note.created)}</span>
                <div class="note-actions">
                    <button class="pin-btn ${note.pinned ? 'pinned' : ''}" onclick="togglePin(${note.id})">
                        ${note.pinned ? 'Unpin' : 'Pin'}
                    </button>
                    <button class="edit-btn" onclick="editNote(${note.id})">Edit</button>
                    <button class="delete-btn" onclick="deleteNote(${note.id})">Delete</button>
                </div>
            </div>
        </div>
    `).join('');
}
    // Format date
    function formatDate(dateString) {
      return new Date(dateString).toLocaleDateString();
    }

    
// Add this function to handle double-click viewing
function viewNote(id) {
    const note = notes.find(n => n.id === id);
    if (note) {
        // Open note in view mode (read-only)
        openNoteInViewMode(note);
    }
}

// Add this function to open note in view mode
function openNoteInViewMode(note) {
    const editor = document.getElementById('noteEditor');
    const title = document.getElementById('editorTitle');
    const noteTitle = document.getElementById('noteTitle');
    const noteContent = document.getElementById('noteContent');
    const tagInput = document.getElementById('Tag');
    
    // Set note data
    currentNoteId = note.id;
    title.textContent = 'View Note';
    noteTitle.value = note.title;
    noteContent.innerHTML = note.content;
    tagInput.value = note.tag || '';
    
    // Make fields read-only
    noteTitle.readOnly = true;
    noteContent.contentEditable = 'false';
    tagInput.readOnly = true;
    
    // Hide editing controls
    document.querySelectorAll('.editor-options button').forEach(btn => {
        btn.style.display = 'none';
    });
    
    // Hide save button, show close button
    document.getElementById('saveNoteBtn').style.display = 'none';
    document.getElementById('cancelNoteBtn').textContent = 'Close';
    
    // Load attachments if any
    currentAttachments = [...(note.attachments || [])];
    renderAttachments();
    
    // Show the editor in view mode
    editor.style.display = 'flex';
}

    let recognition = null;

if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  recognition = new SR();
  recognition.lang = 'en-US';
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;

  const status = document.getElementById('status');
  const noteEditor = document.getElementById('noteContent'); // üëà your editable area

  recognition.onstart = () => {
    status.textContent = "üéô Listening...";
  };

  recognition.onend = () => {
    status.textContent = "‚úÖ Stopped listening";
  };

  recognition.onresult = (e) => {
    const text = e.results[0][0].transcript;
    if (noteEditor) {
      // Insert at the cursor position inside the editable div
      const sel = window.getSelection();
      if (sel.rangeCount > 0) {
        const range = sel.getRangeAt(0);
        range.deleteContents();
        range.insertNode(document.createTextNode(text + " "));
        range.collapse(false);
      } else {
        // fallback if no selection (just append)
        noteEditor.innerText += text + " ";
      }
      noteEditor.focus();
    }
    status.textContent = "üìù Inserted: " + text;
  };

  recognition.onerror = (event) => {
    console.error('Speech Recognition Error:', event.error);
    status.textContent = `Error: ${event.error}`;
  };
} else {
  alert('Speech recognition not supported in this browser.');
}

document.getElementById('voiceToTextBtn').addEventListener('click', () => {
  if (!recognition) return alert('Speech recognition not supported');
  try {
    recognition.start();
  } catch (err) {
    console.error('Recognition start error:', err);
  }
});


// Image insertion inside noteContent
const addImageBtn = document.getElementById("addImageBtn");
const imageInput = document.getElementById("imageInput");
const notecontent = document.getElementById("noteContent");
const note = {
  title: document.getElementById("noteTitle").value,
  tag: document.getElementById("Tag").value,
  content: document.getElementById("noteContent").innerHTML, // üëà include images
  date: new Date()
};


addImageBtn.addEventListener("click", () => {
  imageInput.click(); // open file dialog
});

imageInput.addEventListener("change", () => {
  const file = imageInput.files[0];
  
  if (!file) return;

  const reader = new FileReader();
  reader.onload = (e) => {
    const img = document.createElement("img");
    img.src = e.target.result;
    img.alt = "Inserted image";
    img.style.maxWidth = "30%";
    img.style.margin = "10px 0";
    img.style.borderRadius = "8px";
    img.style.display = "block";
    img.style.boxShadow = "0 0 8px rgba(0,0,0,0.15)";
    insertImageAtCursor(img);
  };
  reader.readAsDataURL(file);
  imageInput.value = ""; // reset
});

function insertImageAtCursor(imgElement) {
  const selection = window.getSelection();
  if (!selection || selection.rangeCount === 0) {
    noteContent.appendChild(imgElement);
    return;
  }
  const range = selection.getRangeAt(0);
  range.deleteContents();
  range.insertNode(imgElement);
  range.collapse(false);
  selection.removeAllRanges();
  selection.addRange(range);
}



    // Show note editor
    function showNoteEditor(note = null) {
      const editor = document.getElementById('noteEditor');
      const title = document.getElementById('editorTitle');
      const noteTitle = document.getElementById('noteTitle');
      const noteContent = document.getElementById('noteContent');
      
      if (note) {
        currentNoteId = note.id;
        title.textContent = 'Edit Note';
        noteTitle.value = note.title;
        noteContent.innerHTML = note.content;
        currentAttachments = [...(note.attachments || [])];

        undoRedoManager.clear();
  if (note) {
    const initialState = {
      title: note.title,
      tag: note.tag || '',
      content: note.content,
      attachments: [...(note.attachments || [])],
      drawing: note.drawing || null
    };
    undoRedoManager.saveState(initialState);
  } else {
    const initialState = captureEditorState();
    undoRedoManager.saveState(initialState);
  }
        
        // Load saved drawing if exists
        if (note.drawing) {
          setTimeout(() => {
            resizeCanvas();
            const img = new Image();
            img.onload = function() {
              ctx.drawImage(img, 0, 0);
              canvas.style.display = 'block'; // Show canvas with drawing
            };
            img.src = note.drawing;
          }, 100);
        }
      } else {
        currentNoteId = null;
        title.textContent = 'New Note';
        noteTitle.value = '';
        noteContent.innerText = '';
        currentAttachments = [];
      }
      
      // Reset drawing mode
      isDrawMode = false;
      if (!note || !note.drawing) {
        canvas.style.display = 'none';
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
      canvas.style.pointerEvents = 'none';
      noteContent.contentEditable = 'true';
      clearDrawBtn.style.display = 'none';
      penBtn.style.background = '';
      penBtn.style.color = '';
      
      renderAttachments();
      editor.style.display = 'flex';
    }
    

    // Hide note editor
function hideNoteEditor() {
    const editor = document.getElementById('noteEditor');
    const noteTitle = document.getElementById('noteTitle');
    const noteContent = document.getElementById('noteContent');
    const tagInput = document.getElementById('Tag');
    
    // Reset read-only states
    noteTitle.readOnly = false;
    noteContent.contentEditable = 'true';
    tagInput.readOnly = false;
    
    // Show editing controls
    document.querySelectorAll('.editor-options button').forEach(btn => {
        btn.style.display = 'inline-block';
    });
    
    // Show save button, reset cancel button text
    document.getElementById('saveNoteBtn').style.display = 'inline-block';
    document.getElementById('cancelNoteBtn').textContent = 'Cancel';
    
    editor.style.display = 'none';
}
    // Show/hide To-Do List
const addTodoBtn = document.getElementById('addTodoBtn');
const todoContainer = document.getElementById('todoContainer');

addTodoBtn.addEventListener('click', () => {
  if (todoContainer.style.display === "none") {
    todoContainer.style.display = "block";
  } else {
    todoContainer.style.display = "none";
  }
});



// Add tasks functionality
const addTaskBtn = document.getElementById('addTaskBtn');
const taskInput = document.getElementById('taskInput');
const taskList = document.getElementById('taskList');

addTaskBtn.addEventListener('click', () => {
  const taskText = taskInput.value.trim();
  if (taskText === '') return;

  const li = document.createElement('li');
  li.textContent = taskText;

  const deleteBtn = document.createElement('button');
  deleteBtn.textContent = 'Delete';
  deleteBtn.onclick = () => li.remove();

  li.appendChild(deleteBtn);
  taskList.appendChild(li);

  taskInput.value = '';
  scheduleStateSave();
});

const noteContent = document.getElementById('noteContent');
const boldBtn = document.getElementById('boldBtn');
const italicBtn = document.getElementById('italicBtn');
const underlineBtn = document.getElementById('underlineBtn');

// Focus inside the editor before applying style
function focusEditor() {
  noteContent.focus();
}

// Set font for new typing at cursor position
function setFontAtCursor(fontFamily) {
  const selection = window.getSelection();
  if (selection.rangeCount > 0) {
    const range = selection.getRangeAt(0);
    const span = document.createElement('span');
    span.style.fontFamily = fontFamily;
    span.appendChild(document.createTextNode('\u200B')); // Zero-width space
    range.insertNode(span);
    range.setStartAfter(span);
    range.collapse(true);
    selection.removeAllRanges();
    selection.addRange(range);
  }
}

// Bold
boldBtn.addEventListener('click', () => {
  focusEditor();
  document.execCommand('bold');
});

// Italic
italicBtn.addEventListener('click', () => {
  focusEditor();
  document.execCommand('italic');
});

// Underline
underlineBtn.addEventListener('click', () => {
  focusEditor();
  document.execCommand('underline');
});

// Font Style functionality - COMPLETE REWRITE
const styleButton = document.getElementById('styleButton');
const fontDropdown = document.getElementById('fontDropdown');
const noteArea = document.getElementById('noteContent');
const fontOptions = document.querySelectorAll('.font-option');

// Toggle dropdown visibility
styleButton.addEventListener('click', function(e) {
  e.stopPropagation();
  fontDropdown.classList.toggle('show');
});

// Close dropdown when clicking outside
document.addEventListener('click', function(e) {
  if (!e.target.closest('.font-selector')) {
    fontDropdown.classList.remove('show');
  }
});

// NEW APPROACH: Save selection before dropdown opens
let savedSelection = null;

function saveSelection() {
  const sel = window.getSelection();
  if (sel.rangeCount > 0) {
    savedSelection = sel.getRangeAt(0);
  }
}

function restoreSelection() {
  if (savedSelection) {
    const sel = window.getSelection();
    sel.removeAllRanges();
    sel.addRange(savedSelection);
  }
}

// Save selection when dropdown is about to open
styleButton.addEventListener('mousedown', function() {
  saveSelection();
});

// Handle font selection with GUARANTEED selection restoration
fontOptions.forEach(option => {
  option.addEventListener('mousedown', function(e) {
    e.preventDefault(); // Prevent focus loss
  });
  
  option.addEventListener('click', function() {
    const selectedFont = this.getAttribute('data-font');
    
    // Remove selected class from all options
    fontOptions.forEach(opt => opt.classList.remove('selected'));
    
    // Add selected class to clicked option
    this.classList.add('selected');
    
    // Restore the saved selection
    restoreSelection();
    
    // Apply the font using multiple methods for maximum compatibility
    applyFontWithFallback(selectedFont);
    
    // Close dropdown
    fontDropdown.classList.remove('show');
    
    // Clear saved selection
    savedSelection = null;
  });
});

// ULTRA-ROBUST font application with multiple fallbacks
function applyFontWithFallback(fontFamily) {
  const selection = window.getSelection();
  
  // Check if we have a valid selection
  if (!selection || selection.rangeCount === 0 || selection.toString().trim() === '') {
    console.log('No text selected, applying to entire note');
    applyFontToAllText(fontFamily);
    return;
  }
  
  console.log('Applying font to selected text:', selection.toString());
  
  // METHOD 1: Try execCommand first (most compatible)
  try {
    document.execCommand('styleWithCSS', false, true);
    const success = document.execCommand('fontName', false, fontFamily);
    if (success) {
      console.log('Font applied successfully with execCommand');
      return;
    }
  } catch (e) {
    console.log('execCommand failed, trying alternative methods');
  }
  
  // METHOD 2: Manual span wrapping
  try {
    const range = selection.getRangeAt(0);
    
    // Create span with the desired font
    const span = document.createElement('span');
    span.style.fontFamily = fontFamily;
    
    // Try to surround the content
    try {
      range.surroundContents(span);
      console.log('Font applied successfully with surroundContents');
    } catch (surroundError) {
      // If surroundContents fails, extract and wrap
      console.log('surroundContents failed, using extractContents');
      const content = range.extractContents();
      span.appendChild(content);
      range.insertNode(span);
    }
    
    // Move cursor after the styled text
    const newRange = document.createRange();
    newRange.setStartAfter(span);
    newRange.collapse(true);
    selection.removeAllRanges();
    selection.addRange(newRange);
    
  } catch (error) {
    console.error('All methods failed, applying to all text:', error);
    applyFontToAllText(fontFamily);
  }
}

// Fallback: Apply font to all text
function applyFontToAllText(fontFamily) {
  noteArea.style.fontFamily = fontFamily;
}

// Add visual feedback for text selection
noteArea.addEventListener('mouseup', highlightSelection);
noteArea.addEventListener('keyup', highlightSelection);

function highlightSelection() {
  const selection = window.getSelection();
  const hasTextSelected = selection.toString().trim().length > 0;
  
  // Visual feedback in console
  if (hasTextSelected) {
    console.log('‚úÖ Text selected:', selection.toString());
  }
}

// Drawing functionality
let penBtn, clearDrawBtn, canvas, ctx;
let isDrawing = false;
let isDrawMode = false;
let lastX = 0;
let lastY = 0;

// Initialize drawing elements safely
function initializeDrawing() {
  try {
    penBtn = document.getElementById('penBtn');
    clearDrawBtn = document.getElementById('clearDrawBtn');
    canvas = document.getElementById('drawingCanvas');
    
    if (canvas) {
      ctx = canvas.getContext('2d', { willReadFrequently: true });
      return true;
    }
    return false;
  } catch (error) {
    console.error('Drawing initialization failed:', error);
    return false;
  }
}

// Setup drawing events with safety checks
function setupDrawingEvents() {
  if (!initializeDrawing()) {
    console.warn('Drawing functionality not available');
    return;
  }

// Toggle drawing mode
penBtn.addEventListener('click', () => {
  isDrawMode = !isDrawMode;
  if (isDrawMode) {
    canvas.style.display = 'block';
    canvas.style.pointerEvents = 'auto';
    noteArea.contentEditable = 'false';
    clearDrawBtn.style.display = 'inline-block';
    penBtn.style.background = '#007bff';
    penBtn.style.color = 'white';
    resizeCanvas();
  } else {
    canvas.style.display = 'block'; // Keep canvas visible to show drawing
    canvas.style.pointerEvents = 'none';
    noteArea.contentEditable = 'true';
    clearDrawBtn.style.display = 'none';
    penBtn.style.background = '';
    penBtn.style.color = '';
  }
});

// Resize canvas to match note area content
function resizeCanvas() {
  if (!ctx || !canvas) return;
  
  const oldImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
  canvas.width = noteArea.offsetWidth - 40; // Account for padding
  canvas.height = noteArea.offsetHeight - 40;
  canvas.style.width = (noteArea.offsetWidth - 40) + 'px';
  canvas.style.height = (noteArea.offsetHeight - 40) + 'px';
  
  // Restore drawing after resize
  if (oldImageData.width > 0 && oldImageData.height > 0) {
    ctx.putImageData(oldImageData, 0, 0);
  }
  
  // Set canvas background to transparent
  ctx.globalCompositeOperation = 'source-over';
}

// Drawing functions
function startDrawing(e) {
  if (!isDrawMode) return;
  isDrawing = true;
  const rect = canvas.getBoundingClientRect();
  lastX = e.clientX - rect.left;
  lastY = e.clientY - rect.top;
  
  ctx.beginPath();
  ctx.moveTo(lastX, lastY);
  
  // Draw a small dot for single clicks
  ctx.lineTo(lastX + 0.1, lastY + 0.1);
  ctx.strokeStyle = '#000000';
  ctx.lineWidth = 2;
  ctx.lineCap = 'round';
  ctx.lineJoin = 'round';
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(lastX, lastY);
}

function draw(e) {
  if (!isDrawing || !isDrawMode) return;
  
  const rect = canvas.getBoundingClientRect();
  const currentX = e.clientX - rect.left;
  const currentY = e.clientY - rect.top;
  
  ctx.strokeStyle = '#000000';
  ctx.lineWidth = 2;
  ctx.lineCap = 'round';
  ctx.lineJoin = 'round';
  ctx.globalCompositeOperation = 'source-over';
  
  ctx.lineTo(currentX, currentY);
  ctx.stroke();
  
  ctx.beginPath();
  ctx.moveTo(currentX, currentY);
}

function stopDrawing() {
  if (isDrawing) {
    isDrawing = false;
    ctx.beginPath();
  }
}

// Clear drawing
if (clearDrawBtn) {
  clearDrawBtn.addEventListener('click', () => {
    if (ctx && canvas) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      scheduleStateSave();
    }
  });
}

// Canvas event listeners
if (canvas) {
  canvas.addEventListener('mousedown', startDrawing);
  canvas.addEventListener('mousemove', draw);
  canvas.addEventListener('mouseup', stopDrawing);
  canvas.addEventListener('mouseout', stopDrawing);
}
} // End setupDrawingEvents
    // Render attachments
    function renderAttachments() {
      const container = document.getElementById('attachmentsContainer');
      container.innerHTML = '';
      
      currentAttachments.forEach((attachment, index) => {
        const attachmentItem = document.createElement('div');
        attachmentItem.className = 'attachment-item';
        
        let attachmentContent = '';
        
        if (attachment.type === 'image') {
          attachmentContent = `
            <div class="attachment-info">
              <span class="attachment-icon">üñºÔ∏è</span>
              <span>${attachment.name}</span>
            </div>
            <img src="${attachment.url}" class="image-preview" alt="${attachment.name}">
          `;
        } else if (attachment.type === 'audio') {
          attachmentContent = `
            <div class="attachment-info">
              <span class="attachment-icon">üéµ</span>
              <span>${attachment.name}</span>
            </div>
            <audio controls class="audio-player">
              <source src="${attachment.url}" type="audio/mpeg">
            </audio>
          `;
        }
        
        attachmentItem.innerHTML = `
          ${attachmentContent}
          <div>
            <button class="attachment-action" onclick="removeAttachment(${index})" title="Delete">üóëÔ∏è</button>
          </div>
        `;
        
        container.appendChild(attachmentItem);
      });
    }

    // Remove attachment
    function removeAttachment(index) {
      currentAttachments.splice(index, 1);
      renderAttachments();
    }

    // Enhanced save note function
async function saveNote() {
    const title = document.getElementById('noteTitle').value.trim();
    const content = document.getElementById('noteContent').innerHTML.trim();
    const tag = document.getElementById('Tag').value.trim();
    
    if (!title) {
        alert('Please enter a title');
        return;
    }
    
    // Save drawing as image if exists
    let drawingData = null;
    if (canvas && canvas.width > 0 && canvas.height > 0) {
        try {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const hasDrawing = imageData.data.some(pixel => pixel !== 0);
            if (hasDrawing) {
                drawingData = canvas.toDataURL('image/png');
            }
        } catch (error) {
            console.log('No drawing to save');
        }
    }

    const noteData = {
        title,
        content,
        tag,
        drawing: drawingData,
        attachments: [...currentAttachments],
        pinned: currentNoteId ? (notes.find(n => n.id === currentNoteId)?.pinned || false) : false,
        created: currentNoteId ? (notes.find(n => n.id === currentNoteId)?.created || new Date().toISOString()) : new Date().toISOString(),
        updated: new Date().toISOString()
    };

    try {
        const success = await saveNoteToStorage(noteData, currentNoteId);
        
        if (success) {
            await loadNotesFromStorage();
            renderNotes();
            hideNoteEditor();
            showNotification('Note saved successfully!', 'success');
        } else {
            throw new Error('Failed to save note');
        }
    } catch (error) {
        console.error('Save error:', error);
        showNotification('Failed to save note: ' + error.message, 'error');
    }
}

// Add notification function
function showNotification(message, type = 'info') {
    // Remove existing notifications
    const existingNotification = document.querySelector('.save-notification');
    if (existingNotification) {
        existingNotification.remove();
    }
    
    const notification = document.createElement('div');
    notification.className = `save-notification ${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};
        color: white;
        border-radius: 4px;
        z-index: 10000;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.remove();
    }, 3000);
}

// Enhanced storage functions with localStorage fallback
async function saveNoteToStorage(noteData, id = null) {
    try {
        // Try API first
        if (id) {
            await apiCall(`/notes/${id}`, {
                method: 'PUT',
                body: JSON.stringify(noteData)
            });
        } else {
            await apiCall('/notes', {
                method: 'POST',
                body: JSON.stringify(noteData)
            });
        }
        return true;
    } catch (error) {
        console.log('API failed, using localStorage fallback:', error.message);
        return saveNoteToLocalStorage(noteData, id);
    }
}

// localStorage implementation
function saveNoteToLocalStorage(noteData, id = null) {
    try {
        let notes = JSON.parse(localStorage.getItem('etherx_notes')) || [];
        
        if (id) {
            // Update existing note
            const index = notes.findIndex(note => note.id === id);
            if (index !== -1) {
                notes[index] = { ...notes[index], ...noteData };
            } else {
                // If note not found, create new one
                const newNote = {
                    id: id,
                    ...noteData,
                    created: noteData.created || new Date().toISOString()
                };
                notes.push(newNote);
            }
        } else {
            // Create new note
            const newNote = {
                id: Date.now(),
                ...noteData,
                created: new Date().toISOString()
            };
            notes.push(newNote);
        }
        
        localStorage.setItem('etherx_notes', JSON.stringify(notes));
        return true;
    } catch (error) {
        console.error('localStorage save failed:', error);
        return false;
    }
}

// Enhanced load function
async function loadNotesFromStorage() {
    try {
        const response = await apiCall('/notes');
        notes = Array.isArray(response) ? response : [];
        // Also sync to localStorage for backup
        localStorage.setItem('etherx_notes', JSON.stringify(notes));
    } catch (error) {
        console.log('API load failed, using localStorage:', error.message);
        notes = JSON.parse(localStorage.getItem('etherx_notes')) || [];
    }
}

// Enhanced delete function
async function deleteNoteFromStorage(id) {
    try {
        await apiCall(`/notes/${id}`, { method: 'DELETE' });
        // Also delete from localStorage
        deleteNoteFromLocalStorage(id);
        return true;
    } catch (error) {
        console.log('API delete failed, using localStorage:', error.message);
        return deleteNoteFromLocalStorage(id);
    }
}

function deleteNoteFromLocalStorage(id) {
    try {
        let notes = JSON.parse(localStorage.getItem('etherx_notes')) || [];
        notes = notes.filter(note => note.id !== id);
        localStorage.setItem('etherx_notes', JSON.stringify(notes));
        return true;
    } catch (error) {
        console.error('localStorage delete failed:', error);
        return false;
    }
}

// FIXED: Enhanced populatePrintDropdown function
async function populatePrintDropdown() {
    const dropdown = document.getElementById('printSelectDropdown');
    dropdown.innerHTML = `<option value="">-- Choose Note --</option>`;

    try {
        // Load latest notes
        await loadNotesFromStorage();
        
        if (!Array.isArray(notes) || notes.length === 0) {
            const option = document.createElement('option');
            option.textContent = 'No notes available';
            option.disabled = true;
            dropdown.appendChild(option);
            return [];
        }

        // Filter out hidden notes and ensure valid notes
        const visibleNotes = notes.filter(note => note && note.hidden !== true);
        
        if (visibleNotes.length === 0) {
            const option = document.createElement('option');
            option.textContent = 'No visible notes available';
            option.disabled = true;
            dropdown.appendChild(option);
            return [];
        }

        // Sort by creation date (newest first)
        visibleNotes.sort((a, b) => new Date(b.created || 0) - new Date(a.created || 0));

        // Populate dropdown
        visibleNotes.forEach(note => {
            const option = document.createElement('option');
            option.value = note.id;
            option.textContent = note.title && note.title.trim() ? note.title : 'Untitled Note';
            dropdown.appendChild(option);
        });

        return visibleNotes;
    } catch (err) {
        console.error('populatePrintDropdown error:', err);
        const option = document.createElement('option');
        option.textContent = 'Error loading notes';
        option.disabled = true;
        dropdown.appendChild(option);
        return [];
    }
}

// FIXED: Enhanced print functionality
document.getElementById('confirmPrint').addEventListener('click', async () => {
    const dropdown = document.getElementById('printSelectDropdown');
    const selectedId = parseInt(dropdown.value);

    if (!selectedId) {
        alert('Please select a note to print.');
        return;
    }

    try {
        // Ensure we have the latest notes
        await loadNotesFromStorage();
        
        // Find the selected note
        const note = notes.find(n => n.id === selectedId);
        
        if (!note) {
            alert('Selected note not found. Please try again.');
            return;
        }

        // Create print window with proper styling
        const printWindow = window.open('', '_blank');
        const printDate = new Date().toLocaleString();
        
        printWindow.document.write(`
            <html>
                <head>
                    <title>${note.title || 'Untitled Note'} - Print</title>
                    <style>
                        body { 
                            font-family: Arial, sans-serif; 
                            padding: 30px; 
                            color: #000;
                            line-height: 1.6;
                            max-width: 800px;
                            margin: 0 auto;
                        }
                        .header { 
                            border-bottom: 2px solid #333;
                            padding-bottom: 15px;
                            margin-bottom: 20px;
                        }
                        h1 { 
                            font-size: 24px; 
                            margin: 0 0 10px 0;
                            color: #333;
                        }
                        .meta { 
                            color: #666; 
                            font-size: 14px;
                            margin-bottom: 5px;
                        }
                        .tag { 
                            background: #f0f0f0;
                            padding: 4px 8px;
                            border-radius: 12px;
                            font-size: 12px;
                            display: inline-block;
                            margin: 5px 0;
                        }
                        .content { 
                            white-space: pre-wrap;
                            margin: 20px 0;
                            padding: 20px;
                            background: #f9f9f9;
                            border-radius: 8px;
                            border: 1px solid #ddd;
                        }
                        .drawing-container, .attachments-container {
                            margin: 20px 0;
                            padding: 15px;
                            background: #f9f9f9;
                            border-radius: 8px;
                        }
                        .drawing-container img {
                            max-width: 100%;
                            height: auto;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                        }
                        .footer {
                            margin-top: 30px;
                            padding-top: 15px;
                            border-top: 1px solid #ddd;
                            font-size: 12px;
                            color: #666;
                            text-align: center;
                        }
                        @media print {
                            body { padding: 15px; }
                            .no-print { display: none; }
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>${note.title || 'Untitled Note'}</h1>
                        <div class="meta">Created: ${new Date(note.created).toLocaleString()}</div>
                        ${note.tag ? `<div class="tag">Tag: ${note.tag}</div>` : ''}
                        <div class="meta">Printed: ${printDate}</div>
                    </div>
                    
                    ${note.drawing ? `
                        <div class="drawing-container">
                            <h3>Drawing:</h3>
                            <img src="${note.drawing}" alt="Note Drawing">
                        </div>
                    ` : ''}
                    
                    <div class="content-section">
                        <h3>Content:</h3>
                        <div class="content">${note.content || 'No content'}</div>
                    </div>
                    
                    ${note.attachments && note.attachments.length > 0 ? `
                        <div class="attachments-container">
                            <h3>Attachments:</h3>
                            ${note.attachments.map(att => 
                                att.type === 'image' ? 
                                `<div style="margin:10px 0;">
                                    <strong>${att.name}</strong><br>
                                    <img src="${att.url}" style="max-width:200px; height:auto; border:1px solid #ddd; border-radius:4px;">
                                </div>` :
                                `<div style="margin:10px 0;">
                                    <strong>${att.name}</strong> (Audio file)
                                </div>`
                            ).join('')}
                        </div>
                    ` : ''}
                    
                    <div class="footer">
                        Printed from EtherX OneNote ‚Ä¢ ${printDate}
                    </div>
                    
                    <button class="no-print" onclick="window.print()" style="
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        padding: 10px 20px;
                        background: #007bff;
                        color: white;
                        border: none;
                        border-radius: 5px;
                        cursor: pointer;
                    ">Print This Page</button>
                </body>
            </html>
        `);
        
        printWindow.document.close();
        
        // Auto-print after a short delay
        setTimeout(() => {
            printWindow.print();
        }, 500);
        
        // Close modal after printing
        document.getElementById('printNoteModal').style.display = 'none';
        
    } catch (error) {
        console.error('Print error:', error);
        alert('Error printing note: ' + error.message);
    }
});


    // Edit note
    function editNote(id) {
      const note = notes.find(n => n.id === id);
      if (note) showNoteEditor(note);
    }

    // Delete note
    async function deleteNote(id) {
      if (confirm('Are you sure you want to delete this note?')) {
        try {
          await apiCall(`/notes/${id}`, { method: 'DELETE' });
          await loadNotes();
          renderNotes();
        } catch (error) {
          alert('Failed to delete note: ' + error.message);
        }
      }
    }

    // Toggle pin status
    async function togglePin(id) {
      try {
        const note = notes.find(n => n.id === id);
        if (!note) return;
        
        const updatedNote = {
          ...note,
          pinned: !note.pinned
        };
        
        await apiCall(`/notes/${id}`, {
          method: 'PUT',
          body: JSON.stringify(updatedNote)
        });
        
        await loadNotes();
        renderNotes();
      } catch (error) {
        alert('Failed to update pin status: ' + error.message);
      }
    }

    // Hide specific note
    async function hideNote(id) {
      const pin = prompt('Enter 4-digit PIN to hide this note:');
      if (pin && pin.length === 4 && /^\d{4}$/.test(pin)) {
        try {
          const note = notes.find(n => n.id === id);
          if (!note) return;
          
          // Store PIN if not already stored
          if (!localStorage.getItem('hidePin')) {
            localStorage.setItem('hidePin', pin);
          } else if (localStorage.getItem('hidePin') !== pin) {
            alert('PIN does not match. Note not hidden.');
            return;
          }
          
          const updatedNote = {
            ...note,
            hidden: true
          };
          
          await apiCall(`/notes/${id}`, {
            method: 'PUT',
            body: JSON.stringify(updatedNote)
          });
          
          await loadNotes();
          renderNotes();
          alert('Note has been hidden.');
        } catch (error) {
          alert('Failed to hide note: ' + error.message);
        }
      } else if (pin) {
        alert('Please enter a valid 4-digit PIN.');
      }
    }

    // View media
    function viewMedia(src) {
      window.open(src, '_blank');
    }

    // Handle file uploads
    function handleFileUpload(fileInput, type) {
      fileInput.addEventListener('change', function(e) {
        const files = e.target.files;
        
        for (let i = 0; i < files.length; i++) {
          const file = files[i];
          const reader = new FileReader();
          
          reader.onload = function(e) {
            const attachment = {
              id: Date.now() + i,
              name: file.name,
              type: type,
              url: e.target.result
            };
            
            currentAttachments.push(attachment);
            renderAttachments();
          };
          
          reader.readAsDataURL(file);
        }
        
        fileInput.value = '';
      });
    }

   // Template functionality
const templates = {
  blank: { title: '', content: '' },
  meeting: {
    title: 'Meeting Notes - [Date]',
    content: 'Meeting: [Meeting Name]\nDate: [Date]\nAttendees: \n\nAgenda:\n1. \n2. \n3. \n\nNotes:\n\n\nAction Items:\n- [ ] \n- [ ] \n- [ ] '
  },
  project: {
    title: 'Project Plan - [Project Name]',
    content: 'Project: [Project Name]\nStart Date: [Date]\nEnd Date: [Date]\n\nObjectives:\n- \n- \n\nMilestones:\n1. \n2. \n3. \n\nResources Needed:\n- \n- \n\nRisks:\n- '
  },
  todo: {
    title: 'To-Do List - [Date]',
    content: 'Priority Tasks:\n- [ ] \n- [ ] \n- [ ] \n\nRegular Tasks:\n- [ ] \n- [ ] \n- [ ] \n\nCompleted:\n- [x] \n- [x] '
  },
  weekly: {
    title: 'Weekly Planner - Week of [Date]',
    content: 'Week of: [Date]\n\nMonday:\n- \n\nTuesday:\n- \n\nWednesday:\n- \n\nThursday:\n- \n\nFriday:\n- \n\nWeekend:\n- \n\nGoals for this week:\n1. \n2. \n3. '
  },
  business: {
    title: 'Business Plan - [Business Name]',
    content: 'Business Name: [Name]\n\nExecutive Summary:\n\n\nMarket Analysis:\n\n\nProducts/Services:\n\n\nMarketing Strategy:\n\n\nFinancial Projections:\n\n\nNext Steps:\n1. \n2. \n3. '
  },
  decorative: {
    title: '‚ú® [Your Title Here] ‚ú®',
    content: 'üåü Welcome to your decorative note! üåü\n\nüí´ Key Points:\n‚Ä¢ \n‚Ä¢ \n‚Ä¢ \n\nüéØ Goals:\n‚Üí \n‚Üí \n‚Üí \n\nüí° Ideas:\n‚òÖ \n‚òÖ \n‚òÖ '
  },
  academic: {
    title: 'Lecture Notes - [Course] - [Date]',
    content: 'Course: [Course Name]\nDate: [Date]\nTopic: [Topic]\n\nKey Concepts:\n1. \n2. \n3. \n\nNotes:\n\n\nQuestions:\n- \n- \n\nHomework/Assignments:\n- [ ] \n- [ ] '
  },
  styled: {
    title: 'üìã Styled Note Template',
    content: '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n          STYLED NOTE TEMPLATE\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\nüìå MAIN TOPIC: \n\n‚ñ™ Point 1:\n‚ñ™ Point 2:\n‚ñ™ Point 3:\n\nüîç DETAILS:\n\n\nüí≠ THOUGHTS:\n\n\n‚úÖ ACTION ITEMS:\n‚ñ° \n‚ñ° \n‚ñ° '
  },
  mindmap: {
    title: 'Mind Map - [Central Topic]',
    content: 'Central Topic: [TOPIC]\n\nBranch 1: [Main Idea]\n  ‚îú‚îÄ Sub-idea 1\n  ‚îú‚îÄ Sub-idea 2\n  ‚îî‚îÄ Sub-idea 3\n\nBranch 2: [Main Idea]\n  ‚îú‚îÄ Sub-idea 1\n  ‚îú‚îÄ Sub-idea 2\n  ‚îî‚îÄ Sub-idea 3\n\nBranch 3: [Main Idea]\n  ‚îú‚îÄ Sub-idea 1\n  ‚îú‚îÄ Sub-idea 2\n  ‚îî‚îÄ Sub-idea 3\n\nConnections:\n- \n- '
  },
  travel: {
    title: 'Travel Planner - [Destination]',
    content: 'Destination: [Location]\nDates: [Start] - [End]\n\nItinerary:\nDay 1:\n- \n\nDay 2:\n- \n\nDay 3:\n- \n\nPacking List:\n- [ ] \n- [ ] \n- [ ] \n\nBookings:\n- [ ] Flight\n- [ ] Hotel\n- [ ] Activities\n\nBudget:\nTotal: $\nSpent: $'
  },
  journal: {
    title: 'Journal Entry - [Date]',
    content: 'Date: [Date]\nMood: [Mood]\n\nToday I...\n\n\nGrateful for:\n1. \n2. \n3. \n\nChallenges:\n\n\nLessons learned:\n\n\nTomorrow I will:\n- \n- \n- '
  },
  budget: {
    title: 'Budget Planner - [Month/Year]',
    content: 'Budget for: [Month/Year]\n\nIncome:\n- Salary: $\n- Other: $\nTotal Income: $\n\nExpenses:\n- Rent/Mortgage: $\n- Utilities: $\n- Food: $\n- Transportation: $\n- Entertainment: $\n- Other: $\nTotal Expenses: $\n\nSavings Goal: $\nActual Savings: $'
  },
  workout: {
    title: 'Workout Log - [Date]',
    content: 'Date: [Date]\nWorkout Type: [Type]\nDuration: [Time]\n\nExercises:\n1. [Exercise] - [Sets] x [Reps] @ [Weight]\n2. [Exercise] - [Sets] x [Reps] @ [Weight]\n3. [Exercise] - [Sets] x [Reps] @ [Weight]\n\nNotes:\n\n\nNext workout goals:\n- \n- \n- '
  },
  book: {
    title: 'Book Notes - [Book Title]',
    content: 'Book: [Title]\nAuthor: [Author]\nDate Started: [Date]\nDate Finished: [Date]\n\nKey Themes:\n1. \n2. \n3. \n\nImportant Quotes:\n""\n\n""\n\nPersonal Reflections:\n\n\nRating: [1-5 stars]\nWould recommend: [Yes/No]'
  },
  brainstorm: {
    title: 'Brainstorming Session - [Topic]',
    content: 'Topic: [Topic]\nDate: [Date]\nParticipants: \n\nProblem Statement:\n\n\nIdeas:\nüí° \nüí° \nüí° \nüí° \nüí° \n\nBest Ideas:\n‚≠ê \n‚≠ê \n‚≠ê \n\nNext Steps:\n1. \n2. \n3. '
  },
  habit: {
    title: 'Habit Tracker - [Month]',
    content: 'Month: [Month]\n\nHabits to Track:\n1. [Habit 1]\n2. [Habit 2]\n3. [Habit 3]\n\nWeek 1: [ ][ ][ ][ ][ ][ ][ ]\nWeek 2: [ ][ ][ ][ ][ ][ ][ ]\nWeek 3: [ ][ ][ ][ ][ ][ ][ ]\nWeek 4: [ ][ ][ ][ ][ ][ ][ ]\n\nReflections:\n\n\nNext month goals:\n- \n- \n- '
  }
};

function applyTemplate(templateType) {
  const template = templates[templateType];
  if (template) {
    document.getElementById('noteTitle').value = template.title;
    document.getElementById('noteContent').innerText = template.content;
  }
  document.getElementById('templateDropdown').classList.remove('show');
}
// Add this to your existing JavaScript
document.addEventListener('DOMContentLoaded', function() {
  // Template functionality
  const templateCards = document.querySelectorAll('.template-card');
  
  templateCards.forEach(card => {
    card.addEventListener('click', function() {
      const templateType = this.getAttribute('data-template');
      applyTemplate(templateType);
    });
  });
  
  function applyTemplate(templateType) {
    const noteContent = document.getElementById('noteContent');
    let templateContent = '';
    
    switch(templateType) {
      case 'meeting':
        templateContent = `Meeting: [Meeting Name]
Date: ${new Date().toLocaleDateString()}
Attendees: 
‚Ä¢ 
‚Ä¢ 
‚Ä¢ 

Agenda:
1. 
2. 
3. 

Action Items:
- [ ] 
- [ ] 
- [ ] 

Notes:
‚Ä¢ `;
        break;
        
      case 'todo':
        templateContent = `To-Do List - ${new Date().toLocaleDateString()}

üî¥ High Priority:
- [ ] 

üü° Medium Priority:
- [ ] 

üü¢ Low Priority:
- [ ] 

Completed:
‚úì `;
        break;
        
      case 'project':
        templateContent = `Project: [Project Name]
Status: Planning
Deadline: 

Objectives:
‚Ä¢ 
‚Ä¢ 
‚Ä¢ 

Tasks:
- [ ] 
- [ ] 
- [ ] 

Resources Needed:
‚Ä¢ 
‚Ä¢ 

Notes:`;
        break;
        
      case 'weekly':
        templateContent = `Weekly Planner - Week of ${new Date().toLocaleDateString()}

Monday:
‚Ä¢ 
‚Ä¢ 

Tuesday:
‚Ä¢ 
‚Ä¢ 

Wednesday:
‚Ä¢ 
‚Ä¢ 

Thursday:
‚Ä¢ 
‚Ä¢ 

Friday:
‚Ä¢ 
‚Ä¢ 

Weekend:
‚Ä¢ 
‚Ä¢ 

Goals for this week:
- `;
        break;
        
      case 'journal':
        templateContent = `Journal Entry - ${new Date().toLocaleDateString()}

üåû Morning:
‚Ä¢ 

üåá Afternoon:
‚Ä¢ 

üåô Evening:
‚Ä¢ 

Gratitude:
1. 
2. 
3. 

Goals for Tomorrow:
- `;
        break;
        
      case 'brainstorm':
        templateContent = `Brainstorming Session
Topic: 
Date: ${new Date().toLocaleDateString()}

Ideas:
üí° 
üí° 
üí° 

Action Steps:
‚Üí 
‚Üí 
‚Üí 

Resources:`;
        break;
    }
    
    // Apply template to note content
    if (noteContent) {
      noteContent.value = templateContent;
      
      // Show success feedback
      showFeedback('Template applied successfully! ‚ú®', 'success');
      
      // Scroll to note content
      noteContent.focus();
    }
  }
});

// If you don't have a showFeedback function, add this:
function showFeedback(message, type) {
  // Create feedback element
  const feedback = document.createElement('div');
  feedback.className = `copy-paste-success ${type}`;
  feedback.textContent = message;
  feedback.style.cssText = `
    position: fixed;
    top: 100px;
    right: 20px;
    padding: 12px 20px;
    border-radius: 8px;
    z-index: 10000;
    font-weight: 600;
    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
  `;
  
  document.body.appendChild(feedback);
  
  // Remove after 3 seconds
  setTimeout(() => {
    feedback.remove();
  }, 3000);
}
    // Initialize app
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize drawing functionality
      setupDrawingEvents();
      setupUndoRedoListeners();
      
      // Check if user is already logged in
      if (authToken) {
        showApp();
      }
      
      // Set dark mode as default
      document.body.classList.add('dark-mode');
      document.getElementById('themeToggle').textContent = '‚òÄÔ∏è Light Mode';
      
      // Event listeners
      document.getElementById('newNoteBtn').addEventListener('click', () => showNoteEditor());
      document.getElementById('saveNoteBtn').addEventListener('click', saveNote);
      document.getElementById('cancelNoteBtn').addEventListener('click', hideNoteEditor);
      document.getElementById('addImageBtn').addEventListener('click', () => document.getElementById('imageInput').click());
      document.getElementById('addAudioBtn').addEventListener('click', () => document.getElementById('audioInput').click());



      // Template button event listener
      document.getElementById('templateButton').addEventListener('click', function(e) {
        e.stopPropagation();
        const dropdown = document.getElementById('templateDropdown');
        dropdown.classList.toggle('show');
      });

      // Template option event listeners
      document.querySelectorAll('.template-option').forEach(option => {
        option.addEventListener('click', function() {
          const templateType = this.getAttribute('data-template');
          applyTemplate(templateType);
        });
      });

      // Template selection from main page 
document.querySelectorAll('.template-card').forEach(card => { 
card.addEventListener('click', function() { 
const templateType = this.getAttribute('data-template'); 
applyTemplateFromMain(templateType); 
}); 
}); 
// Function to apply template when clicked from main page 
function applyTemplateFromMain(templateType) { 
// First show the note editor 
showNoteEditor(); 
// Wait a bit for the editor to open, then apply the template 
setTimeout(() => { 
const template = templates[templateType]; 
if (template) { 
// Set the title with current date 
const currentDate = new Date().toLocaleDateString(); 
const title = template.title.replace('[Date]', currentDate); 
document.getElementById('noteTitle').value = title; 
// Set the content 
document.getElementById('noteContent').innerHTML = template.content; 
// Update editor title 
document.getElementById('editorTitle').textContent = 'New Note - ' + 
templateType.charAt(0).toUpperCase() + templateType.slice(1); 
// Show success message 
const statusMessage = document.getElementById('statusMessage'); 
if (statusMessage) { 
statusMessage.textContent = `"${templateType}" template loaded successfully!`; 
statusMessage.className = 'status-message success'; 
statusMessage.style.display = 'block'; 
setTimeout(() => { 
statusMessage.style.display = 'none'; 
}, 3000); 
} 
} 
}, 100); 
}

      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        const dropdown = document.getElementById('templateDropdown');
        const button = document.getElementById('templateButton');
        if (!button.contains(e.target) && !dropdown.contains(e.target)) {
          dropdown.classList.remove('show');
        }
      });

      // Search functionality
      const searchInput = document.getElementById('searchInput');
      
      searchInput.addEventListener('input', function(e) {
        const searchTerm = e.target.value;
        renderNotes(searchTerm);
      });
      
      searchInput.addEventListener('keyup', function(e) {
        const searchTerm = e.target.value;
        renderNotes(searchTerm);
      });

      // Set up file input handlers
      handleFileUpload(document.getElementById('imageInput'), 'image');
      handleFileUpload(document.getElementById('audioInput'), 'audio');

      // Login form handler
      document.getElementById('loginForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        
        try {
          showLoading();
          const response = await apiCall('/login', {
            method: 'POST',
            body: JSON.stringify({ email, password })
          });
          
          authToken = response.token;
          localStorage.setItem('authToken', authToken);
          localStorage.setItem('user', JSON.stringify(response.user));
          
          setTimeout(() => {
            hideLoading();
            showApp();
          }, 2000);
        } catch (error) {
          hideLoading();
          document.getElementById('loginError').textContent = error.message;
          document.getElementById('loginError').style.display = 'block';
        }
      });

      // Register form handler
      document.getElementById('registerForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        const username = document.getElementById('regUsername').value;
        const email = document.getElementById('regEmail').value;
        const password = document.getElementById('regPassword').value;
        
        try {
          showLoading();
          await apiCall('/register', {
            method: 'POST',
            body: JSON.stringify({ username, email, password })
          });
          
          setTimeout(() => {
            hideLoading();
            document.getElementById('registerSuccess').textContent = 'Registration successful! Please login.';
            document.getElementById('registerSuccess').style.display = 'block';
            setTimeout(() => showLogin(), 1500);
          }, 2000);
        } catch (error) {
          hideLoading();
          document.getElementById('registerError').textContent = error.message;
          document.getElementById('registerError').style.display = 'block';
        }
      });





      // Hamburger logout handler
      document.getElementById('logoutMenuBtn').addEventListener('click', function() {
        showLoading();
        setTimeout(() => {
          authToken = null;
          localStorage.removeItem('authToken');
          localStorage.removeItem('user');
          
          // Clear canvas on logout
          if (ctx && canvas) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            canvas.style.display = 'none';
          }
          isDrawMode = false;
          
          hideLoading();
          showLogin();
        }, 1000);
        
        // Close menu after logout
        document.getElementById('hamburgerBtn').classList.remove('active');
        document.getElementById('menuItems').classList.remove('active');
      });



      // Theme toggle
      document.getElementById('themeToggle').addEventListener('click', function() {
        document.body.classList.toggle('dark-mode');
        const isDark = document.body.classList.contains('dark-mode');
        this.textContent = isDark ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
      });

      // Hamburger menu toggle
      document.getElementById('hamburgerBtn').addEventListener('click', function(e) {
        e.stopPropagation();
        this.classList.toggle('active');
        document.getElementById('menuItems').classList.toggle('active');
      });

      // Close menu when clicking outside
      document.addEventListener('click', function() {
        document.getElementById('hamburgerBtn').classList.remove('active');
        document.getElementById('menuItems').classList.remove('active');
      });

      // Prevent menu from closing when clicking inside it
      document.getElementById('menuItems').addEventListener('click', function(e) {
        e.stopPropagation();
      });

      // Export as PDF functionality
      document.getElementById('exportPdfBtn').addEventListener('click', function() {
        // Check if html2pdf is available
        if (typeof html2pdf === 'undefined') {
          alert('PDF export library not loaded. Please refresh the page.');
          return;
        }

        const element = document.querySelector('.app-container');
        const opt = {
          margin: 10,
          filename: 'etherx-notes-' + new Date().toISOString().slice(0, 10) + '.pdf',
          image: { type: 'jpeg', quality: 0.98 },
          html2canvas: { scale: 2 },
          jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };

        html2pdf().set(opt).from(element).save().then(() => {
          alert('Notes exported as PDF successfully!');
        }).catch(err => {
          console.error('PDF export failed:', err);
          alert('Failed to export PDF. Please try again.');
        });

        // Close menu after action
        document.getElementById('hamburgerBtn').classList.remove('active');
        document.getElementById('menuItems').classList.remove('active');
      });

      // Duplicate Note functionality
      document.getElementById('duplicateNoteBtn').addEventListener('click', function() {
        if (notes.length === 0) {
          alert('No notes to duplicate. Create a note first.');
          return;
        }

        // Duplicate the first note as an example (you can modify this logic)
        const noteToDuplicate = notes[0];
        const duplicatedNote = {
          ...noteToDuplicate,
          id: Date.now(),
          title: noteToDuplicate.title + ' (Copy)',
          created: new Date().toISOString()
        };

        // Save to backend
        apiCall('/notes', {
          method: 'POST',
          body: JSON.stringify(duplicatedNote)
        }).then(() => {
          loadNotes();
          renderNotes();
          alert('Note duplicated successfully!');
        }).catch(error => {
          alert('Failed to duplicate note: ' + error.message);
        });

        // Close menu after action
        document.getElementById('hamburgerBtn').classList.remove('active');
        document.getElementById('menuItems').classList.remove('active');
      });

    

      // Hide Notes functionality - Show selection interface
      document.getElementById('hideNotesBtn').addEventListener('click', function() {
        showHideNotesModal();
        
        // Close menu after action
        document.getElementById('hamburgerBtn').classList.remove('active');
        document.getElementById('menuItems').classList.remove('active');
      });

      function showHideNotesModal() {
        const visibleNotes = notes.filter(note => !note.hidden);
        if (visibleNotes.length === 0) {
          alert('No notes available to hide.');
          return;
        }

        const modal = document.createElement('div');
        modal.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000;';
        
        const content = document.createElement('div');
        content.style.cssText = 'background:white;padding:30px;border-radius:10px;max-width:500px;width:90%;max-height:70vh;overflow-y:auto;';
        
        content.innerHTML = `
          <h3 style="margin-top:0;">Select Notes to Hide</h3>
          <div id="noteCheckboxes">
            ${visibleNotes.map(note => `
              <label style="display:block;margin:10px 0;cursor:pointer;">
                <input type="checkbox" value="${note.id}" style="margin-right:10px;">
                <strong>${note.title}</strong>
                <div style="color:#666;font-size:12px;margin-left:22px;">${note.content.substring(0, 50)}...</div>
              </label>
            `).join('')}
          </div>
          <div style="margin-top:20px;display:flex;gap:10px;justify-content:flex-end;">
            <button id="cancelHide" style="padding:8px 16px;background:#ccc;border:none;border-radius:4px;cursor:pointer;">Cancel</button>
            <button id="confirmHide" style="padding:8px 16px;background:#dc3545;color:white;border:none;border-radius:4px;cursor:pointer;">Hide Selected</button>
          </div>
        `;
        
        modal.appendChild(content);
        document.body.appendChild(modal);
        
        document.getElementById('cancelHide').onclick = () => document.body.removeChild(modal);
        document.getElementById('confirmHide').onclick = () => {
          const selectedIds = Array.from(content.querySelectorAll('input[type="checkbox"]:checked')).map(cb => parseInt(cb.value));
          if (selectedIds.length === 0) {
            alert('Please select at least one note to hide.');
            return;
          }
          
          showPinModal((pin) => {
            if (pin && pin.length === 4 && /^\d{4}$/.test(pin)) {
              localStorage.setItem('hidePin', pin);
              hideSelectedNotes(selectedIds);
              document.body.removeChild(modal);
            } else if (pin) {
              alert('Please enter a valid 4-digit PIN.');
            }
          });
        };
      }

      async function hideSelectedNotes(noteIds) {
        try {
          for (const id of noteIds) {
            const note = notes.find(n => n.id === id);
            if (note) {
              const updatedNote = { ...note, hidden: true };
              await apiCall(`/notes/${id}`, {
                method: 'PUT',
                body: JSON.stringify(updatedNote)
              });
            }
          }
          await loadNotes();
          renderNotes();
          const finalState = captureEditorState();
  undoRedoManager.saveState(finalState);
        } catch (error) {
          alert('Failed to hide notes: ' + error.message);
        }
      }

      document.getElementById('unhideNotesBtn').addEventListener('click', async function() {
  const storedPin = localStorage.getItem('hidePin');
  showPinModal(async (pin) => {
    if (pin === storedPin) {
      try {
        // Unhide all notes that are hidden (persist to backend)
        const hiddenNotes = notes.filter(n => n.hidden === true);
        for (const n of hiddenNotes) {
          const updated = { ...n, hidden: false };
          await apiCall(`/notes/${n.id}`, { method: 'PUT', body: JSON.stringify(updated) });
        }
        await loadNotes();
        renderNotes();
        // If print modal is open or user will open it, it will now include unhidden notes.
        // If you want live update while modal open, call populatePrintDropdown() here:
        if (document.getElementById('printNoteModal').style.display === 'flex') {
          await populatePrintDropdown();
        }
      } catch (err) {
        alert('Failed to unhide notes: ' + err.message);
      }
    } else if (pin) {
      alert('Incorrect PIN. Notes remain hidden.');
    }
  });
});


      function showPinModal(callback) {
    const pinModal = document.createElement('div');
    pinModal.style.cssText = `
        position:fixed;top:0;left:0;width:100%;height:100%;
        background:rgba(0,0,0,0.6);display:flex;align-items:center;
        justify-content:center;z-index:2000;
    `;

    const pinContent = document.createElement('div');
    pinContent.style.cssText = `
        background:#1B1A17;
        border:1px solid #F0A500;
        padding:30px;border-radius:12px;
        text-align:center;width:330px;
        color:#F0A500;
        box-shadow:0 0 25px rgba(240,165,0,0.3);
        animation:fadeIn 0.2s ease;
    `;
    pinContent.className = 'pin-modal-content';

    pinContent.innerHTML = `
        <h2 style="margin:0 0 15px 0;color:#F0A500;">Enter PIN</h2>

        <div id="otpContainer" style="display:flex;justify-content:center;gap:10px;margin-bottom:15px;">
            <input maxlength="1" class="otpBox" type="password" style="background:#000000;color:#F0A500;border:2px solid #F0A500;border-radius:8px;width:55px;height:55px;font-size:26px;text-align:center;outline:none;padding:0;">
            <input maxlength="1" class="otpBox" type="password" style="background:#000000;color:#F0A500;border:2px solid #F0A500;border-radius:8px;width:55px;height:55px;font-size:26px;text-align:center;outline:none;padding:0;">
            <input maxlength="1" class="otpBox" type="password" style="background:#000000;color:#F0A500;border:2px solid #F0A500;border-radius:8px;width:55px;height:55px;font-size:26px;text-align:center;outline:none;padding:0;">
            <input maxlength="1" class="otpBox" type="password" style="background:#000000;color:#F0A500;border:2px solid #F0A500;border-radius:8px;width:55px;height:55px;font-size:26px;text-align:center;outline:none;padding:0;">
        </div>

        <span id="togglePin" style="cursor:pointer;font-size:20px;">üëÅÔ∏è</span>

        <p id="forgotPinBtn" style="margin-top:12px;cursor:pointer;color:#F0A500;text-decoration:underline;">
            Forgot PIN?
        </p>

        <div style="margin-top:20px;display:flex;gap:10px;justify-content:center;">
            <button id="cancelPin" style="padding:8px 20px;background:#444;border:none;border-radius:4px;color:white;cursor:pointer;">Cancel</button>
            <button id="confirmPin" style="padding:8px 20px;background:#F0A500;border:none;border-radius:4px;color:black;font-weight:bold;cursor:pointer;">OK</button>
        </div>
    `;

function showHideNotesModal() {
  const visibleNotes = notes.filter(note => !note.hidden);
  if (visibleNotes.length === 0) {
    alert('No notes available to hide.');
    return;
  }

  const modal = document.createElement('div');
  modal.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:1000;';
  modal.className = 'hide-notes-modal';
  
  const content = document.createElement('div');
  content.className = 'hide-notes-modal-content'; // Use class instead of inline styles
  
  content.innerHTML = `
    <h3>Select Notes to Hide</h3>
    <div id="noteCheckboxes">
      ${visibleNotes.map(note => `
        <label>
          <input type="checkbox" value="${note.id}">
          <strong>${note.title}</strong>
          <div>${note.content.substring(0, 50)}...</div>
        </label>
      `).join('')}
    </div>
    <div class="modal-buttons">
      <button id="cancelHide">Cancel</button>
      <button id="confirmHide">Hide Selected</button>
    </div>
  `;
  
  modal.appendChild(content);
  document.body.appendChild(modal);

  document.getElementById('cancelHide').onclick = () => document.body.removeChild(modal);
  document.getElementById('confirmHide').onclick = () => {
    const selectedIds = Array.from(content.querySelectorAll('input[type="checkbox"]:checked')).map(cb => parseInt(cb.value));
    if (selectedIds.length === 0) {
      alert('Please select at least one note to hide.');
      return;
    }
    
    showPinModal((pin) => {
      if (pin && pin.length === 4 && /^\d{4}$/.test(pin)) {
        localStorage.setItem('hidePin', pin);
        hideSelectedNotes(selectedIds);
        document.body.removeChild(modal);
      } else if (pin) {
        alert('Please enter a valid 4-digit PIN.');
      }
    });
  };
}
        // Replace the OTP box style section in the JavaScript
const style = document.createElement('style');
style.textContent = `
    .otpBox {
        width:55px;
        height:55px;
        border-radius:8px;
        font-size:26px;
        text-align:center;
        outline:none;
    }
    .shake {
        animation: shake 0.3s ease;
    }
    @keyframes shake {
        0%{transform:translateX(0);}
        25%{transform:translateX(-6px);}
        50%{transform:translateX(6px);}
        75%{transform:translateX(-6px);}
        100%{transform:translateX(0);}
    }
`;
  document.body.appendChild(style);

    pinModal.appendChild(pinContent);
    document.body.appendChild(pinModal);

    const otpBoxes = pinContent.querySelectorAll(".otpBox");
    otpBoxes[0].focus();

    // Auto-focus chaining
    otpBoxes.forEach((box, i) => {
        box.addEventListener("input", () => {
            if (box.value && i < 3) otpBoxes[i + 1].focus();
        });
        box.addEventListener("keydown", (e) => {
            if (e.key === "Backspace" && i > 0 && !box.value) {
                otpBoxes[i - 1].focus();
            }
        });
    });

    // Show/Hide PIN
    document.getElementById("togglePin").onclick = () => {
        otpBoxes.forEach(b => {
            b.type = b.type === "password" ? "text" : "password";
        });
    };

    // Cancel
    document.getElementById("cancelPin").onclick = () => pinModal.remove();

    // Confirm Button
    document.getElementById("confirmPin").onclick = () => {
        const enteredPin = [...otpBoxes].map(b => b.value).join("");

        const savedPin = localStorage.getItem("hidePin");

        if (enteredPin !== savedPin) {
            pinContent.classList.add("shake");
            setTimeout(()=> pinContent.classList.remove("shake"), 300);
            return;
        }

        callback(enteredPin);
        pinModal.remove();
    };


    // ---------------------------
    //    ‚≠ê FORGOT PIN OPTION
    // ---------------------------
    document.getElementById("forgotPinBtn").onclick = () => {
        const savedAns = localStorage.getItem("hiddenPinSecurityAnswer");

        // First time setup
        if (!savedAns) {
            const newAns = prompt("Set recovery answer (example: your favorite color):");
            if (newAns) {
                localStorage.setItem("hiddenPinSecurityAnswer", newAns.toLowerCase());
                alert("Recovery answer saved!");
            }
            return;
        }

        // Validate
        const verify = prompt("Security Question:\nWhat is your favorite color?");
        if (!verify || verify.toLowerCase() !== savedAns) {
            alert("Incorrect answer.");
            return;
        }

        // Reset new PIN
        const newPin = prompt("Enter new 4-digit PIN:");
        if (!newPin || newPin.length !== 4) {
            alert("Invalid PIN.");
            return;
        }

        localStorage.setItem("hidePin", newPin);
        alert("PIN reset successfully!");
    };
}

      // Sharing functionality
      const savePdfBtn = document.getElementById('savePdfBtn');
      const emailNoteBtn = document.getElementById('emailNoteBtn');
      const downloadNoteBtn = document.getElementById('downloadNoteBtn');
      const statusMessage = document.getElementById('statusMessage');

      // Generate a unique ID for the note
      const noteId = generateNoteId();

      // Save PDF functionality
      document.getElementById('savePdfBtn').addEventListener('click', function() {
        if (typeof html2pdf === 'undefined') {
          showStatus('PDF library not loaded. Please refresh the page.', 'error');
          return;
        }

        const noteTitle = document.getElementById('noteTitle').value.trim() || 'Untitled Note';
        const noteContainer = document.getElementById('noteContent').innerHTML;
        const tagValue = document.getElementById('Tag').value.trim();
        const todoList = document.getElementById('taskList').innerHTML;
        const currentDate = new Date().toLocaleString();
        
        // Get drawing if exists
        let drawingHTML = '';
        if (canvas && ctx) {
          const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
          const hasDrawing = imageData.data.some(pixel => pixel !== 0);
          if (hasDrawing) {
            const drawingDataURL = canvas.toDataURL('image/png');
            drawingHTML = `<div style="margin:20px 0;"><h3>Drawing:</h3><img src="${drawingDataURL}" style="max-width:100%; border:1px solid #ccc;"></div>`;
          }
        }
        
        // Get attachments
        let attachmentsHTML = '';
        if (currentAttachments.length > 0) {
          attachmentsHTML = '<div style="margin:20px 0;"><h3>Attachments:</h3>';
          currentAttachments.forEach(att => {
            if (att.type === 'image') {
              attachmentsHTML += `<div style="margin:10px 0;"><strong>${att.name}</strong><br><img src="${att.url}" style="max-width:100%; margin:5px 0;"></div>`;
            } else {
              attachmentsHTML += `<div style="margin:10px 0;"><strong>${att.name}</strong> (${att.type})</div>`;
            }
          });
          attachmentsHTML += '</div>';
        }
        
        // Audio insertion inside noteContent text area
const addAudioBtn = document.getElementById("addAudioBtn");
const audioInput = document.getElementById("audioInput");
const noteCont = document.getElementById("noteContent");

addAudioBtn.addEventListener("click", () => {
  audioInput.click(); // open file dialog
});

audioInput.addEventListener("change", () => {
  const file = audioInput.files[0];
  
  if (!file) return;

  // Check if file is an audio file
  if (!file.type.startsWith('audio/')) {
    alert('Please select an audio file');
    return;
  }

  const reader = new FileReader();
  reader.onload = (e) => {
    // Create a simple inline audio player
    const audioSpan = document.createElement("span");
    audioSpan.style.display = "inline-block";
    audioSpan.style.margin = "0 5px";
    audioSpan.style.verticalAlign = "middle";
    
    const audio = document.createElement("audio");
    audio.controls = true;
    audio.style.maxWidth = "200px";
    audio.style.height = "30px";
    audio.style.display = "inline-block";
    audio.style.verticalAlign = "middle";
    
    const source = document.createElement("source");
    source.src = e.target.result;
    source.type = file.type;
    
    audio.appendChild(source);
    audioSpan.appendChild(audio);
    
    // Insert audio inline at cursor position in note content
    insertAudioInline(audioSpan);
  };
  reader.readAsDataURL(file);
  audioInput.value = ""; // reset
});

function insertAudioInline(audioElement) {
  const selection = window.getSelection();
  
  if (selection.rangeCount > 0) {
    const range = selection.getRangeAt(0);
    
    // Check if the selection is within the noteContent
    if (noteContent.contains(range.commonAncestorContainer)) {
      // Insert the audio element at cursor position
      range.insertNode(audioElement);
      
      // Add a space after the audio for continued typing
      const space = document.createTextNode(" ");
      range.insertNode(space);
      
      // Move cursor after the space
      range.setStartAfter(space);
      range.collapse(true);
      selection.removeAllRanges();
      selection.addRange(range);
    } else {
      // If cursor is not in noteContent, append to the end with a space
      noteContent.appendChild(audioElement);
      noteContent.appendChild(document.createTextNode(" "));
    }
  } else {
    // If no selection, append to the end with a space
    noteContent.appendChild(audioElement);
    noteContent.appendChild(document.createTextNode(" "));
  }
  
  // Focus back to note content
  noteContent.focus();
}

// Remove the old attachment-based audio handling
// Remove or comment out this part from your existing code:
/*
handleFileUpload(document.getElementById('audioInput'), 'audio');
*/
        
        // Image insertion inside noteContent only
const addImageBtn = document.getElementById("addImageBtn");
const imageInput = document.getElementById("imageInput");
const noteContent = document.getElementById("noteContent");

addImageBtn.addEventListener("click", () => {
  imageInput.click(); // open file dialog
});

imageInput.addEventListener("change", () => {
  const file = imageInput.files[0];
  
  if (!file) return;

  // Check if file is an image
  if (!file.type.startsWith('image/')) {
    alert('Please select an image file');
    return;
  }

  const reader = new FileReader();
  reader.onload = (e) => {
    const img = document.createElement("img");
    img.src = e.target.result;
    img.alt = "Inserted image";
    img.style.maxWidth = "100%";
    img.style.height = "auto";
    img.style.margin = "10px 0";
    img.style.borderRadius = "8px";
    img.style.display = "block";
    img.style.boxShadow = "0 0 8px rgba(0,0,0,0.15)";
    
    // Insert image at cursor position in note content
    insertImageAtCursor(img);
  };
  reader.readAsDataURL(file);
  imageInput.value = ""; // reset
});

function insertImageAtCursor(imgElement) {
  const selection = window.getSelection();
  
  if (selection.rangeCount > 0) {
    const range = selection.getRangeAt(0);
    
    // Check if the selection is within the noteContent
    if (noteContent.contains(range.commonAncestorContainer)) {
      range.deleteContents();
      range.insertNode(imgElement);
      
      // Add a space after the image for better editing
      const space = document.createTextNode(" ");
      range.insertNode(space);
      
      // Move cursor after the image
      range.setStartAfter(space);
      range.collapse(true);
      selection.removeAllRanges();
      selection.addRange(range);
    } else {
      // If cursor is not in noteContent, append to the end
      noteContent.appendChild(imgElement);
      noteContent.appendChild(document.createTextNode(" "));
    }
  } else {
    // If no selection, append to the end of note content
    noteContent.appendChild(imgElement);
    noteContent.appendChild(document.createTextNode(" "));
  }
  
  // Focus back to note content
  noteContent.focus();
}

// Remove the old attachment-based image handling
// Remove or comment out this part from your existing code:
/*
handleFileUpload(document.getElementById('imageInput'), 'image');
*/


        
        // Get todo items
        let todoHTML = '';
        if (todoList && todoList.trim()) {
          todoHTML = `<div style="margin:20px 0;"><h3>To-Do Items:</h3><ul>${todoList}</ul></div>`;
        }
        
        const element = document.createElement('div');
        element.innerHTML = `
          <div style="padding:20px; font-family:Arial,sans-serif;">
            <h1 style="color:#333; border-bottom:2px solid #007bff; padding-bottom:10px;">${noteTitle}</h1>
            <div style="color:#666; font-size:12px; margin:10px 0;">Created: ${currentDate} | EtherX OneNote</div>
            ${tagValue ? `<div style="margin:15px 0;"><strong>Tags:</strong> <span style="background:#e3f2fd; padding:3px 8px; border-radius:12px; font-size:12px;">${tagValue}</span></div>` : ''}
            <div style="margin:20px 0;"><h3>Content:</h3><div style="border:1px solid #ddd; padding:15px; border-radius:5px; background:#f9f9f9;">${noteContent}</div></div>
            ${drawingHTML}
            ${todoHTML}
            ${attachmentsHTML}
          </div>
        `;
        
        const opt = {
          margin: 10,
          filename: `${noteTitle.replace(/[^a-z0-9]/gi, '_')}_complete.pdf`,
          image: { type: 'jpeg', quality: 0.98 },
          html2canvas: { scale: 2 },
          jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };

        html2pdf().set(opt).from(element).save().then(() => {
          showStatus('Complete note saved as PDF successfully!', 'success');
        }).catch(err => {
          console.error('PDF save failed:', err);
          showStatus('Failed to save PDF. Please try again.', 'error');
        });
      });

      // Email Note functionality
      emailNoteBtn.addEventListener('click', function() {
        const noteTitle = document.getElementById('noteTitle').value.trim();
        const noteContent = document.getElementById('noteContent').innerText.trim();
        const subject = noteTitle || 'Check out this note';
        const body = `I wanted to share this note with you:\n\n${noteContent}\n\nView online: ${window.location.origin}/notes/${noteId}`;

        const mailtoLink = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        window.open(mailtoLink, '_blank');

        showStatus('Email client opened with note content.', 'success');
      });

      // Download Note functionality
      downloadNoteBtn.addEventListener('click', async function() {
        const noteTitle = document.getElementById('noteTitle').value.trim();
        const noteContent = document.getElementById('noteContent').innerHTML;
        const tagValue = document.getElementById('Tag').value.trim();
        const todoList = document.getElementById('taskList').innerHTML;
        const currentDate = new Date().toLocaleString();
        
        // Create comprehensive note data
        const noteData = {
          title: noteTitle || 'Untitled Note',
          content: noteContent,
          tags: tagValue,
          todoItems: todoList,
          attachments: currentAttachments,
          createdDate: currentDate,
          wordCount: document.getElementById('noteContent').innerText.split(' ').filter(w => w.length > 0).length,
          characterCount: document.getElementById('noteContent').innerText.length
        };
        
       
        
        // Download Note as TXT functionality
document.getElementById('downloadNoteBtn').addEventListener('click', function() {
    downloadNoteAsTxt();
});

function downloadNoteAsTxt() {
    const noteTitle = document.getElementById('noteTitle').value.trim() || 'Untitled Note';
    const noteContent = getPlainTextContent();
    const tagValue = document.getElementById('Tag').value.trim();
    const currentDate = new Date().toLocaleString();
    
    // Get todo items as plain text
    const todoItems = getTodoItemsAsText();
    
    // Create TXT content
    let txtContent = '';
    
    // Header
    txtContent += `=${'='.repeat(50)}=\n`;
    txtContent += `   ${noteTitle.toUpperCase()}\n`;
    txtContent += `=${'='.repeat(50)}=\n\n`;
    
    // Metadata
    txtContent += `Created: ${currentDate}\n`;
    txtContent += `Source: EtherX OneNote\n\n`;
    
    // Tag
    if (tagValue) {
        txtContent += `TAG: ${tagValue}\n\n`;
    }
    
    // Content
    txtContent += `CONTENT:\n`;
    txtContent += `${'-'.repeat(50)}\n`;
    txtContent += `${noteContent}\n\n`;
    
    // To-Do Items
    if (todoItems) {
        txtContent += `TO-DO ITEMS:\n`;
        txtContent += `${'-'.repeat(50)}\n`;
        txtContent += `${todoItems}\n\n`;
    }
    
    // Statistics
    const wordCount = noteContent.split(/\s+/).filter(word => word.length > 0).length;
    const charCount = noteContent.length;
    
    txtContent += `STATISTICS:\n`;
    txtContent += `${'-'.repeat(50)}\n`;
    txtContent += `Words: ${wordCount}\n`;
    txtContent += `Characters: ${charCount}\n`;
    txtContent += `Downloaded: ${new Date().toLocaleString()}\n`;
    
    // Create and download TXT file
    const blob = new Blob([txtContent], { type: 'text/plain;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const filename = `${noteTitle.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.txt`;
    
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    
    setTimeout(() => {
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }, 100);
    
    showStatus('Note downloaded as TXT file!', 'success');
}

// Helper function to get plain text from note content
function getPlainTextContent() {
    const noteContent = document.getElementById('noteContent');
    
    // Create a temporary element to extract text
    const tempDiv = document.createElement('div');
    tempDiv.innerHTML = noteContent.innerHTML;
    
    // Remove any images or other non-text elements
    const images = tempDiv.querySelectorAll('img');
    images.forEach(img => img.remove());
    
    // Remove audio elements
    const audioElements = tempDiv.querySelectorAll('audio');
    audioElements.forEach(audio => audio.remove());
    
    // Get clean text content
    let text = tempDiv.textContent || tempDiv.innerText || '';
    
    // Clean up the text
    text = text.replace(/\s+/g, ' ').trim();
    text = text.replace(/ +/g, ' ');
    
    return text;
}

// Helper function to get todo items as plain text
function getTodoItemsAsText() {
    const taskList = document.getElementById('taskList');
    if (!taskList || taskList.children.length === 0) return '';
    
    let todoText = '';
    const tasks = taskList.querySelectorAll('li');
    
    tasks.forEach((task, index) => {
        const taskText = task.textContent.replace('Delete', '').trim();
        todoText += `${index + 1}. ${taskText}\n`;
    });
    
    return todoText;
}

// Update the status message function if not exists
function showStatus(message, type) {
    const statusMessage = document.getElementById('statusMessage');
    if (statusMessage) {
        statusMessage.textContent = message;
        statusMessage.className = 'status-message ' + type;
        statusMessage.style.display = 'block';

        setTimeout(() => {
            statusMessage.style.display = 'none';
        }, 3000);
    }
}
        
        showStatus('Complete note specification downloaded!', 'success');
      });

      // Helper function to show status messages
      function showStatus(message, type) {
        statusMessage.textContent = message;
        statusMessage.className = 'status-message ' + type;

        setTimeout(() => {
          statusMessage.style.display = 'none';
        }, 3000);
      }

      // Helper function to generate a simple note ID
      function generateNoteId() {
        return 'note_' + Math.random().toString(36).substr(2, 9);
      }

      // Zoom functionality
      let currentZoom = 100;
      
      document.getElementById('zoomInBtn').addEventListener('click', () => {
        if (currentZoom < 200) {
          currentZoom += 10;
          updateZoom();
        }
      });

      document.getElementById('zoomOutBtn').addEventListener('click', () => {
        if (currentZoom > 50) {
          currentZoom -= 10;
          updateZoom();
        }
      });

      function updateZoom() {
        const noteContent = document.getElementById('noteContent');
        noteContent.style.fontSize = (16 * currentZoom / 100) + 'px';
        document.getElementById('zoomLevel').textContent = currentZoom + '%';
      }
    });

    // ===== SIMPLE WORKING ZOOM FUNCTIONALITY =====
let currentZoomLevel = 100;

// Direct button functions - NO event listeners
function handleZoomIn() {
    console.log('‚ûï Zoom IN clicked - Current level:', currentZoomLevel);
    
    if (currentZoomLevel >= 200) return;
    
    currentZoomLevel += 10;
    applyZoomToSelection();
    updateZoomDisplay();
}

function handleZoomOut() {
    console.log('‚ûñ Zoom OUT clicked - Current level:', currentZoomLevel);
    
    if (currentZoomLevel <= 50) return;
    
    currentZoomLevel -= 10;
    applyZoomToSelection();
    updateZoomDisplay();
}

function applyZoomToSelection() {
    console.log('üéØ Applying zoom:', currentZoomLevel + '%');
    
    const noteContent = document.getElementById('noteContent');
    if (!noteContent) {
        console.log('‚ùå Note editor not found');
        return;
    }
    
    // Get selection
    const selection = window.getSelection();
    const selectedText = selection.toString();
    
    if (!selectedText || selectedText.trim() === '') {
        console.log('‚ùå No text selected');
        return;
    }
    
    console.log('üìù Selected text:', selectedText);
    
    try {
        const range = selection.getRangeAt(0);
        
        // Create zoomed span
        const zoomSpan = document.createElement('span');
        zoomSpan.style.fontSize = currentZoomLevel + '%';
        zoomSpan.style.display = 'inline';
        zoomSpan.textContent = selectedText;
        
        // Replace selection with zoomed text
        range.deleteContents();
        range.insertNode(zoomSpan);
        
        // Select the zoomed text again
        selection.removeAllRanges();
        const newRange = document.createRange();
        newRange.selectNodeContents(zoomSpan);
        selection.addRange(newRange);
        
        console.log('‚úÖ Zoom applied successfully');
        
    } catch (error) {
        console.error('‚ùå Zoom error:', error);
    }
}

function updateZoomDisplay() {
    const display = document.getElementById('zoomLevel');
    if (display) {
        display.textContent = currentZoomLevel + '%';
    }
}

// Reset zoom when new text is selected
document.addEventListener('selectionchange', function() {
    const selection = window.getSelection();
    if (selection.toString().trim()) {
        currentZoomLevel = 100;
        updateZoomDisplay();
    }
});

// SIMPLE BUTTON SETUP - This will definitely work
function setupZoomButtons() {
    console.log('üîÑ Setting up zoom buttons...');
    
    // Get buttons
    const zoomInBtn = document.getElementById('zoomInBtn');
    const zoomOutBtn = document.getElementById('zoomOutBtn');
    
    if (!zoomInBtn || !zoomOutBtn) {
        console.log('‚ùå Zoom buttons not found');
        return false;
    }
    
    console.log('‚úÖ Found zoom buttons');
    
    // Remove ALL existing event listeners by completely replacing buttons
    const newZoomIn = document.createElement('button');
    newZoomIn.id = 'zoomInBtn';
    newZoomIn.className = 'option-btn';
    newZoomIn.type = 'button';
    newZoomIn.textContent = '+';
    
    const newZoomOut = document.createElement('button');
    newZoomOut.id = 'zoomOutBtn';
    newZoomOut.className = 'option-btn';
    newZoomOut.type = 'button';
    newZoomOut.textContent = '-';
    
    // Replace old buttons with new ones
    zoomInBtn.parentNode.replaceChild(newZoomIn, zoomInBtn);
    zoomOutBtn.parentNode.replaceChild(newZoomOut, zoomOutBtn);
    
    // DIRECT onclick assignment (most reliable)
    newZoomIn.onclick = handleZoomIn;
    newZoomOut.onclick = handleZoomOut;
    
    console.log('‚úÖ Zoom buttons setup complete');
    return true;
}

// Initialize when editor opens
const originalShowNoteEditor = window.showNoteEditor;
window.showNoteEditor = function(note = null) {
    originalShowNoteEditor(note);
    
    // Reset zoom
    currentZoomLevel = 100;
    
    // Setup zoom with multiple attempts
    setTimeout(() => {
        if (!setupZoomButtons()) {
            // Retry if first attempt fails
            setTimeout(setupZoomButtons, 500);
        }
        updateZoomDisplay();
    }, 500);
};

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    console.log('üîç Zoom system ready');
    setTimeout(setupZoomButtons, 1000);
});
// üö® EMERGENCY ZOOM FIX - MANUAL BUTTON BINDING üö®
setTimeout(function() {
    console.log('üö® APPLYING EMERGENCY ZOOM FIX...');
    
    function manualButtonBinding() {
        const zoomIn = document.getElementById('zoomInBtn');
        const zoomOut = document.getElementById('zoomOutBtn');
        
        if (zoomIn && zoomOut) {
            console.log('üîß Found buttons, applying manual binding...');
            
            // Completely recreate buttons
            const newIn = document.createElement('button');
            newIn.id = 'zoomInBtn';
            newIn.className = 'option-btn';
            newIn.type = 'button';
            newIn.textContent = '+';
            newIn.style.cssText = 'width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold;';
            
            const newOut = document.createElement('button');
            newOut.id = 'zoomOutBtn';
            newOut.className = 'option-btn';
            newOut.type = 'button';
            newOut.textContent = '-';
            newOut.style.cssText = 'width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold;';
            
            // Replace existing buttons
            zoomIn.parentNode.replaceChild(newIn, zoomIn);
            zoomOut.parentNode.replaceChild(newOut, zoomOut);
            
            // DIRECT function binding
            newIn.onclick = function() {
                console.log('EMERGENCY: Zoom IN clicked');
                if (currentZoomLevel < 200) {
                    currentZoomLevel += 10;
                    
                    const noteContent = document.getElementById('noteContent');
                    const selection = window.getSelection();
                    const selectedText = selection.toString();
                    
                    if (noteContent && selectedText.trim()) {
                        try {
                            const range = selection.getRangeAt(0);
                            const zoomSpan = document.createElement('span');
                            zoomSpan.style.fontSize = currentZoomLevel + '%';
                            zoomSpan.style.display = 'inline';
                            zoomSpan.textContent = selectedText;
                            
                            range.deleteContents();
                            range.insertNode(zoomSpan);
                            
                            selection.removeAllRanges();
                            const newRange = document.createRange();
                            newRange.selectNodeContents(zoomSpan);
                            selection.addRange(newRange);
                            
                            document.getElementById('zoomLevel').textContent = currentZoomLevel + '%';
                            
                        } catch (error) {
                            console.error('Error:', error);
                        }
                    }
                }
            };
            
            newOut.onclick = function() {
                console.log('EMERGENCY: Zoom OUT clicked');
                if (currentZoomLevel > 50) {
                    currentZoomLevel -= 10;
                    
                    const noteContent = document.getElementById('noteContent');
                    const selection = window.getSelection();
                    const selectedText = selection.toString();
                    
                    if (noteContent && selectedText.trim()) {
                        try {
                            const range = selection.getRangeAt(0);
                            const zoomSpan = document.createElement('span');
                            zoomSpan.style.fontSize = currentZoomLevel + '%';
                            zoomSpan.style.display = 'inline';
                            zoomSpan.textContent = selectedText;
                            
                            range.deleteContents();
                            range.insertNode(zoomSpan);
                            
                            selection.removeAllRanges();
                            const newRange = document.createRange();
                            newRange.selectNodeContents(zoomSpan);
                            selection.addRange(newRange);
                            
                            document.getElementById('zoomLevel').textContent = currentZoomLevel + '%';
                            
                        } catch (error) {
                            console.error('Error:', error);
                        }
                    }
                }
            };
            
            console.log('‚úÖ Emergency fix applied!');
            return true;
        }
        console.log('‚ùå Buttons not found for emergency fix');
        return false;
    }
    
    // Apply emergency fix
    manualButtonBinding();
    
}, 2000);

// Enhanced registration function with hide password setup
async function registerUser(userData) {
  try {
    // First, create the user account
    const response = await apiCall('/auth/register', {
      method: 'POST',
      body: JSON.stringify({
        ...userData,
        hidePin: null // Will be set during setup
      })
    });
    
    if (response.success) {
      localStorage.setItem('authToken', response.token);
      localStorage.setItem('user', JSON.stringify(response.user));
      authToken = response.token;
      
      // Show hide password setup immediately after registration
      showHidePasswordSetup(true);
      
      return true;
    }
  } catch (error) {
    console.error('Registration failed:', error);
    throw error;
  }
}

// Enhanced login function
async function loginUser(credentials) {
  try {
    const response = await apiCall('/auth/login', {
      method: 'POST',
      body: JSON.stringify(credentials)
    });
    
    if (response.success) {
      localStorage.setItem('authToken', response.token);
      localStorage.setItem('user', JSON.stringify(response.user));
      authToken = response.token;
      
      // Check if user needs to set up hide password
      if (!response.user.hidePin) {
        showHidePasswordSetup(false);
      } else {
        showApp();
      }
      
      return true;
    }
  } catch (error) {
    console.error('Login failed:', error);
    throw error;
  }
}

// Hide Password Setup Modal
function showHidePasswordSetup(isNewUser = false) {
  const modal = document.createElement('div');
  modal.className = 'hide-password-setup-modal';
  modal.innerHTML = `
    <div class="hide-password-setup-content">
      <div class="setup-header">
        <div class="setup-icon">üîí</div>
        <h3>${isNewUser ? 'Welcome! Set Your Hide Password' : 'Set Up Hide Password'}</h3>
        <p>Create a secure password to protect your hidden notes</p>
      </div>
      
      <div class="password-form">
        <div class="form-group">
          <label for="hidePassword">Hide Password</label>
          <div class="input-wrapper">
            <input type="password" id="hidePassword" placeholder="Enter 4-6 digit password" maxlength="6">
            <button type="button" class="password-toggle" onclick="toggleSetupPasswordVisibility()">
              <i class="fas fa-eye"></i>
            </button>
          </div>
          <div class="password-strength">
            <div class="strength-bar"></div>
            <span class="strength-text">Password strength</span>
          </div>
        </div>
        
        <div class="form-group">
          <label for="confirmHidePassword">Confirm Password</label>
          <div class="input-wrapper">
            <input type="password" id="confirmHidePassword" placeholder="Re-enter your password" maxlength="6">
            <button type="button" class="password-toggle" onclick="toggleSetupConfirmPasswordVisibility()">
              <i class="fas fa-eye"></i>
            </button>
          </div>
          <div class="password-match" style="display: none;">
            <i class="fas fa-check"></i>
            <span>Passwords match</span>
          </div>
        </div>
      </div>
      
      <div class="password-requirements">
        <h4>Requirements:</h4>
        <ul>
          <li class="req-length">4-6 characters</li>
          <li class="req-digits">Only digits (0-9)</li>
          <li class="req-match">Passwords must match</li>
        </ul>
      </div>
      
      <div class="setup-actions">
        <button id="setupHidePassword" class="btn-primary setup-btn" disabled>
          <i class="fas fa-lock"></i>
          Set Hide Password
        </button>
        ${!isNewUser ? `
        <button id="skipSetup" class="btn-secondary">
          Set Up Later
        </button>
        ` : ''}
      </div>
      
      <div class="setup-info">
        <i class="fas fa-info-circle"></i>
        <span>You'll need this password to hide and unhide your notes.</span>
      </div>
    </div>
  `;
  
  document.body.appendChild(modal);
  
  // Initialize setup functionality
  initializeHidePasswordSetup(modal, isNewUser);
}

// Initialize hide password setup
function initializeHidePasswordSetup(modal, isNewUser) {
  const hidePasswordInput = modal.querySelector('#hidePassword');
  const confirmPasswordInput = modal.querySelector('#confirmHidePassword');
  const setupButton = modal.querySelector('#setupHidePassword');
  const skipButton = modal.querySelector('#skipSetup');
  
  // Real-time validation
  hidePasswordInput.addEventListener('input', () => validateHidePassword(modal));
  confirmPasswordInput.addEventListener('input', () => validateHidePassword(modal));
  
  // Setup button click
  setupButton.addEventListener('click', async () => {
    const password = hidePasswordInput.value;
    const confirmPassword = confirmPasswordInput.value;
    
    if (validatePasswordRequirements(password, confirmPassword)) {
      await saveUserHidePassword(password);
      modal.remove();
      
      if (isNewUser) {
        showApp();
      }
    }
  });
  
  // Skip button (only for existing users)
  if (skipButton) {
    skipButton.addEventListener('click', () => {
      modal.remove();
      showApp();
      showNotification('You can set up your hide password later from the menu.', 'info');
    });
  }
  
  // Enter key support
  hidePasswordInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      confirmPasswordInput.focus();
    }
  });
  
  confirmPasswordInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' && !setupButton.disabled) {
      setupButton.click();
    }
  });
}

// Validate hide password in real-time
function validateHidePassword(modal) {
  const password = modal.querySelector('#hidePassword').value;
  const confirmPassword = modal.querySelector('#confirmHidePassword').value;
  const setupButton = modal.querySelector('#setupHidePassword');
  const strengthBar = modal.querySelector('.strength-bar');
  const strengthText = modal.querySelector('.strength-text');
  const matchIndicator = modal.querySelector('.password-match');
  
  // Check requirements
  const requirements = validatePasswordRequirements(password, confirmPassword, true);
  
  // Update strength indicator
  updatePasswordStrength(password, strengthBar, strengthText);
  
  // Update match indicator
  if (confirmPassword.length > 0) {
    if (password === confirmPassword && password.length >= 4) {
      matchIndicator.style.display = 'flex';
      matchIndicator.style.color = '#10b981';
    } else {
      matchIndicator.style.display = 'flex';
      matchIndicator.style.color = '#ef4444';
    }
  } else {
    matchIndicator.style.display = 'none';
  }
  
  // Update requirements list
  updateRequirementsList(modal, requirements);
  
  // Enable/disable setup button
  setupButton.disabled = !requirements.isValid;
  
  if (requirements.isValid) {
    setupButton.style.background = 'var(--gold)';
    setupButton.style.opacity = '1';
  } else {
    setupButton.style.background = '#6b7280';
    setupButton.style.opacity = '0.6';
  }
}

// Validate password requirements
function validatePasswordRequirements(password, confirmPassword, returnDetails = false) {
  const requirements = {
    length: password.length >= 4 && password.length <= 6,
    digits: /^\d+$/.test(password),
    match: password === confirmPassword && password.length > 0,
    isValid: false
  };
  
  requirements.isValid = requirements.length && requirements.digits && requirements.match;
  
  if (returnDetails) {
    return requirements;
  }
  
  return requirements.isValid;
}

// Update password strength indicator
function updatePasswordStrength(password, strengthBar, strengthText) {
  const length = password.length;
  let strength = 0;
  let text = 'Very Weak';
  let color = '#ef4444';
  
  if (length >= 4) {
    strength = 60;
    text = 'Good';
    color = '#10b981';
  }
  
  if (length >= 5) {
    strength = 80;
    text = 'Strong';
    color = '#059669';
  }
  
  if (length >= 6) {
    strength = 100;
    text = 'Very Strong';
    color = '#047857';
  }
  
  strengthBar.style.width = `${strength}%`;
  strengthBar.style.background = color;
  strengthText.textContent = text;
  strengthText.style.color = color;
}

// Update requirements list
function updateRequirementsList(modal, requirements) {
  const reqLength = modal.querySelector('.req-length');
  const reqDigits = modal.querySelector('.req-digits');
  const reqMatch = modal.querySelector('.req-match');
  
  reqLength.style.color = requirements.length ? '#10b981' : '#ef4444';
  reqDigits.style.color = requirements.digits ? '#10b981' : '#ef4444';
  reqMatch.style.color = requirements.match ? '#10b981' : '#ef4444';
  
  if (requirements.length) {
    reqLength.innerHTML = '‚úì 4-6 characters';
  }
  
  if (requirements.digits) {
    reqDigits.innerHTML = '‚úì Only digits (0-9)';
  }
  
  if (requirements.match) {
    reqMatch.innerHTML = '‚úì Passwords match';
  }
}

// Save user's hide password
async function saveUserHidePassword(password) {
  try {
    const user = JSON.parse(localStorage.getItem('user'));
    
    const response = await apiCall('/user/hide-password', {
      method: 'PUT',
      body: JSON.stringify({ hidePassword: password })
    });
    
    if (response.success) {
      // Update local user data
      user.hidePassword = password;
      localStorage.setItem('user', JSON.stringify(user));
      
      showNotification('Hide password set up successfully!', 'success');
      
      // Show success message
      setTimeout(() => {
        showNotification('Your notes are now protected with your hide password.', 'info');
      }, 1000);
    }
  } catch (error) {
    console.error('Failed to save hide password:', error);
    showNotification('Failed to set up hide password', 'error');
    throw error;
  }
}

// Toggle password visibility in setup modal
function toggleSetupPasswordVisibility() {
  const passwordInput = document.querySelector('#hidePassword');
  const toggleButton = document.querySelector('#hidePassword').parentNode.querySelector('.password-toggle');
  const icon = toggleButton.querySelector('i');
  
  if (passwordInput.type === 'password') {
    passwordInput.type = 'text';
    icon.className = 'fas fa-eye-slash';
  } else {
    passwordInput.type = 'password';
    icon.className = 'fas fa-eye';
  }
}

function toggleSetupConfirmPasswordVisibility() {
  const passwordInput = document.querySelector('#confirmHidePassword');
  const toggleButton = document.querySelector('#confirmHidePassword').parentNode.querySelector('.password-toggle');
  const icon = toggleButton.querySelector('i');
  
  if (passwordInput.type === 'password') {
    passwordInput.type = 'text';
    icon.className = 'fas fa-eye-slash';
  } else {
    passwordInput.type = 'password';
    icon.className = 'fas fa-eye';
  }
}

// Enhanced hide note function with user-specific password
async function hideNote(id) {
  const user = JSON.parse(localStorage.getItem('user'));
  
  // Check if user has set up hide password
  if (!user.hidePassword) {
    showHidePasswordSetup(false);
    return;
  }
  
  const enteredPassword = prompt('Enter your hide password to hide this note:');
  
  if (enteredPassword === user.hidePassword) {
    try {
      const note = notes.find(n => n.id === id);
      if (!note) return;
      
      const updatedNote = {
        ...note,
        hidden: true
      };
      
      await apiCall(`/notes/${id}`, {
        method: 'PUT',
        body: JSON.stringify(updatedNote)
      });
      
      await loadNotes();
      renderNotes();
      showNotification('Note has been hidden.', 'success');
    } catch (error) {
      showNotification('Failed to hide note: ' + error.message, 'error');
    }
  } else if (enteredPassword) {
    showNotification('Incorrect password. Note not hidden.', 'error');
  }
}

// Enhanced unhide notes function
async function unhideNotes() {
  const user = JSON.parse(localStorage.getItem('user'));
  
  // Check if user has set up hide password
  if (!user.hidePassword) {
    showHidePasswordSetup(false);
    return;
  }
  
  const enteredPassword = prompt('Enter your hide password to unhide notes:');
  
  if (enteredPassword === user.hidePassword) {
    try {
      // Get all hidden notes
      const hiddenNotes = notes.filter(note => note.hidden);
      
      // Unhide all notes
      for (const note of hiddenNotes) {
        const updatedNote = {
          ...note,
          hidden: false
        };
        
        await apiCall(`/notes/${note.id}`, {
          method: 'PUT',
          body: JSON.stringify(updatedNote)
        });
      }
      
      await loadNotes();
      renderNotes();
      showNotification('All notes have been unhidden.', 'success');
    } catch (error) {
      showNotification('Failed to unhide notes: ' + error.message, 'error');
    }
  } else if (enteredPassword) {
    showNotification('Incorrect password.', 'error');
  }
}

// Add setup hide password option to menu
function addHidePasswordSetupToMenu() {
  const menuItems = document.getElementById('menuItems');
  
  // Remove existing setup item if it exists
  const existingSetupItem = document.getElementById('setupHidePasswordItem');
  if (existingSetupItem) {
    existingSetupItem.remove();
  }
  
  const setupItem = document.createElement('div');
  setupItem.className = 'menu-item';
  setupItem.id = 'setupHidePasswordItem';
  setupItem.innerHTML = `
    <i class="fas fa-lock"></i>
    <span>Set Up Hide Password</span>
  `;
  
  setupItem.addEventListener('click', () => {
    document.getElementById('menuItems').classList.remove('active');
    document.getElementById('hamburgerBtn').classList.remove('active');
    showHidePasswordSetup(false);
  });
  
  // Insert before logout button
  const logoutBtn = document.getElementById('logoutMenuBtn');
  menuItems.insertBefore(setupItem, logoutBtn);
}

// Update menu based on hide password status
function updateMenuForHidePassword() {
  const user = JSON.parse(localStorage.getItem('user'));
  const setupItem = document.getElementById('setupHidePasswordItem');
  
  if (user.hidePassword) {
    // User has hide password set up
    if (setupItem) {
      setupItem.innerHTML = `
        <i class="fas fa-key"></i>
        <span>Change Hide Password</span>
      `;
    }
  } else {
    // User needs to set up hide password
    addHidePasswordSetupToMenu();
  }
}
// Client-side password validation (replace the server code)
function validateHidePassword(hidePassword) {
    if (!hidePassword || !/^\d{4,6}$/.test(hidePassword)) {
        return { error: 'Password must be 4-6 digits' };
    }
    return { success: true };
}

// Usage example:
const password = "1234";
const validation = validateHidePassword(password);
if (validation.error) {
    console.error(validation.error);
} else {
    // Password is valid, proceed with your TTS functionality
    // Your TTS code here...
}
app.get('/api/user/hide-password-status', authenticateToken, async (req, res) => {
  try {
    const userId = req.user.id;
    const user = await User.findByPk(userId, { attributes: ['hidePassword'] });
    
    res.json({ hasHidePassword: !!user.hidePassword });
  } catch (error) {
    res.status(500).json({ error: 'Failed to get hide password status' });
  }
});
// Check hide password status on app load
async function initializeHidePasswordSystem() {
  const user = JSON.parse(localStorage.getItem('user'));
  
  if (user && !user.hidePassword) {
    // User is logged in but doesn't have hide password set up
    addHidePasswordSetupToMenu();
    
    // Show reminder after a delay
    setTimeout(() => {
      showNotification('Set up your hide password to protect your notes.', 'info');
    }, 3000);
  }
  
  updateMenuForHidePassword();
}

// Call this after successful login/registration
initializeHidePasswordSystem();

// Password setup functionality
let passwordSetupModal = document.getElementById('passwordSetupModal');
let newPasswordInput = document.getElementById('newPassword');
let confirmPasswordInput = document.getElementById('confirmPassword');
let savePasswordBtn = document.getElementById('savePasswordBtn');
let strengthBar = document.getElementById('strengthBar');
let strengthText = document.getElementById('strengthText');
let passwordMatch = document.getElementById('passwordMatch');

// Password strength requirements
let requirements = {
  length: document.getElementById('reqLength'),
  uppercase: document.getElementById('reqUppercase'),
  lowercase: document.getElementById('reqLowercase'),
  number: document.getElementById('reqNumber'),
  special: document.getElementById('reqSpecial')
};

// Track if we're in the middle of hiding a specific note
let pendingNoteToHide = null;

// Show password setup modal
function showPasswordSetup(noteId = null) {
  pendingNoteToHide = noteId;
  passwordSetupModal.style.display = 'flex';
  newPasswordInput.value = '';
  confirmPasswordInput.value = '';
  updatePasswordStrength();
  checkPasswordMatch();
  
  // Reset requirement styles
  Object.values(requirements).forEach(req => {
    req.classList.remove('valid');
  });
}

// Hide password setup modal
function hidePasswordSetup() {
  passwordSetupModal.style.display = 'none';
  pendingNoteToHide = null;
}

// Toggle password visibility in setup modal
function toggleSetupPassword(inputId) {
  const input = document.getElementById(inputId);
  const button = input.parentElement.querySelector('.password-toggle');
  const svg = button.querySelector('svg');
  
  if (input.type === 'password') {
    input.type = 'text';
    svg.innerHTML = `
      <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" stroke="currentColor" stroke-width="2" fill="none"/>
      <line x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2"/>
    `;
  } else {
    input.type = 'password';
    svg.innerHTML = `
      <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" stroke-width="2" fill="none"/>
      <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
    `;
  }
}

// Check password strength
function checkPasswordStrength(password) {
  let score = 0;
  
  // Check length
  if (password.length >= 8) {
    score += 1;
    requirements.length.classList.add('valid');
  } else {
    requirements.length.classList.remove('valid');
  }
  
  // Check uppercase
  if (/[A-Z]/.test(password)) {
    score += 1;
    requirements.uppercase.classList.add('valid');
  } else {
    requirements.uppercase.classList.remove('valid');
  }
  
  // Check lowercase
  if (/[a-z]/.test(password)) {
    score += 1;
    requirements.lowercase.classList.add('valid');
  } else {
    requirements.lowercase.classList.remove('valid');
  }
  
  // Check number
  if (/[0-9]/.test(password)) {
    score += 1;
    requirements.number.classList.add('valid');
  } else {
    requirements.number.classList.remove('valid');
  }
  
  // Check special character
  if (/[^A-Za-z0-9]/.test(password)) {
    score += 1;
    requirements.special.classList.add('valid');
  } else {
    requirements.special.classList.remove('valid');
  }
  
  return score;
}

// Update password strength indicator
function updatePasswordStrength() {
  const password = newPasswordInput.value;
  const score = checkPasswordStrength(password);
  
  // Update strength bar
  const percentage = (score / 5) * 100;
  strengthBar.style.width = `${percentage}%`;
  
  // Update strength text and color
  if (password.length === 0) {
    strengthBar.style.background = '#ef4444';
    strengthText.textContent = 'Password strength';
  } else if (score <= 2) {
    strengthBar.style.background = '#ef4444';
    strengthText.textContent = 'Weak password';
  } else if (score <= 3) {
    strengthBar.style.background = '#f59e0b';
    strengthText.textContent = 'Medium password';
  } else if (score <= 4) {
    strengthBar.style.background = '#10b981';
    strengthText.textContent = 'Strong password';
  } else {
    strengthBar.style.background = '#10b981';
    strengthText.textContent = 'Very strong password';
  }
  
  updateSaveButtonState();
}

// Check if passwords match
function checkPasswordMatch() {
  const password = newPasswordInput.value;
  const confirm = confirmPasswordInput.value;
  
  if (confirm.length === 0) {
    passwordMatch.style.display = 'none';
  } else if (password === confirm) {
    passwordMatch.style.display = 'flex';
    passwordMatch.classList.add('valid');
    passwordMatch.innerHTML = '<i class="fas fa-check"></i><span>Passwords match</span>';
  } else {
    passwordMatch.style.display = 'flex';
    passwordMatch.classList.remove('valid');
    passwordMatch.innerHTML = '<i class="fas fa-times"></i><span>Passwords do not match</span>';
  }
  
  updateSaveButtonState();
}

// Update save button state
function updateSaveButtonState() {
  const password = newPasswordInput.value;
  const confirm = confirmPasswordInput.value;
  const score = checkPasswordStrength(password);
  
  const isStrongEnough = score >= 3; // At least medium strength
  const passwordsMatch = password === confirm && password.length > 0;
  
  savePasswordBtn.disabled = !(isStrongEnough && passwordsMatch);
}

// Save password
function savePassword() {
  const password = newPasswordInput.value;
  
  // Store password securely (in a real app, you'd hash this)
  localStorage.setItem('hidePassword', btoa(password));
  localStorage.setItem('hasPasswordSetup', 'true');
  
  // Show success message
  alert('Password set successfully! You can now hide notes.');
  
  // Close modal
  hidePasswordSetup();
  
  // If there was a pending note to hide, hide it now
  if (pendingNoteToHide) {
    hideNoteAfterPasswordSetup(pendingNoteToHide, password);
  }
}

// Hide note after password setup
async function hideNoteAfterPasswordSetup(id, password) {
  try {
    const note = notes.find(n => n.id === id);
    if (!note) return;
    
    const updatedNote = {
      ...note,
      hidden: true
    };
    
    await apiCall(`/notes/${id}`, {
      method: 'PUT',
      body: JSON.stringify(updatedNote)
    });
    
    await loadNotes();
    renderNotes();
    alert('Note has been hidden.');
  } catch (error) {
    alert('Failed to hide note: ' + error.message);
  }
}

// Check if user has password setup
function hasPasswordSetup() {
  return localStorage.getItem('hasPasswordSetup') === 'true';
}

// Event Listeners
document.addEventListener('DOMContentLoaded', function() {
  // Password strength and match checking
  if (newPasswordInput) {
    newPasswordInput.addEventListener('input', updatePasswordStrength);
  }
  
  if (confirmPasswordInput) {
    confirmPasswordInput.addEventListener('input', checkPasswordMatch);
  }
  
  // Save password button
  if (savePasswordBtn) {
    savePasswordBtn.addEventListener('click', savePassword);
  }
  
  // Cancel button
  const cancelBtn = document.getElementById('cancelPasswordSetup');
  if (cancelBtn) {
    cancelBtn.addEventListener('click', hidePasswordSetup);
  }
});

// MODIFIED: Updated hideNote function to automatically show password setup for new users
async function hideNote(id) {
  // Check if password is set up
  if (!hasPasswordSetup()) {
    // Show password setup modal for new users
    showPasswordSetup(id);
    return;
  }
  
  // Existing user - ask for password
  const pin = prompt('Enter your note hiding password:');
  if (pin) {
    try {
      const storedPassword = atob(localStorage.getItem('hidePassword'));
      
      if (pin === storedPassword) {
        const note = notes.find(n => n.id === id);
        if (!note) return;
        
        const updatedNote = {
          ...note,
          hidden: true
        };
        
        await apiCall(`/notes/${id}`, {
          method: 'PUT',
          body: JSON.stringify(updatedNote)
        });
        
        await loadNotes();
        renderNotes();
        alert('Note has been hidden.');
      } else {
        alert('Incorrect password. Note not hidden.');
      }
    } catch (error) {
      alert('Failed to hide note: ' + error.message);
    }
  }
}

// MODIFIED: Updated showHideNotesModal to check for password setup
function showHideNotesModal() {
  // Check if password is set up
  if (!hasPasswordSetup()) {
    // Show password setup modal for new users
    showPasswordSetup();
    return;
  }
  
  // Existing user - show the hide notes modal
  // ... your existing showHideNotesModal code ...
  const modal = document.getElementById('hideNotesModal');
  if (modal) {
    modal.style.display = 'flex';
    // Rest of your existing code for populating the modal
  }
}

// MODIFIED: Updated unhideNotes function to check for password setup
async function unhideNotes() {
  // Check if password is set up
  if (!hasPasswordSetup()) {
    alert('No hidden notes found or password not set up.');
    return;
  }
  
  const pin = prompt('Enter your note hiding password to unhide notes:');
  if (pin) {
    try {
      const storedPassword = atob(localStorage.getItem('hidePassword'));
      
      if (pin === storedPassword) {
        // Your existing unhide logic here
        const hiddenNotes = notes.filter(note => note.hidden);
        
        for (const note of hiddenNotes) {
          const updatedNote = {
            ...note,
            hidden: false
          };
          
          await apiCall(`/notes/${note.id}`, {
            method: 'PUT',
            body: JSON.stringify(updatedNote)
          });
        }
        
        await loadNotes();
        renderNotes();
        alert('All notes have been unhidden.');
      } else {
        alert('Incorrect password. Notes not unhidden.');
      }
    } catch (error) {
      alert('Failed to unhide notes: ' + error.message);
    }
  }
}

// OTP Management
let otpTimer = null;
let otpExpiryTime = null;

// Show OTP Modal
function showOTPModal(email) {
    const otpModal = document.getElementById('otpModal');
    const otpInputs = document.querySelectorAll('.otp-box');
    
    // Clear previous OTP inputs
    otpInputs.forEach(input => {
        input.value = '';
        input.classList.remove('filled');
    });
    
    // Reset timer
    resetOTPTimer();
    
    // Focus first input
    otpInputs[0].focus();
    
    // Show modal
    otpModal.style.display = 'flex';
    
    // Start OTP timer
    startOTPTimer();
    
    // Send OTP to email (you need to implement this)
    sendOTP(email);
}

// Hide OTP Modal
function hideOTPModal() {
    const otpModal = document.getElementById('otpModal');
    otpModal.style.display = 'none';
    
    // Clear timer
    if (otpTimer) {
        clearInterval(otpTimer);
    }
}

// Send OTP to email
async function sendOTP(email) {
    try {
        const response = await apiCall('/auth/send-otp', {
            method: 'POST',
            body: JSON.stringify({ email })
        });
        
        if (response.success) {
            console.log('OTP sent successfully');
            showOTPStatus('OTP sent to your email', 'success');
        } else {
            throw new Error(response.error || 'Failed to send OTP');
        }
    } catch (error) {
        console.error('Failed to send OTP:', error);
        showOTPStatus('Failed to send OTP', 'error');
    }
}

// Verify OTP
async function verifyOTP(email, otp) {
    try {
        const response = await apiCall('/auth/verify-otp', {
            method: 'POST',
            body: JSON.stringify({ email, otp })
        });
        
        if (response.success) {
            showOTPStatus('Email verified successfully!', 'success');
            setTimeout(() => {
                hideOTPModal();
                // Proceed with registration
                completeRegistration();
            }, 1000);
            return true;
        } else {
            throw new Error(response.error || 'Invalid OTP');
        }
    } catch (error) {
        console.error('OTP verification failed:', error);
        showOTPStatus('Invalid OTP. Please try again.', 'error');
        return false;
    }
}

// Start OTP Timer
function startOTPTimer() {
    const timerElement = document.getElementById('otpTimer');
    const resendBtn = document.getElementById('resendOtpBtn');
    
    let timeLeft = 300; // 5 minutes in seconds
    otpExpiryTime = Date.now() + (timeLeft * 1000);
    
    // Disable resend button initially
    resendBtn.disabled = true;
    
    otpTimer = setInterval(() => {
        timeLeft--;
        
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        
        if (timeLeft <= 0) {
            clearInterval(otpTimer);
            timerElement.textContent = '00:00';
            resendBtn.disabled = false;
            showOTPStatus('OTP expired. Please request a new one.', 'error');
        }
    }, 1000);
}

// Reset OTP Timer
function resetOTPTimer() {
    if (otpTimer) {
        clearInterval(otpTimer);
    }
    const timerElement = document.getElementById('otpTimer');
    timerElement.textContent = '05:00';
}

// Show OTP Status
function showOTPStatus(message, type) {
    const statusElement = document.getElementById('otpStatus');
    statusElement.textContent = message;
    statusElement.className = `otp-status ${type}`;
    
    setTimeout(() => {
        statusElement.textContent = '';
        statusElement.className = 'otp-status';
    }, 5000);
}

// OTP Input Handling
function setupOTPInputs() {
    const otpInputs = document.querySelectorAll('.otp-box');
    const verifyBtn = document.getElementById('verifyOtpBtn');
    
    otpInputs.forEach((input, index) => {
        // Handle input
        input.addEventListener('input', (e) => {
            const value = e.target.value;
            
            if (value.length === 1 && /[0-9]/.test(value)) {
                input.classList.add('filled');
                
                // Move to next input
                if (index < otpInputs.length - 1) {
                    otpInputs[index + 1].focus();
                }
            } else if (value.length === 0) {
                input.classList.remove('filled');
            } else {
                // Invalid input, clear it
                e.target.value = '';
            }
            
            // Check if all inputs are filled
            checkOTPCompletion();
        });
        
        // Handle backspace
        input.addEventListener('keydown', (e) => {
            if (e.key === 'Backspace' && input.value === '' && index > 0) {
                otpInputs[index - 1].focus();
            }
        });
        
        // Handle paste
        input.addEventListener('paste', (e) => {
            e.preventDefault();
            const pastedData = e.clipboardData.getData('text');
            const otpDigits = pastedData.replace(/\D/g, '').split('').slice(0, 6);
            
            otpDigits.forEach((digit, digitIndex) => {
                if (otpInputs[digitIndex]) {
                    otpInputs[digitIndex].value = digit;
                    otpInputs[digitIndex].classList.add('filled');
                }
            });
            
            // Focus last filled input
            const lastFilledIndex = Math.min(otpDigits.length - 1, 5);
            if (otpInputs[lastFilledIndex]) {
                otpInputs[lastFilledIndex].focus();
            }
            
            checkOTPCompletion();
        });
    });
    
    // Verify button click
    verifyBtn.addEventListener('click', () => {
        const otp = Array.from(otpInputs).map(input => input.value).join('');
        if (otp.length === 6) {
            const email = document.getElementById('regEmail').value;
            verifyOTP(email, otp);
        }
    });
    
    // Resend OTP button
    document.getElementById('resendOtpBtn').addEventListener('click', () => {
        const email = document.getElementById('regEmail').value;
        sendOTP(email);
        resetOTPTimer();
        startOTPTimer();
        showOTPStatus('New OTP sent to your email', 'success');
    });
    
    // Cancel OTP button
    document.getElementById('cancelOtpBtn').addEventListener('click', () => {
        hideOTPModal();
    });
}

// Check if OTP is complete
function checkOTPCompletion() {
    const otpInputs = document.querySelectorAll('.otp-box');
    const verifyBtn = document.getElementById('verifyOtpBtn');
    const isComplete = Array.from(otpInputs).every(input => input.value.length === 1);
    
    verifyBtn.disabled = !isComplete;
}

// Complete registration after OTP verification
function completeRegistration() {
    const registerForm = document.getElementById('registerForm');
    const formData = new FormData(registerForm);
    
    // Your existing registration logic here
    const userData = {
        username: document.getElementById('regUsername').value,
        email: document.getElementById('regEmail').value,
        password: document.getElementById('regPassword').value
    };
    
    // Call your registration API
    registerUser(userData);
}

// Modify your existing register function to use OTP
async function registerUser(userData) {
    try {
        const response = await apiCall('/auth/register', {
            method: 'POST',
            body: JSON.stringify(userData)
        });
        
        if (response.success) {
            // Store auth token
            localStorage.setItem('authToken', response.token);
            localStorage.setItem('user', JSON.stringify(response.user));
            
            // Show success and redirect
            document.getElementById('registerSuccess').textContent = 'Registration successful!';
            document.getElementById('registerSuccess').style.display = 'block';
            
            setTimeout(() => {
                showLoading();
                setTimeout(showApp, 2000);
            }, 1000);
        } else {
            throw new Error(response.error || 'Registration failed');
        }
    } catch (error) {
        console.error('Registration failed:', error);
        document.getElementById('registerError').textContent = error.message;
        document.getElementById('registerError').style.display = 'block';
    }
}

// Update your register form submission to trigger OTP
document.getElementById('registerForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const email = document.getElementById('regEmail').value;
    const password = document.getElementById('regPassword').value;
    const username = document.getElementById('regUsername').value;
    
    // Basic validation
    if (!email || !password || !username) {
        document.getElementById('registerError').textContent = 'All fields are required';
        document.getElementById('registerError').style.display = 'block';
        return;
    }
    
    // Show OTP modal instead of directly registering
    showOTPModal(email);
});

// Initialize OTP functionality when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    setupOTPInputs();
});

// In your backend server
app.post('/api/auth/send-otp', async (req, res) => {
    const { email } = req.body;
    
    // Generate 6-digit OTP
    const otp = Math.floor(100000 + Math.random() * 900000).toString();
    
    // Store OTP in database with expiry (5 minutes)
    // await storeOTP(email, otp);
    
    // Send email with OTP (implement your email service)
    // await sendEmail(email, 'Your OTP Code', `Your OTP is: ${otp}`);
    
    res.json({ success: true, message: 'OTP sent successfully' });
});

app.post('/api/auth/verify-otp', async (req, res) => {
    const { email, otp } = req.body;
    
    // Verify OTP from database
    // const isValid = await verifyOTP(email, otp);
    
    // For demo purposes, accept any 6-digit OTP
    const isValid = otp.length === 6 && /^\d+$/.test(otp);
    
    if (isValid) {
        res.json({ success: true, message: 'OTP verified successfully' });
    } else {
        res.status(400).json({ success: false, error: 'Invalid OTP' });
    }
});

// Show editor and hide app container background
function showNoteEditor(noteData = null) {
    // Add class to body to hide app container
    document.body.classList.add('editor-open');
    
    // Show your existing editor modal (no changes to your existing function)
    document.getElementById('noteEditor').style.display = 'block';
    
    // Your existing code for setting note content...
    if (noteData) {
        document.getElementById('noteTitle').value = noteData.title || '';
        document.getElementById('Tag').value = noteData.tag || '';
        document.getElementById('noteContent').innerHTML = noteData.content || '';
        document.getElementById('editorTitle').textContent = 'Edit Note';
    } else {
        document.getElementById('noteTitle').value = '';
        document.getElementById('Tag').value = '';
        document.getElementById('noteContent').innerHTML = '';
        document.getElementById('editorTitle').textContent = 'New Note';
    }
}

// Hide editor and show app container background
function hideNoteEditor() {
    // Remove class to show app container
    document.body.classList.remove('editor-open');
    
    // Hide your existing editor modal (no changes to your existing function)
    document.getElementById('noteEditor').style.display = 'none';
}

// Update your existing new note button
document.getElementById('newNoteBtn').addEventListener('click', function() {
    showNoteEditor();
});

// Your existing cancel button (just add hideNoteEditor call)
document.getElementById('cancelNoteBtn').addEventListener('click', function() {
    if (confirm('Are you sure you want to cancel? Unsaved changes will be lost.')) {
        hideNoteEditor();
    }
});

// Your existing save button (just add hideNoteEditor call)
document.getElementById('saveNoteBtn').addEventListener('click', function() {
    const noteData = {
        title: document.getElementById('noteTitle').value,
        tag: document.getElementById('Tag').value,
        content: document.getElementById('noteContent').innerHTML,
        createdAt: new Date().toISOString()
    };
    
    // Your existing save logic here
    console.log('Saving note:', noteData);
    
    // Hide editor after save
    hideNoteEditor();
});

// ===== TEXT-TO-SPEECH - COMPLETE WORKING SOLUTION =====
function initializeTextToSpeech() {
    console.log("Initializing Text-to-Speech...");
    
    // Create TTS manager
    const ttsManager = {
        isSpeaking: false,
        utterance: null,
        
        speak: function(text) {
            if (!text || text.trim() === '') {
                this.showMessage('Please select some text first', 'error');
                return false;
            }
            
            // Check browser support
            if (!('speechSynthesis' in window)) {
                this.showMessage('Text-to-speech not supported in your browser', 'error');
                return false;
            }
            
            // Stop any current speech
            this.stop();
            
            // Create utterance
            this.utterance = new SpeechSynthesisUtterance(text.trim());
            this.utterance.rate = 0.9;
            this.utterance.pitch = 1;
            this.utterance.volume = 1;
            
            // Set up events
            this.utterance.onstart = () => {
                this.isSpeaking = true;
                this.updateButton();
                this.showMessage('Reading text...', 'success');
                console.log("TTS started");
            };
            
            this.utterance.onend = () => {
                this.isSpeaking = false;
                this.updateButton();
                this.showMessage('Finished reading', 'info');
                console.log("TTS ended");
            };
            
            this.utterance.onerror = (event) => {
                this.isSpeaking = false;
                this.updateButton();
                this.showMessage('Error reading text', 'error');
                console.error("TTS error:", event);
            };
            
            // Start speaking
            window.speechSynthesis.speak(this.utterance);
            return true;
        },
        
        stop: function() {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                this.isSpeaking = false;
                this.updateButton();
            }
        },
        
        toggle: function(text) {
            if (this.isSpeaking) {
                this.stop();
                this.showMessage('Stopped reading', 'info');
            } else {
                this.speak(text);
            }
        },
        
        updateButton: function() {
            const button = document.getElementById('voiceToTextBtn');
            if (button) {
                if (this.isSpeaking) {
                    button.innerHTML = '<i class="fas fa-stop"></i> Stop';
                    button.style.background = 'linear-gradient(135deg, #ff4444, #ff6666)';
                } else {
                    button.innerHTML = '<i class="fas fa-volume-up"></i> Read Text';
                    button.style.background = '';
                }
            }
        },
        
        showMessage: function(message, type) {
            // Remove existing message
            const existing = document.getElementById('tts-message');
            if (existing) existing.remove();
            
            // Create new message
            const messageDiv = document.createElement('div');
            messageDiv.id = 'tts-message';
            messageDiv.textContent = message;
            messageDiv.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                padding: 12px 18px;
                background: ${type === 'error' ? '#ff4444' : type === 'success' ? '#4CAF50' : '#FFD700'};
                color: #1B1A17;
                border-radius: 8px;
                font-weight: bold;
                z-index: 10000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(messageDiv);
            
            // Auto remove
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.remove();
                }
            }, 3000);
        }
    };

    // Add CSS for animation
    if (!document.getElementById('tts-styles')) {
        const style = document.createElement('style');
        style.id = 'tts-styles';
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            #voiceToTextBtn:active {
                transform: scale(0.95);
            }
            
            ::selection {
                background: rgba(255, 215, 0, 0.3) !important;
            }
        `;
        document.head.appendChild(style);
    }

    // Initialize button event
    function setupTTSButton() {
        const voiceBtn = document.getElementById('voiceToTextBtn');
        
        if (voiceBtn) {
            // Remove any existing event listeners
            const newVoiceBtn = voiceBtn.cloneNode(true);
            voiceBtn.parentNode.replaceChild(newVoiceBtn, voiceBtn);
            
            // Add new event listener
            newVoiceBtn.addEventListener('click', function() {
                const selectedText = window.getSelection().toString().trim();
                console.log("Selected text:", selectedText);
                
                if (!selectedText) {
                    ttsManager.showMessage('Please select some text first', 'error');
                    return;
                }
                
                ttsManager.toggle(selectedText);
            });
            
            console.log("TTS button setup complete");
            return true;
        } else {
            console.log("TTS button not found, retrying...");
            return false;
        }
    }

    // Try to setup button
    let attempts = 0;
    const maxAttempts = 10;
    
    const setupInterval = setInterval(() => {
        attempts++;
        if (setupTTSButton() || attempts >= maxAttempts) {
            clearInterval(setupInterval);
            if (attempts >= maxAttempts) {
                console.error("Failed to find TTS button after", maxAttempts, "attempts");
            }
        }
    }, 500);

    return ttsManager;
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(() => {
        window.tts = initializeTextToSpeech();
        console.log("Text-to-Speech initialized:", window.tts);
    }, 1000);
});

// Also initialize when the app container becomes visible
const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
            const appContainer = document.querySelector('.app-container');
            if (appContainer && appContainer.style.display !== 'none' && !window.tts) {
                setTimeout(() => {
                    window.tts = initializeTextToSpeech();
                }, 500);
            }
        }
    });
});

// Start observing
const appContainer = document.querySelector('.app-container');
if (appContainer) {
    observer.observe(appContainer, { attributes: true });
}

  </script>
</body>
</html>